# ユーザーストーリー

## Epic: プロンプト管理の共通化

### ストーリー 1: 共通プロンプトディレクトリの作成
**優先順位**: Must-have

As a スターターキットの利用者
I want to 全バージョン共通のプロンプトファイルを参照できる
So that スターターキットの改善が即座に全バージョンに反映される

**受け入れ基準**:
- [ ] `docs/aidlc/prompts/` ディレクトリが作成されている
- [ ] 各フェーズのプロンプトファイル（inception.md, construction.md, operations.md）が配置されている
- [ ] 各フェーズプロンプトの先頭に common.md の内容が含まれている
- [ ] additional-rules.md が共通プロンプトとして配置されている

**技術的考慮事項**:
- 各フェーズプロンプトは1ファイルだけで完結する内容にする
- ユーザーは各フェーズで1ファイルだけ読めばOKにする

---

### ストーリー 2: 共通テンプレートディレクトリの作成
**優先順位**: Must-have

As a スターターキットの利用者
I want to 全バージョン共通のテンプレートファイルを参照できる
So that テンプレートの改善が即座に全バージョンに反映される

**受け入れ基準**:
- [ ] `docs/aidlc/templates/` ディレクトリが作成されている
- [ ] 全テンプレートファイル（intent_template.md等）が配置されている
- [ ] JIT生成は維持されている

**技術的考慮事項**:
- JIT生成の生成先を `docs/aidlc/templates/` に変更

---

### ストーリー 3: バージョン情報の記録
**優先順位**: Must-have

As a スターターキットの利用者
I want to セットアップ時に使用したスターターキットのバージョンを記録できる
So that 将来的にアップデート管理ができる

**受け入れ基準**:
- [ ] `docs/aidlc/version.txt` ファイルが作成されている
- [ ] セットアップ時に使用したスターターキットのバージョン番号が記録されている

**技術的考慮事項**:
- セットアップ完了時に自動作成

---

## Epic: バージョンごとの成果物管理

### ストーリー 4: バージョン固有ディレクトリの分離
**優先順位**: Must-have

As a スターターキットの利用者
I want to バージョンごとの成果物を独立して管理できる
So that 各バージョンの実装内容が明確に分離される

**受け入れ基準**:
- [ ] `docs/versions/{VERSION}/` ディレクトリが作成されている
- [ ] plans/, requirements/, story-artifacts/, design-artifacts/, construction/, operations/ ディレクトリが配置されている
- [ ] history.md がバージョンごとに配置されている
- [ ] additional-rules.md（バージョン固有）が配置されている（オプション）

**技術的考慮事項**:
- プロンプトとテンプレートは含めない（共通化済み）

---

## Epic: setup-prompt.md の改善

### ストーリー 5: 新しい変数の追加
**優先順位**: Must-have

As a スターターキットのメンテナンス担当者
I want to セットアップ時に新しいディレクトリ構造に対応した変数を定義できる
So that 共通プロンプトとバージョン固有成果物を適切に配置できる

**受け入れ基準**:
- [ ] `AIDLC_ROOT` 変数が追加されている（デフォルト: docs/aidlc）
- [ ] `VERSIONS_ROOT` 変数が追加されている（デフォルト: docs/versions）
- [ ] 既存の `DOCS_ROOT`、`VERSION` 変数も維持されている

**技術的考慮事項**:
- 後方互換性を考慮

---

### ストーリー 6: プロンプトファイル生成先の変更
**優先順位**: Must-have

As a スターターキットのメンテナンス担当者
I want to プロンプトファイルの生成先を共通ディレクトリに変更できる
So that 全バージョンで同じプロンプトを使用できる

**受け入れ基準**:
- [ ] プロンプトファイルの生成先が `{{AIDLC_ROOT}}/prompts/` になっている
- [ ] 各フェーズプロンプトに common.md の内容が含まれている
- [ ] additional-rules.md が `{{AIDLC_ROOT}}/prompts/` と `{{VERSIONS_ROOT}}/{{VERSION}}/` の両方に配置される

**技術的考慮事項**:
- 共通の additional-rules.md とバージョン固有の additional-rules.md の両方をサポート

---

### ストーリー 7: テンプレートファイル生成先の変更
**優先順位**: Must-have

As a スターターキットのメンテナンス担当者
I want to テンプレートファイルの生成先を共通ディレクトリに変更できる
So that 全バージョンで同じテンプレートを使用できる

**受け入れ基準**:
- [ ] テンプレートファイルの生成先が `{{AIDLC_ROOT}}/templates/` になっている
- [ ] JIT生成の仕組みは維持されている

**技術的考慮事項**:
- 各フェーズプロンプトのテンプレート参照パスを更新

---

## Epic: README.md の更新

### ストーリー 8: 新しいディレクトリ構造の説明
**優先順位**: Must-have

As a スターターキットの新規利用者
I want to 新しいディレクトリ構造を理解できる
So that セットアップと開発をスムーズに進められる

**受け入れ基準**:
- [ ] README.md に新しいディレクトリ構造（`docs/aidlc/` と `docs/versions/`）が記載されている
- [ ] 各ディレクトリの役割が明確に説明されている

**技術的考慮事項**:
- 既存の説明も維持（後方互換性のため）

---

### ストーリー 9: セットアップ手順の更新
**優先順位**: Must-have

As a スターターキットの新規利用者
I want to 新しい変数とセットアップ手順を理解できる
So that 正しくセットアップできる

**受け入れ基準**:
- [ ] README.md にセットアップ手順が更新されている
- [ ] 新しい変数（AIDLC_ROOT, VERSIONS_ROOT）が説明されている
- [ ] 各フェーズの読み込み方法が更新されている（1ファイルのみ）

**技術的考慮事項**:
- クイックスタートセクションを更新

---

## Epic: 旧構造の削除

### ストーリー 10: docs/example/ の削除
**優先順位**: Should-have

As a スターターキットのメンテナンス担当者
I want to 旧構造の例（docs/example/）を削除できる
So that 新構造のみに統一できる

**受け入れ基準**:
- [ ] `docs/example/` ディレクトリが削除されている
- [ ] README.md で削除について説明されている

**技術的考慮事項**:
- すべての新構造ドキュメントが完成してから削除

---

## Epic: バージョン管理

### ストーリー 11: VERSION ファイルの更新
**優先順位**: Must-have

As a スターターキットのメンテナンス担当者
I want to VERSION ファイルを 1.0.0 に更新できる
So that 新バージョンとしてリリースできる

**受け入れ基準**:
- [ ] `VERSION` ファイルが 1.0.0 に更新されている

**技術的考慮事項**:
- Operations Phase で実施

---

### ストーリー 12: Git タグの作成
**優先順位**: Must-have

As a スターターキットのメンテナンス担当者
I want to Git タグ（v1.0.0）を作成できる
So that リリースバージョンを明確にできる

**受け入れ基準**:
- [ ] Git タグ `v1.0.0` が作成されている

**技術的考慮事項**:
- Operations Phase で実施

---

## Epic: 各フェーズプロンプトの更新

### ストーリー 13: inception.md のパス参照更新
**優先順位**: Must-have

As a スターターキットの利用者
I want to inception.md で新しいパス参照を使用できる
So that 正しいファイルを参照できる

**受け入れ基準**:
- [ ] inception.md のパス参照が新構造に対応している
- [ ] `{{AIDLC_ROOT}}/templates/` を参照している
- [ ] `{{VERSIONS_ROOT}}/{{VERSION}}/` を参照している

**技術的考慮事項**:
- セットアップ時にパス置換

---

### ストーリー 14: construction.md のパス参照更新
**優先順位**: Must-have

As a スターターキットの利用者
I want to construction.md で新しいパス参照を使用できる
So that 正しいファイルを参照できる

**受け入れ基準**:
- [ ] construction.md のパス参照が新構造に対応している
- [ ] `{{AIDLC_ROOT}}/templates/` を参照している
- [ ] `{{VERSIONS_ROOT}}/{{VERSION}}/` を参照している

**技術的考慮事項**:
- セットアップ時にパス置換

---

### ストーリー 15: operations.md のパス参照更新
**優先順位**: Must-have

As a スターターキットの利用者
I want to operations.md で新しいパス参照を使用できる
So that 正しいファイルを参照できる

**受け入れ基準**:
- [ ] operations.md のパス参照が新構造に対応している
- [ ] `{{AIDLC_ROOT}}/templates/` を参照している
- [ ] `{{VERSIONS_ROOT}}/{{VERSION}}/` を参照している

**技術的考慮事項**:
- セットアップ時にパス置換

---

## ストーリーマップ

```
Epic: プロンプト管理の共通化
├── ストーリー 1: 共通プロンプトディレクトリの作成
├── ストーリー 2: 共通テンプレートディレクトリの作成
└── ストーリー 3: バージョン情報の記録

Epic: バージョンごとの成果物管理
└── ストーリー 4: バージョン固有ディレクトリの分離

Epic: setup-prompt.md の改善
├── ストーリー 5: 新しい変数の追加
├── ストーリー 6: プロンプトファイル生成先の変更
└── ストーリー 7: テンプレートファイル生成先の変更

Epic: README.md の更新
├── ストーリー 8: 新しいディレクトリ構造の説明
└── ストーリー 9: セットアップ手順の更新

Epic: 旧構造の削除
└── ストーリー 10: docs/example/ の削除

Epic: バージョン管理
├── ストーリー 11: VERSION ファイルの更新
└── ストーリー 12: Git タグの作成

Epic: 各フェーズプロンプトの更新
├── ストーリー 13: inception.md のパス参照更新
├── ストーリー 14: construction.md のパス参照更新
└── ストーリー 15: operations.md のパス参照更新
```
