# Construction Phase 実行計画: Unit5 - 旧構造の削除とバージョン管理

## Unit概要
新しいディレクトリ構造への移行が完了したため、旧構造のファイル・ディレクトリを削除し、バージョン管理機能を検証する

## 実装範囲
- 旧構造ファイル・ディレクトリの削除
- バージョン管理機能の検証
- ドキュメントの最終整合性確認

## 現在の旧構造の状況

### 削除対象
1. **開発前の初期Intent**: `docs/v1.0.0-intent.md`（正式版は`docs/versions/v1.0.0/requirements/intent.md`に作成済み）
2. **v0.1.0の出力サンプル**: `docs/example/`（新構造への移行のため不要）

### 保持対象
- `prompts/`: 実装ファイル（v0.1.0）
- `docs/translations/`: AI-DLC理論の翻訳文書
- `docs/aidlc/`: 新構造（共通プロンプト・テンプレート用の計画ディレクトリ）
- `docs/versions/`: 新構造（バージョン固有成果物）

## 実行ステップ

### Phase 1: 設計（コードは書かない、対話形式）

#### ステップ1: ドメインモデル設計
- **目的**: 旧構造削除のドメイン知識を整理
- **成果物**: `docs/versions/v1.0.0/design-artifacts/domain-models/unit5_domain_model.md`
- **アプローチ**:
  - バージョン管理のライフサイクルを定義
  - 削除対象と保持対象の判定基準
  - 安全な削除のためのドメインルール
  - バックアップ戦略（Git履歴）
- **対話**: 不明点は一問一答形式で確認

#### ステップ2: 論理設計
- **目的**: 削除手順とバージョン管理検証の設計
- **成果物**: `docs/versions/v1.0.0/design-artifacts/logical-designs/unit5_logical_design.md`
- **アプローチ**:
  - 削除手順の設計（安全性確保）
  - バージョン管理機能の検証項目
  - ロールバック戦略
  - エラーハンドリング
- **対話**: 不明点は一問一答形式で確認

#### ステップ3: 設計レビュー
- **目的**: ユーザーに設計内容を提示し、承認を得る
- **重要**: 承認なしで削除作業に進まない

### Phase 2: 実装（設計を参照して実行）

#### ステップ4: 削除前確認
- **目的**: 削除対象の最終確認とバックアップ検証
- **作業内容**:
  - Git status で未コミット変更の確認
  - 削除対象ファイルの内容確認（移行済みか検証）
  - Git履歴で削除対象がコミットされているか確認
- **セキュリティ考慮**:
  - 削除前に必ずGitでバージョン管理されていることを確認
  - 誤削除防止のための二重確認

#### ステップ5: 旧構造の削除
- **目的**: 旧構造のファイル・ディレクトリを削除
- **作業内容**:
  - `docs/v1.0.0-intent.md` 削除
  - `docs/example/` 削除
  - Git status で削除が正しく反映されているか確認

#### ステップ6: バージョン管理機能の検証
- **目的**: 新構造でバージョン管理が正しく機能することを確認
- **テスト項目**:
  - `docs/aidlc/version.txt` の内容確認（v1.0.0）
  - 新しい構造でのファイル参照が正しいか確認
  - 各フェーズプロンプトがcommon.mdとversion.txtを正しく参照できるか確認

#### ステップ7: 統合とレビュー
- **目的**: 削除後の整合性確認とレビュー
- **作業内容**:
  - ディレクトリ構造の確認（`tree` または `ls -R`）
  - README.mdが正しい構造を説明しているか確認
  - リンク切れがないか確認
  - コードレビュー
- **成果物**: `docs/versions/v1.0.0/construction/units/unit5_implementation_record.md`

#### ステップ8: progress.md更新とコミット
- **目的**: 進捗状況を記録し、Gitコミットを作成
- **作業内容**:
  - progress.md の Unit5 状態を「完了」に変更
  - 完了日を記録
  - 次回実行可能なUnit候補を更新（全Unit完了）
  - すべての変更（削除を含む）をGitコミット

## 依存関係
- Unit1: setup-prompt.mdのリファクタリング（完了）
- Unit2: 各フェーズプロンプトのパス参照更新（完了）
- Unit3: 新しいディレクトリ構造の作成（完了）
- Unit4: README.mdの更新（完了）

## 非機能要件
- **安全性**: 削除前にGit履歴で保護されていることを確認
- **可逆性**: Git履歴から旧構造を復元可能
- **整合性**: 削除後のディレクトリ構造が設計通り
- **ドキュメント**: 削除理由と新構造への移行を記録

## 見積もり
1〜2時間

## 備考
- このUnitでv1.0.0のConstruction Phaseが完了
- 削除は慎重に行い、Gitでバージョン管理されていることを必ず確認
- `prompts/`配下は実装ファイル（v0.1.0）のため触らない
- `docs/translations/`はAI-DLC理論の翻訳文書のため保持
