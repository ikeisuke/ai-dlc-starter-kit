# v1.0.0 テスト結果

## テスト実施日
2025-11-25

## 発見された問題

### 問題1: ヒストリファイル作成と記入の順序が逆転

**症状**:
ヒストリファイル作成と最初のヒストリ記入が逆転していた

**原因**:
プロンプトの記述が不明確だった：
- `prompts/setup-prompt.md:417` に「ファイルを読み込む必要はない（テンプレートが先頭にあるため）」と記載
- この記述により、AIがファイルが存在しない状態で追記しようとして順序が逆転する可能性があった

**修正内容**:
- `prompts/setup-prompt.md:409-420` の `history.md` セクションを明確化
  - 「初回セットアップ時にhistory.mdを作成」を明記
  - 「以降の各フェーズで既存ファイルに追記」を明記
  - 「ファイルを読み込む必要はない」の記述を削除
- `prompts/setup-prompt.md:245` の共通知識部分も同様に修正

**対応状況**:
- [x] 原因調査完了
- [x] 修正対応完了

---

### 問題2: テンプレートがJITのままでセットアップ時に作成されていない

**症状**:
テンプレートファイルがセットアップ時に作成されず、JIT（Just-In-Time）生成のままになっていた

**期待動作**:
セットアップ時に `docs/aidlc/templates/` にテンプレートファイルを作成する

**原因**:
`prompts/setup-prompt.md:433-436` で意図的にJIT生成方式を採用していた：
- MODE=setup の場合、個別のテンプレートファイルは作成しない（JIT生成するため）
- 各フェーズプロンプトで必要に応じてテンプレートを自動生成する設計

しかし、リリースノートには「テンプレートの共通化」と記載されており、期待とのギャップがあった。

**修正内容**:
- `prompts/setup-prompt.md:433-436` を修正：MODE=setup ですべてのテンプレートを作成するように変更
- 各フェーズプロンプトのJIT生成ロジックを削除：
  - `inception.md`: テンプレート確認のみ、存在しない場合はsetup-prompt.md実行を促す
  - `construction.md`: 同上
  - `operations.md`: 同上
- MODE=template 機能は維持（再生成または追加生成用）

**対応状況**:
- [x] 原因調査完了
- [x] 修正対応完了

---

## その他の問題
（追加予定）
