# バックログ登録ガイド

ユーザー起点でバックログを登録する際の確認フローを定義します。

## 適用範囲

**対象**:

- ユーザーが「バックログに追加して」「backlogに登録して」等の発言をした場合
- Construction Phase で作業中に発見した課題を記録する場合（ユーザー起点のみ）

**対象外（既存フローを使用）**:

- AI自動検出による気づき記録（Construction Phase の気づき記録フロー）
- workaround 実施時の自動記録

## 確認フロー

ユーザーからバックログ登録の要求があった場合、以下の確認フローを実行します。

### 基本方針

- **一問一答形式**: 質問は1つずつ提示し、回答を得てから次へ進む
- **情報が揃っている場合**: ユーザーが最初から必要な情報を提供していれば、確認のみで登録
- **曖昧な回答時**: 具体化を促す深掘り質問を行う
- **キャンセル対応**: 「やめる」「キャンセル」等の発言で登録を中止

### 必須項目（3項目）

| 項目 | 質問例 | 曖昧な回答時の深掘り |
|------|--------|---------------------|
| 概要 | 「概要を教えてください（何をしたいか、1-2文で）」 | 「具体的には何を追加/変更/修正したいですか？」 |
| 背景 | 「背景を教えてください（なぜ必要か、発見した経緯）」 | 「どのような作業中に気づきましたか？」「どんな問題が起きていますか？」 |
| 期待する結果 | 「期待する結果を教えてください（完了時にどうなっていれば良いか）」 | 「どうなっていれば『できた』と判断できますか？」 |

### 任意項目（1項目）

| 項目 | 質問例 | 選択肢 |
|------|--------|--------|
| 優先度 | 「優先度を選択してください」 | Medium: 次のサイクルで対応（デフォルト） / High: すぐに対応が必要 / Low: 余裕があれば対応 |

## 出力テンプレート

確認フロー完了後、以下のフォーマットでバックログを登録します。

**注**: 発見日/発見フェーズ/発見サイクルはAIが自動補完（現在の日付/フェーズ/サイクルを使用）

```markdown
# [概要]

- **発見日**: YYYY-MM-DD
- **発見フェーズ**: [Inception / Construction / Operations]
- **発見サイクル**: vX.X.X
- **優先度**: [High / Medium / Low]

## 背景

[背景の回答]

## 期待する結果

[期待する結果の回答]
```

### 保存先別の対応

| モード | 保存方法 |
|--------|----------|
| Issue（issue / issue-only） | タイトル: `[Backlog] [概要]`、本文: 上記フォーマット |
| Git（git / git-only） | `docs/cycles/backlog/{type}-{slug}.md` に上記フォーマットで保存 |

## フロー例

```text
【バックログ登録】
バックログに登録します。3つの質問に順番にお答えください。

まず、概要を教えてください（何をしたいか、1-2文で）
```

→ ユーザーの回答を受けて次の質問へ

```text
ありがとうございます。次に、背景を教えてください（なぜ必要か、発見した経緯）
```

→ 以降同様に進行
