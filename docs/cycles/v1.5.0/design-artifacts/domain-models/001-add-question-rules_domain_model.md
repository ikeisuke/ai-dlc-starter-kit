# ドメインモデル: 予想禁止・一問一答質問ルール追加

## 概要

AIが予想で方針を決定せず、不明点を「ハイブリッド方式」の一問一答形式で質問するルールを定義する。このルールは全フェーズ（Inception, Construction, Operations）およびセットアップに適用される。

**重要**: このドメインモデル設計では**コードは書かず**、構造と責務の定義のみを行います。

## 概念モデル

### 質問フロー（QuestionFlow）

AIが不明点を解決するための対話フロー。

- **構成要素**:
  - 質問リスト（QuestionList）: 現時点で把握している質問の一覧
  - 個別質問（Question）: 1つの質問とその回答
  - 追加質問（FollowUpQuestion）: 回答に基づいて発生する追加の質問

- **振る舞い**:
  - 質問リストの提示: 最初に質問の数とカテゴリ/概要を提示
  - 順次質問: 1問ずつ詳細を質問し、回答を待つ
  - 追加質問の挿入: 回答に基づく追加質問を自然に挿入

### 質問リスト（QuestionList）

- **属性**:
  - 質問数: Integer - 現時点で把握している質問の総数
  - 質問概要: List<String> - 各質問のカテゴリまたは概要（1行程度）

- **表現形式**:
  ```
  質問が{N}点あります：
  1. {質問1の概要}
  2. {質問2の概要}
  ...

  まず1点目から確認させてください。
  ```

### 個別質問（Question）

- **属性**:
  - 質問番号: Integer - 質問リスト内での順番
  - 質問内容: String - 詳細な質問文
  - 回答: String - ユーザーからの回答
  - 回答済み: Boolean - 回答を受け取ったかどうか

- **制約**:
  - 1問ずつ質問し、回答を待つ
  - 回答を得てから次の質問に進む

### 追加質問（FollowUpQuestion）

- **属性**:
  - 発生理由: String - なぜ追加質問が必要になったか
  - 質問内容: String - 詳細な質問文

- **表現形式**:
  ```
  追加で1点確認させてください。
  {質問内容}
  ```

- **制約**:
  - 追加質問であることを明示する
  - 自然な対話の一部として許容される

## 予想禁止ルール（NoAssumptionRule）

AIが独自の判断で方針を決定することを禁止するルール。

- **責務**:
  - 不明な点がある場合は必ず質問する
  - 推測や仮定で進めない
  - ユーザーの意図を確認してから行動する

- **適用トリガー**:
  - 要件が曖昧な場合
  - 複数の解釈が可能な場合
  - 技術的な選択肢がある場合
  - 前提条件が不明確な場合

## 適用範囲

| 対象 | ファイル | 適用内容 |
|------|---------|---------|
| Inception Phase | `inception.md`, `lite/inception.md` | 要件定義時の質問ルール |
| Construction Phase | `construction.md`, `lite/construction.md` | 設計・実装時の質問ルール |
| Operations Phase | `operations.md`, `lite/operations.md` | 運用時の質問ルール |
| セットアップ | `setup-prompt.md`, `setup-init.md`, `setup-cycle.md` | 初期設定時の質問ルール |

## ユビキタス言語

- **ハイブリッド方式**: 質問リスト全体を先に提示し、1問ずつ順番に詳細を質問する方式
- **追加質問**: 回答に基づいて新たに発生した質問。元の質問リストに含まれていなかったもの
- **予想禁止**: AIが独自の推測で方針を決定せず、不明点は必ずユーザーに確認するルール
- **一問一答**: 1つの質問を提示し、回答を得てから次に進む対話形式

## 不明点と質問（設計中に記録）

[Question] 質問フローはどちらの形式にしますか？
[Answer] ハイブリッド方式を採用。最初に質問の数と概要を提示し、1問ずつ順番に詳細を質問する。

[Question] 途中で追加質問が発生するケースへの対応は？
[Answer] 追加質問は自然な対話として許容。「追加で確認させてください」と明示すればOK。

---

作成日: 2025-12-20
