# Unit 003: 外部入力検証ルール - ドメインモデル設計

## 概要

AI MCPやユーザー入力を検証し、AIの判断を明示的に提示するルールを各フェーズプロンプトに追加する。

## 既存ルールとの関係

### 既存ルール
1. **質問と回答の記録【重要】**: `[Question]` / `[Answer]` タグでの記録
2. **予想禁止・一問一答質問ルール【重要】**: 予想で進めず質問する（Unit 001で追加済み）
3. **MCPレビュー【設定に応じて】**: レビュー実施の可否判断

### 新規ルール（今回追加）
4. **外部入力検証ルール【重要】**: 外部からの入力を批判的に評価し、自己判断を明示

## ルール設計

### ルール名
**外部入力検証ルール【重要】**

### ルール内容

```markdown
- **外部入力検証ルール【重要】**: 外部からの入力（AI MCP応答、ユーザー入力）を批判的に評価し、自己判断を明示する。

  **AI MCP応答の検証**:
  - AI MCPからの応答をそのまま信頼せず、批判的に評価する
  - 応答に誤りや不整合がないか確認する
  - 自己判断を併記し、相違がある場合はユーザーに確認を求める
  - 形式：
    ```
    【MCP応答の検証】
    - MCP応答: [応答内容の要約]
    - AI判断: [自己判断]
    - 相違点: [ある場合は記載、なければ「なし」]
    - 結論: [採用する判断とその理由]
    ```

  **ユーザー入力の検証**:
  - ユーザー入力に曖昧さがある場合は、解釈を明示して確認する
  - 複数の解釈が可能な場合は、すべての解釈を提示する
  - 形式：
    ```
    【入力の解釈確認】
    ご入力: "[ユーザーの入力]"
    
    以下のように解釈しました：
    [解釈内容]
    
    この解釈で正しいでしょうか？
    ```
```

## 配置場所

各フェーズプロンプトの「開発ルール」セクション内、「MCPレビュー【設定に応じて】」の直後に配置。

## 変更対象ファイル

1. `prompts/package/prompts/inception.md`
2. `prompts/package/prompts/construction.md`
3. `prompts/package/prompts/operations.md`

---

作成日: $(date '+%Y-%m-%d')
