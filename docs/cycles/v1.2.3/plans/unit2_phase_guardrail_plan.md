# Unit 2: フェーズ遷移ガードレール強化 - 実装計画

## 概要

各フェーズで禁止されるアクションを明示し、AIがフェーズを無視して先走り実装しないようにする。

## 対象ファイルと変更内容

### 1. prompts/setup-cycle.md
- 完了メッセージに「Inception Phaseで計画を立ててから実装」の警告を追加

### 2. docs/aidlc/prompts/inception.md
- 「フェーズの責務【重要】」セクションを追加
  - このフェーズで行うこと
  - このフェーズで行わないこと（禁止）

### 3. docs/aidlc/prompts/construction.md
- Phase 1 の禁止事項を強調
- 「最初に必ず実行すること」にバックログ確認ステップを追加（関連気づき対応）

### 4. prompts/package/prompts/inception.md
- docs/aidlc/prompts/inception.md と同様の変更

### 5. prompts/package/prompts/construction.md
- docs/aidlc/prompts/construction.md と同様の変更

## バックログからの関連気づき対応

### 気づき1: Unit開始前のバックログ確認がステップ化されていない
- **対応**: construction.md の「最初に必ず実行すること」に「バックログ確認」ステップを追加

### 気づき2: コンテキストリセットのタイミング見直し
- **判断**: スコープ外として次サイクルに先送り
- **理由**: コンテキストリセットの見直しは広範な変更が必要であり、Unit 2 の「フェーズ遷移ガードレール」とは別の課題

## 実装手順

### Phase 1: 設計
1. ドメインモデル設計（プロンプト構造の分析）
2. 論理設計（変更箇所の特定と影響範囲）
3. 設計レビュー・承認

### Phase 2: 実装
4. コード生成（各ファイルの修正）
5. 統合とレビュー（ビルド・テスト）

## 受け入れ基準

- [ ] setup-cycle.mdの完了メッセージに警告が追加されている
- [ ] inception.mdに「フェーズの責務【重要】」セクションが追加されている
- [ ] construction.mdでPhase 1の禁止事項が強調されている
- [ ] construction.mdにバックログ確認ステップが追加されている
- [ ] パッケージ版にも同様の変更が反映されている

## 見積もり

小（プロンプト修正のみ）

## 備考

- 本Unitはプロンプトファイルの修正のみであり、実装コードの変更はない
- テストは手動確認（修正後のプロンプトを読み、禁止事項が明確に記載されているか確認）
