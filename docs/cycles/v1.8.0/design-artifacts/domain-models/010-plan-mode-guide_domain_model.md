# ドメインモデル: プランモード活用ガイド

## 概要

> **対象ツール**: Claude Code専用
>
> このガイドはClaude CodeのEnterPlanMode機能を前提としています。
> 他のAIエージェントツール（Cursor、Codex CLI等）では動作しません。

Claude Codeのプランモード機能をAI-DLCワークフローで活用するためのガイドドキュメント。

## ドメイン概念

### プランモード（Plan Mode）

Claude Codeの機能で、実装前に計画を立案・レビューするためのモード。

**属性**:

- 目的: 実装前の設計レビューと手戻り削減
- トリガー: EnterPlanMode ツール
- 終了: ExitPlanMode ツール
- 制約: プランモード中は編集系ツール（Edit, Write等）が使用不可

### 計画の記録

プランモード中は会話内で計画を策定する。ExitPlanMode後、必要に応じて設計ドキュメントとして記録する。

**フロー**:

1. EnterPlanMode（探索・計画策定）
2. ユーザー承認
3. ExitPlanMode
4. 必要に応じて設計ドキュメント作成（Phase 1成果物として）

### AI-DLCとの関係

| AI-DLC既存フロー | プランモードの位置づけ |
|------------------|------------------------|
| Phase 1（設計） | 設計前の「探索フェーズ」として前置 |
| 設計レビュー承認 | プランモード承認 ≠ AI-DLC設計承認（両方必要） |

### 利用条件

**推奨ケース**（v1.7.2検討結果に基づく）:

- 複雑なUnit実装前のアプローチ検討
- 既存コードベースの理解が必要な場合
- 複数の実装アプローチから選択が必要な場合

**非推奨ケース**:

- 指示が明確で迷いがない場合
- 軽微な修正（タイポ、一行修正等）
- 純粋なリサーチタスク（Task/Exploreエージェントを使用）

## ガイドの構成

```text
plan-mode.md
├── 1. プランモードとは
│   ├── 概要
│   ├── メリット
│   └── スコープ（Claude Code専用）
├── 2. 使い方
│   ├── EnterPlanMode/ExitPlanMode
│   └── 利用可能なツール
├── 3. AI-DLCでの活用シーン
│   ├── 推奨ケース
│   ├── 非推奨ケース
│   └── Phase 1との関係
└── 4. 注意事項
    ├── 編集制約
    ├── 承認フローとの関係
    └── Task/Exploreとの使い分け
```

## 関連ガイド

- `subagent-usage.md`: 対象ツールスコープ宣言の参考
- `jj-support.md`: 実験的機能の注意書きの参考
