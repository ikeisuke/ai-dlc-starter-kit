# Intent（開発意図）

## プロジェクト名
AI-DLC v1.8.0 - スクリプト化基盤構築 + UX改善

## 開発の目的
プロンプト内の複合コマンド（`&&`, `||`, `$(...)` 等）をスクリプトに移行し、AIエージェントの許可リスト運用を改善する。併せて、開発者体験（UX）を向上させる改善を実施する。

### 背景
- シェル演算子や変数代入を含むコマンドは、許可リストに登録しても毎回承認が必要
- プロンプト内のコードが複雑化し、可読性・保守性が低下
- 設定値取得、履歴記録などの共通処理が各プロンプトに散在

## ターゲットユーザー
- AI-DLCスターターキットを使用する開発者
- Claude Code、Cursor、Cline等のAIエージェントを使用する開発者

## ビジネス価値
1. **許可リスト運用の改善**: スクリプト化により承認プロンプトを削減
2. **保守性向上**: 共通処理の一元化でプロンプトの重複削減
3. **開発効率向上**: 簡略指示追加、フェーズ間連携改善でスムーズな開発フロー
4. **互換性向上**: markdownlint等のツール依存を設定可能にし、他プロジェクトでの利用を容易に

## 成功基準
- スクリプト4本（check-deps, get-config, write-history, detect-cycle）の実装完了
- 全プロンプト（setup, inception, construction, operations）でのスクリプト呼び出し統合
- 9件のIssue（#34, #69, #48, #39, #67, #47, #37, #59, #45準備）のクローズ
- 既存プロジェクトでのアップグレード動作確認

## 期限とマイルストーン
- Unit 001-005（スクリプト化基盤）: 優先実装
- Unit 006-008（パッチ）: 並行実装可能
- Unit 009-012（UX改善）: スクリプト基盤完了後
- Unit 013（分析・準備）: 最後に実施

## 制約事項
- **メタ開発**: `docs/aidlc/` は直接編集禁止。`prompts/package/` を編集し、Operations Phaseでrsync
- **後方互換性**: スクリプト未同期の既存プロジェクトでもフォールバック動作必須
- **dasel非依存**: dasel未インストール環境でもAI直接読み取りで動作必須

## 対象Issue
| # | タイトル | 種別 |
|---|----------|------|
| 34 | 複合コマンド廃止・スクリプト化 | 基盤 |
| 69 | 簡略指示「AIDLCアップデート」追加 | パッチ |
| 48 | フィードバック手段追加 | パッチ |
| 39 | プランモード活用ガイド | パッチ |
| 67 | markdownlint設定対応 | 改善 |
| 47 | Unit完了条件明確化 | 改善 |
| 37 | フェーズ間連携 | 改善 |
| 59 | worktreeサブディレクトリ | 改善 |
| 45 | プロンプト最適化（準備のみ） | 準備 |

## 不明点と質問（Inception Phase中に記録）

[Question] スクリプト配置先は `prompts/package/bin/` でrsync運用でよいか？
[Answer] はい、スターターキットの他ファイルと同じ運用で進める

[Question] #70（AIレビューSkills変更）は今回対応するか？
[Answer] 見送り。次サイクルで検討
