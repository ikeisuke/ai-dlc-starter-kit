# バックログ（サイクル横断）

このファイルは、サイクルを跨いで管理するタスクを記録します。

> 参照: [完了済み項目](./backlog-completed.md)

---

## 延期タスク

### Unit 5: Issue駆動統合設計
- **元サイクル**: v1.0.1
- **延期日**: 2025-11-28
- **延期理由**: AI-DLCがもっと成熟してから導入した方が効果的と判断
- **概要**: GitHub Issuesを活用してAI-DLCサイクルの進捗を可視化・管理する仕組みの設計
- **見積もり**: 10.5時間
- **含まれる内容**:
  - Issue駆動開発統合の検討と設計
  - Issueテンプレート作成（Epic用、Unit用、バグ用、タスク用）
  - Issue駆動フロー定義
- **部分成果物**: `docs/cycles/v1.0.1/design-artifacts/domain-models/unit5_issue_driven_domain_model.md`（ドメインモデル設計途中）
- **再開条件**: AI-DLCの運用が安定し、Issue連携の必要性が明確になった時点

---

## 技術的負債・修正タスク

### ホームディレクトリにユーザー共通設定を配置可能にする
- **発見日**: 2025-12-06
- **発見サイクル**: v1.2.1 Construction Phase
- **概要**: `~/.aidlc/` などにユーザー固有の共通設定を配置できるようにする
- **詳細**:
  - 現状: 設定はプロジェクトごとに `docs/aidlc/` 配下に配置
  - 要望: 複数プロジェクトで共通して使いたい個人設定（命名規則、コーディングスタイル等）をホームディレクトリに配置
  - 想定パス: `~/.aidlc/config.toml` または `~/.aidlc/additional-rules.md`
  - 読み込み優先順位: ホーム設定 → プロジェクト設定（プロジェクト設定で上書き可能）
- **期待効果**: 複数プロジェクトでの設定の一貫性、セットアップ時間の短縮
- **優先度**: 中

### セットアップ時のファイルコピー判定にハッシュ値を使用
- **発見日**: 2025-12-06
- **発見サイクル**: v1.2.1 Construction Phase
- **概要**: ファイルコピー時にSHA1などのハッシュ値で比較し、変更有無を判定する
- **詳細**:
  - 現状: ファイルコピー時の変更判定方法が明確でない
  - 改善案: コピー元とコピー先のファイルのハッシュ値を比較し、一致していればスキップ、異なれば更新を提案
  - 実装方法: `shasum` または `sha1sum` コマンドでハッシュ値を取得して比較
- **期待効果**: 不要なコピーを避け、意図しない上書きを防止
- **優先度**: 中

---

## 次サイクルで検討するタスク

### v1.0.1 サイクル完了時のフィードバック（2025-11-30）

#### 良かった点
- ファイル分離による見通しの向上（Unit 8: セットアップファイル最適化の成果）
- Inception → Construction → Operations の基本フローは良好

#### 改善点・次サイクルへの課題

| 優先度 | 改善項目 | 詳細 |
|--------|----------|------|
| ~~高~~ | ~~Operations Phase再利用性~~ | ~~CI/CD等は一度構築したらサイクル横断で維持する仕組みが必要~~ **→ v1.1.0で対応済み**（`docs/aidlc/operations/` ディレクトリ導入） |
| ~~高~~ | ~~軽量サイクル（Lite版）~~ | ~~軽いバグ修正向けの簡略フローを実装~~ **→ v1.1.0で対応済み**（`docs/aidlc/prompts/lite/` 導入） |
| ~~中~~ | ~~ブランチ確認機能~~ | ~~セットアップ時にサイクル名がブランチに含まれていない場合、ブランチ切り替えを提案する~~ **→ v1.1.0で対応済み**（`setup-prompt.md` に実装） |
| 低 | Issue駆動統合 | プラグイン化または将来サイクルで検討（ベース機能はシンプルに保つ） |

### v1.0.1 Operations Phase からの検討事項

#### CI/CD 構築
- **検討理由**: v1.0.1 では「手動運用で十分」と判断したが、将来的に規模が拡大した場合に検討
- **想定内容**: Markdown リンター、テンプレート整合性チェック、PR 時の自動レビュー
- **追加方針**: 一度構築したらサイクル横断で再利用できる仕組みとして設計

#### 監視・分析
- **検討理由**: v1.0.1 では「ドキュメントプロジェクトには不要」と判断
- **想定内容**: GitHub Insights によるトラフィック分析、利用状況のトラッキング

---

## 低優先度タスク

### git worktree を活用したワークフローの提案
- **発見日**: 2025-12-08
- **発見サイクル**: v1.2.3
- **概要**: git worktree を使って複数サイクルを並行作業できるようにする提案
- **詳細**: セットアップ時に worktree の使用を提案、ディレクトリ構成を案内
- **優先度**: 低

### 全ファイルから「最終更新」セクションを廃止する検討
- **発見日**: 2025-12-10
- **発見サイクル**: v1.3.0 Construction Phase
- **概要**: 「最終更新」セクションはGit履歴で代替可能であり、手動メンテナンスのコストが高い
- **詳細**:
  - Gitの履歴で最終更新者・日時は追跡可能
  - 手動更新が必要なメタ情報は忘れやすくメンテナンスコストが高い
  - heredocで追記する際にファイル構造が崩れる原因になる
- **対応案**: backlog.md以外のファイル（history.md等）からも「最終更新」セクションを廃止
- **優先度**: 低

### history.mdの複数人開発時コンフリクト対策
- **発見日**: 2025-12-10
- **発見サイクル**: v1.3.0 Operations Phase
- **概要**: history.mdもheredocで追記する形式のため、複数人が同時に作業するとコンフリクトする
- **詳細**:
  - progress.mdはUnit定義ファイルに実装状態を追加する方式で解決済み
  - history.mdも同様の問題を抱えている
  - 対応案: Git履歴で代替する、ファイル分割する、等
- **優先度**: 低（本質ではない）

### アップグレード時に変更内容の要約を表示する
- **発見日**: 2025-12-10
- **発見サイクル**: v1.3.0 Operations Phase
- **概要**: アップグレード時にファイル名だけでなく、変更内容の要約も表示すべき
- **詳細**:
  - 現状: 削除されるファイル名のみチェック
  - 改善案: 追加・更新・削除されるファイルと、その内容変更の要約をユーザーに表示
  - 例: 「construction.md: 気づき記録フローを追加」「unit_definition_template.md: 実装状態セクションを追加」等
- **優先度**: 低

### サイクルバージョン提案ロジックの改善
- **発見日**: 2025-12-10
- **発見サイクル**: v1.3.0 Operations Phase
- **概要**: サイクルバージョンの提案ロジックに2点の問題がある
- **詳細**:
  1. AI-DLC初回でなければ `docs/cycles/` 内の既存サイクルを見て次バージョンを提案すべき（package.json等を見るのは初回のみ）
  2. 検出したバージョンをそのまま提案するのではなく、1つインクリメントして提案すべき（例: 1.0.2 → v1.0.3 または v1.1.0）
- **優先度**: 中

### Operations Phaseでアプリケーションバージョン更新を確認する
- **発見日**: 2025-12-10
- **発見サイクル**: v1.3.0 Operations Phase
- **概要**: パッケージやアプリのリポジトリでは、Operations Phaseで対象バージョンに更新されているか確認すべき
- **詳細**:
  - package.json、pyproject.toml、Cargo.toml、Info.plist等のバージョンがサイクルバージョンと一致しているか確認
  - 具体的な確認手順はリポジトリごとに異なるため、`docs/cycles/operations.md`（運用引き継ぎ情報）で定義する
  - プロンプト側（prompts配下のoperations.md）のデプロイ準備ステップに確認項目として追加
- **優先度**: 中

### 別のAI MCPが設定されている場合にレビュー活用を提案する
- **発見日**: 2025-12-11
- **発見サイクル**: v1.3.0 セットアップ時
- **概要**: AI MCPサーバー（例: Codex MCP）が設定されている場合、各フェーズのステップでレビューでの活用を提案する
- **詳細**:
  - MCPサーバーの設定有無を検出し、別のAIエージェントが利用可能な場合に提案
  - 提案タイミング例:
    - Inception Phase: Intentレビュー、ユーザーストーリーレビュー、Unit定義レビュー
    - Construction Phase: 設計レビュー、コードレビュー、テストレビュー
    - Operations Phase: デプロイ計画レビュー、運用ドキュメントレビュー
  - 提案文例: 「別のAIエージェント（Codex MCP等）が利用可能です。この成果物のレビューに活用しますか？」
- **期待効果**: 複数AIによるクロスレビューで品質向上、見落とし防止
- **優先度**: 中


### コミットハッシュ記録に関する注意事項の追加
- **発見日**: 2025-12-11
- **発見サイクル**: v1.3.1 Inception Phase
- **概要**: Unit完了時のコミットハッシュ記録後に --amend や rebase すると記録が無効になる
- **詳細**:
  - Unit完了時に「関連コミット」としてコミットハッシュをUnit定義ファイルに記録する運用がある
  - しかし、記録後に `git commit --amend` や `git rebase` でコミットをまとめると、ハッシュが変わってしまい、記録した値が無効になる
- **対応案**:
  1. テンプレートまたはルールに注意書きを追加
  2. 運用ルールの明確化: 「コミットハッシュの記録は任意です」
- **優先度**: 低

### Operations Phase「完了時の必須作業」の構造改善
- **発見日**: 2025-12-12
- **発見サイクル**: v1.3.1 Operations Phase
- **概要**: 「完了時の必須作業」に多くの作業が詰め込まれており、構造が不明確
- **詳細**:
  - 現状: README更新、履歴記録、バックログ整理、メタ開発作業、コミット、PR作成が「完了時の必須作業」に含まれる
  - 問題: 作業量が多く、「必須作業」という曖昧な括りで分かりにくい
  - メタ開発特有の作業は一般プロジェクトには不要で混乱を招く
- **対応案**:
  1. ステップ6（リリース準備）として独立させる
  2. operations.md（運用引き継ぎ）側にプロジェクト固有の完了作業を定義
  3. バックログ整理はステップ5に統合
- **優先度**: 中

### PRマージ後のブランチ削除をオペレーションルールに追加
- **発見日**: 2025-12-12
- **発見サイクル**: v1.3.1 Operations Phase
- **概要**: PRマージ後にマージ済みブランチを削除するルールを明確化する
- **詳細**:
  - 現状: operations.md の「PRマージ後の手順」でブランチ削除は「任意」となっている
  - 改善: ブランチ削除を標準手順として明記し、リポジトリの整理を促進
- **対応案**: operations.md または prompts/package/prompts/operations.md の「PRマージ後の手順」を更新
- **優先度**: 低

### 作業中の割り込み対応ルールの明確化
- **発見日**: 2025-12-11
- **発見サイクル**: v1.3.1 Inception Phase
- **概要**: 作業中にユーザーから追加要望があった場合、適切に分類して対応すべき
- **詳細**:
  - 現状: AIが割り込み要望に対して即時実装に寄りがち
  - 問題: 全ての要望を即時実装すると計画が崩れる
  - 要望の分類:
    1. 関係ない案件 → バックログに記録
    2. 関係あるけど今じゃない案件 → バックログに記録
    3. 関係あるのでUnitには追加するけど今すぐ実行しない案件 → Unit定義に追加
    4. 関係あるし前提なのですぐにやる案件 → 即時実装
- **対応案**: Construction Phaseのプロンプトに割り込み対応フローを追加
- **優先度**: 中

### セットアップ時にGitHub Issueもチェックする機能を追加
- **発見日**: 2025-12-13
- **発見サイクル**: v1.3.1 アップグレード時
- **概要**: Dependabot PRチェックと同様に、GitHub Issueもチェックする機能を追加する
- **詳細**:
  - 現状: セットアップ時にDependabot PRの確認機能がある
  - 改善: 同様にオープンなIssueも確認し、次サイクルで対応すべき項目を把握できるようにする
  - 確認内容: オープンなIssueの一覧、ラベル、優先度等
- **優先度**: 中

### Operations Phaseアップグレード処理でバージョン番号が更新されない問題の確認
- **発見日**: 2025-12-13
- **発見サイクル**: v1.3.1 アップグレード時
- **概要**: Operations Phaseのアップグレード処理がバージョン番号の更新を行っていない可能性がある
- **詳細**:
  - 現状: アップグレード時にaidlc.tomlのstarter_kit_versionは更新されるが、他のバージョン更新が漏れている可能性
  - 確認すべき点:
    1. Operations Phaseのアップグレード処理の実際の動作
    2. 更新されるべきバージョン番号の一覧
    3. setup-init.mdのアップグレードモードの処理フロー
- **優先度**: 中
