# バックログ（サイクル横断）

このファイルは、サイクルを跨いで管理するタスクを記録します。

---

## 延期タスク

### Unit 5: Issue駆動統合設計
- **元サイクル**: v1.0.1
- **延期日**: 2025-11-28
- **延期理由**: AI-DLCがもっと成熟してから導入した方が効果的と判断
- **概要**: GitHub Issuesを活用してAI-DLCサイクルの進捗を可視化・管理する仕組みの設計
- **見積もり**: 10.5時間
- **含まれる内容**:
  - Issue駆動開発統合の検討と設計
  - Issueテンプレート作成（Epic用、Unit用、バグ用、タスク用）
  - Issue駆動フロー定義
- **部分成果物**: `docs/cycles/v1.0.1/design-artifacts/domain-models/unit5_issue_driven_domain_model.md`（ドメインモデル設計途中）
- **再開条件**: AI-DLCの運用が安定し、Issue連携の必要性が明確になった時点

---

## 技術的負債・修正タスク

### construction.md のパス参照不整合
- **発見日**: 2025-11-30
- **発見サイクル**: v1.1.0 Construction Phase
- **概要**: construction.md（または読み込み側の想定）でUnit定義ファイルのパスが実際の構造と異なる
- **詳細**:
  - 想定パス: `docs/cycles/{version}/units/`
  - 実際のパス: `docs/cycles/{version}/story-artifacts/units/`
- **影響**: AIがUnit定義を最初に見つけられず、Globで探索が必要になる
- **修正案**: construction.md のパス参照を修正、またはInception Phaseのテンプレート出力パスを調整
- **優先度**: 低（動作に支障なし、利便性の問題）

### セットアップ処理の分離
- **発見日**: 2025-12-01
- **発見サイクル**: v1.1.0 Operations Phase
- **概要**: ベースのプロンプト/テンプレート作成と各サイクル作成は別にできそう
- **詳細**:
  - 現状: セットアップで毎回すべてを生成している
  - 改善案: 初回セットアップ（ベース生成）とサイクルセットアップを分離
- **期待効果**: セットアップ時間短縮、責務の明確化
- **優先度**: 中

### プロンプト生成方式の改善
- **発見日**: 2025-12-01
- **発見サイクル**: v1.1.0 Operations Phase
- **概要**: 出力用プロンプトは個別ファイルに出力しておいて、それをコピーしてから書き換える方がいいかも
- **詳細**:
  - 現状: セットアップファイル内にテンプレートが埋め込まれている
  - 改善案: 出力用プロンプトを個別ファイルとして用意し、変数置換のみ行う
- **期待効果**: メンテナンス性向上、差分確認が容易に
- **優先度**: 中

### プロンプトの分割・短縮化
- **発見日**: 2025-12-01
- **発見サイクル**: v1.1.0 Operations Phase
- **概要**: AIがファイルを最後まで読まずに「なんとなく」で進める問題への対策
- **背景**:
  - 大きなプロンプトファイルを最初の方だけ読んで進めてしまう
  - Claude Code以外（Kiro等）でも同様の問題が発生
- **改善案**:
  1. プロンプトを複数の小さいファイルに分割（init / flow / complete 等）
  2. 読み込み確認を入れる（最後に書いてある内容を回答させる）
  3. ステップごとに必要最小限の情報だけを渡す
- **期待効果**: AIが確実にプロンプトを読むようになる、異なるAIツールでも安定動作
- **優先度**: 高

### マージ後のタグ付け自動化
- **発見日**: 2025-12-02
- **発見サイクル**: v1.1.0 Operations Phase
- **概要**: mainマージ後にversion.txtを読んでタグを自動作成するGitHub Actionsを導入
- **背景**:
  - Operations Phaseの時点ではまだマージされていないのでタグ付けのタイミングが合わない
  - 手動でのタグ付けはサイクル外の作業になり忘れやすい
- **改善案**:
  - GitHub Actionsでmainマージ時にversion.txtを読んでタグ作成
- **期待効果**: タグ付け忘れ防止、リリースフローの自動化
- **優先度**: 中

### 変数の具体例を削除し変数のまま残す（セットアップテンプレート側の対応）
- **発見日**: 2025-12-02
- **発見サイクル**: v1.1.0 Operations Phase
- **概要**: プロンプト内の変数に具体例（v1.0.1等）があるとAIがそれに引っ張られる
- **問題点**:
  - `{{CYCLE}}` の説明に `v1.0.1` と具体例があると、AIがそれをデフォルト値と解釈する
  - 生成されたプロンプトにサイクル名がハードコードされてしまう
- **改善案**:
  - 変数は `{{CYCLE}}` のまま残す（具体例不要）
  - 変数名自体が説明になっているので例は不要
  - 生成されるプロンプトでも変数のまま保持し、実行時に解釈させる
- **対象ファイル**:
  - `prompts/setup/common.md`
  - `prompts/setup/inception.md`
  - `prompts/setup/construction.md`
  - `prompts/setup/operations.md`
- **期待効果**: サイクルごとのプロンプト再生成が不要に、AIの誤解を防止
- **優先度**: 高
- **注意**:
  - v1.2.0セットアップで `docs/aidlc/prompts/*.md` は直接編集済み（応急処置）
  - **未対応**: `prompts/setup/*.md` のテンプレート自体の修正
  - テンプレート側を修正しないと、次回セットアップ時にまた `v1.0.1` がハードコードされる

### プロンプト/テンプレートのバージョン管理
- **発見日**: 2025-12-03
- **発見サイクル**: v1.2.0 セットアップ
- **概要**: プロンプトとテンプレートが更新されたかを判断できるようにバージョンを埋め込む
- **詳細**:
  - プロンプト/テンプレートの1行目にAI-DLCツールキットのバージョンを記載
  - 例: `<!-- AI-DLC Toolkit v1.2.0 -->`
  - バージョンがなければ v1.2.0 以前と判断できる
  - セットアップ時にバージョン比較で更新要否を判断可能
- **対象ファイル**:
  - `prompts/setup/*.md`（テンプレート側）
  - 生成される `docs/aidlc/prompts/*.md`
  - 生成される `docs/aidlc/templates/*.md`
- **期待効果**: プロンプト/テンプレートの更新管理が容易に
- **優先度**: 中

---

## 次サイクルで検討するタスク

### v1.0.1 サイクル完了時のフィードバック（2025-11-30）

#### 良かった点
- ファイル分離による見通しの向上（Unit 8: セットアップファイル最適化の成果）
- Inception → Construction → Operations の基本フローは良好

#### 改善点・次サイクルへの課題

| 優先度 | 改善項目 | 詳細 |
|--------|----------|------|
| ~~高~~ | ~~Operations Phase再利用性~~ | ~~CI/CD等は一度構築したらサイクル横断で維持する仕組みが必要~~ **→ v1.1.0で対応済み**（`docs/aidlc/operations/` ディレクトリ導入） |
| ~~高~~ | ~~軽量サイクル（Lite版）~~ | ~~軽いバグ修正向けの簡略フローを実装~~ **→ v1.1.0で対応済み**（`docs/aidlc/prompts/lite/` 導入） |
| ~~中~~ | ~~ブランチ確認機能~~ | ~~セットアップ時にサイクル名がブランチに含まれていない場合、ブランチ切り替えを提案する~~ **→ v1.1.0で対応済み**（`setup-prompt.md` に実装） |
| 低 | Issue駆動統合 | プラグイン化または将来サイクルで検討（ベース機能はシンプルに保つ） |

### v1.0.1 Operations Phase からの検討事項

#### CI/CD 構築
- **検討理由**: v1.0.1 では「手動運用で十分」と判断したが、将来的に規模が拡大した場合に検討
- **想定内容**: Markdown リンター、テンプレート整合性チェック、PR 時の自動レビュー
- **追加方針**: 一度構築したらサイクル横断で再利用できる仕組みとして設計

#### 監視・分析
- **検討理由**: v1.0.1 では「ドキュメントプロジェクトには不要」と判断
- **想定内容**: GitHub Insights によるトラフィック分析、利用状況のトラッキング

---

## 完了済み延期タスク

（延期タスクが完了した場合にここに移動）

---

## 最終更新

**日時**: 2025-12-03
**更新者**: AI（v1.2.0 Inception Phase - v1.1.0対応済み項目を更新）
