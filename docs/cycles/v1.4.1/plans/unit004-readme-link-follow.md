# Unit 004: README.mdリンク辿り - 実装計画

## 概要
セットアップ時に README.md のリンク先ドキュメントも読み込むルールを追加する。

## 変更対象ファイル
- `prompts/setup-init.md`

## 実装内容

### Phase 1: 設計

#### ドメインモデル設計
このUnitはルール追加のみであり、エンティティや値オブジェクトは発生しない。
プロンプトファイルへのルール追記として設計する。

#### 論理設計
`prompts/setup-init.md` の「5.1 README.mdの読み込み」セクションに以下を追加：

1. **リンク検出ルール**
   - README.md 内の Markdown リンク `[text](path)` を検出
   - 対象: プロジェクト内部の相対パス（`./docs/...`, `docs/...`, `../...` 等）
   - 除外: 外部リンク（`http://`, `https://` で始まるURL）

2. **リンク辿りルール**
   - 検出したリンク先ファイルを読み込み
   - コンテキスト溢れ防止の制限:
     - 深さ制限: 1階層のみ（README.mdから直接参照されるファイルのみ）
     - ファイル数制限: 最大5ファイル
     - ファイルサイズ制限: 各ファイル100行まで（長い場合は冒頭のみ）

3. **優先順位**
   - `CONTRIBUTING.md`, `ARCHITECTURE.md`, `docs/` 配下のファイルを優先

### Phase 2: 実装

#### ステップ1: セクション5.1に「5.1.1 リンク先ドキュメントの読み込み」を追加

追加位置: セクション5.1の直後、セクション5.2の前

追加内容:
```markdown
### 5.1.1 リンク先ドキュメントの読み込み【任意】

README.md内のリンクから、プロジェクトの理解に役立つドキュメントを追加で読み込みます。

**対象リンクの判定**:
- 相対パス（`./`, `../`, またはパスのみ）のリンクのみ対象
- 外部リンク（`http://`, `https://`）は辿らない
- 存在しないファイルへのリンクはスキップ

**読み込み制限**（コンテキスト溢れ防止）:
- 最大5ファイルまで
- 各ファイル100行まで（超える場合は冒頭のみ）

**優先順位**:
1. CONTRIBUTING.md, ARCHITECTURE.md（ルート直下）
2. docs/ 配下の .md ファイル
3. その他の .md ファイル

**注意**: この機能はオプションです。README.mdの情報で十分な場合はスキップしてください。
```

#### ステップ2: テスト確認
- 変更が正しく適用されているか確認
- Markdownの構文が正しいか確認

## 完了基準
- [x] prompts/setup-init.md にリンク辿りルールが追加されている
- [ ] 外部リンクは辿らないことが明記されている
- [ ] コンテキスト制限（ファイル数、行数）が明記されている
- [ ] Markdown構文が正しい

## リスク・注意点
- 辿るリンクが多すぎるとコンテキスト溢れの原因になる → 制限を設ける
- 循環参照の可能性 → 深さ1階層に制限することで回避
