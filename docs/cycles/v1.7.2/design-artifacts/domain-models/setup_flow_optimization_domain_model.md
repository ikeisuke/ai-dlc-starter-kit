# ドメインモデル: セットアップフロー最適化

## 概要

セットアップ/インセプションフローのプロンプト構造を整理し、変更箇所を明確化する。

**注**: 本Unitはプロンプトの文言・順番調整が主であり、DDDフル構造（エンティティ、集約等）は適用しない。

## 変更対象の構造

### 1. setup.md の構造

```text
setup.md
├── 最初に必ず実行すること
│   ├── 0. デプロイ済みファイル確認
│   ├── 0.5. スターターキット開発リポジトリ判定
│   ├── 0.7. バックログモード確認
│   ├── 0.8. backlogラベル確認・作成
│   ├── 1. スターターキットバージョン確認
│   ├── 2. サイクルバージョンの決定
│   ├── 3. ブランチ確認
│   ├── 4. サイクル存在確認
│   ├── 5. サイクルディレクトリ作成 ← 変更対象（確認省略）
│   └── 6. 旧形式バックログ移行
└── 完了時の作業
```

**変更箇所**:

- ステップ5前に「-1. 依存コマンド確認」を新規追加
- ステップ5の確認プロンプトを削除

### 2. inception.md の構造

```text
inception.md
├── 最初に必ず実行すること
│   ├── 0. ブランチ確認
│   ├── 0.5. サイクル名の決定 ← 番号変更: 1
│   ├── 1. サイクル存在確認 ← 番号変更: 2
│   ├── 2. 追加ルール確認 ← 番号変更: 3
│   ├── 2.5. Dependabot PR確認 ← 番号変更: 4
│   ├── 2.7. GitHub Issue確認 ← 番号変更: 5
│   ├── 3. バックログ確認 ← 番号変更: 6
│   ├── 4. 進捗管理ファイル確認 ← 番号変更: 7
│   └── 5. 既存成果物の確認 ← 番号変更: 8
└── フロー
    ├── ステップ1: Intent明確化
    ├── ステップ2: 既存コード分析
    ├── ステップ3: ユーザーストーリー作成
    ├── ステップ4: Unit定義
    └── ステップ5: PRFAQ作成
```

**変更箇所**:

- 「最初に必ず実行すること」セクション内のステップ番号を連番化

## ステップ番号マッピング（ストーリー1-3）

### inception.md 番号変更対応表

| 旧番号 | 新番号 | 内容 | 見出し |
|--------|--------|------|--------|
| 0 | 0 | ブランチ確認 | `### 0. ブランチ確認【推奨】` |
| 0.5 | 1 | サイクル名の決定 | `### 0.5 サイクル名の決定【重要】` → `### 1. サイクル名の決定【重要】` |
| 1 | 2 | サイクル存在確認 | `### 1. サイクル存在確認` → `### 2. サイクル存在確認` |
| 2 | 3 | 追加ルール確認 | `### 2. 追加ルール確認` → `### 3. 追加ルール確認` |
| 2.5 | 4 | Dependabot PR確認 | `### 2.5. Dependabot PR確認` → `### 4. Dependabot PR確認` |
| 2.7 | 5 | GitHub Issue確認 | `### 2.7. GitHub Issue確認` → `### 5. GitHub Issue確認` |
| 3 | 6 | バックログ確認 | `### 3. バックログ確認` → `### 6. バックログ確認` |
| 4 | 7 | 進捗管理ファイル確認 | `### 4. 進捗管理ファイル確認【重要】` → `### 7. 進捗管理ファイル確認【重要】` |
| 5 | 8 | 既存成果物の確認 | `### 5. 既存成果物の確認` → `### 8. 既存成果物の確認` |

**注**: 「フロー」セクション内のステップ（ステップ1〜5）は番号変更の対象外。

## ユビキタス言語

- **依存コマンド**: AI-DLCが機能するために必要な外部CLIツール（gh, dasel）
- **確認プロンプト**: ユーザーに「Y/n」で承認を求める対話
- **ステップ番号**: プロンプト内の「最初に必ず実行すること」セクションの番号体系
