# Intent（開発意図）

## プロジェクト名
AI-DLC Starter Kit v1.7.2

## 開発の目的
AI-DLC開発者体験（DX）の向上とjjサポートの強化を行う。

主に以下の領域を改善する：
1. **セットアップフロー最適化**: 不要な確認の省略、依存コマンド確認
2. **jjサポート強化**: 許可リスト追加、設定テンプレート修正、ドキュメント改善
3. **バックログ管理改善**: モード対応、方針の明文化
4. **iOSプロジェクト対応強化**: ビルド番号確認手順の追加

## ターゲットユーザー
- AI-DLCを使用する開発者
- jjをgitと共存で使用する開発者

## ビジネス価値
- **開発効率向上**: 不要な確認を削減し、スムーズなセットアップを実現
- **jjサポート充実**: jjユーザーがAI-DLCをスムーズに利用可能に
- **バックログ管理の明確化**: 保存先と管理方法の明確化
- **iOSリリースの品質向上**: ビルド番号確認によるApp Store提出エラーの防止

## 成功基準

### セットアップフロー最適化
- [ ] セットアップ時のサイクルディレクトリ作成で確認ダイアログが表示されない
- [ ] 依存コマンド（gh, dasel）の事前確認がセットアップ冒頭で行われる
- [ ] ステップ番号が連番に整理されている

### jjサポート強化
- [ ] ai-agent-allowlist.md にjjコマンド（status, log, diff, bookmark, new, describe, git push等）が追加されている
- [ ] jj-support.md に「gitとjjの考え方の違い」セクションが追加されている
- [ ] setup-prompt.md のaidlc.tomlテンプレートに [rules.jj] セクションが含まれている

### バックログ管理
- [ ] AGENTS.md にバックログ管理方針（mode設定と保存先の対応表）が記載されている
- [ ] バックログ移行時にmodeに応じた適切な移行先が提案される
- [ ] aidlc.toml に `backlog.single_source` オプションが追加されている

### iOSプロジェクト対応
- [ ] Operations Phase でCURRENT_PROJECT_VERSION（ビルド番号）のインクリメント確認が行われる

### 将来検討
- [ ] プランモード活用の検討結果がドキュメント化されている（実装は次回以降）

## 完了判定
- **タイミング**: 各Unit完了時にチェックリストを確認、Operations Phase完了時に全項目を最終確認
- **責任者**: AI（実装）、ユーザー（承認）
- **検証方法**: 成功基準のチェックリストがすべてチェックされていること

## 期限とマイルストーン
AI-DLCでは期限を設定せず、サイクル単位で管理する。完了判定は上記「完了判定」セクションに従う。

## 制約事項
- `docs/aidlc/` は直接編集禁止（`prompts/package/` を編集）
- Operations Phase完了時にセットアッププロンプトでアップグレード必須
  - **タイミング**: Operations Phaseステップ6（リリース準備）の前
  - **実行方法**: `prompts/setup-prompt.md` を読み込んでアップグレード実行
  - **確認方法**: rsyncログで更新ファイルを確認
- Issue #39（プランモード活用）は検討・方針策定のみ、実装は次回以降

## 対応項目一覧

### 目的1: セットアップフロー最適化
| Issue | タイトル | 優先度 |
|-------|---------|--------|
| #35 | セットアップ/インセプション: 不要な確認の省略 | 中 |
| #36 | セットアップ改善: 依存確認・ステップ整理 | 中 |

### 目的2: jjサポート強化
| Issue | タイトル | 優先度 |
|-------|---------|--------|
| #40 | setup-prompt.md テンプレートに [rules.jj] セクションが欠落 | 中 |
| #42 | 許可リストにjjコマンドを追加 | 中 |
| #43 | jj-support.md にgitとjjの考え方の違いセクションを追加 | 中 |

### 目的3: バックログ管理改善
| Issue | タイトル | 優先度 |
|-------|---------|--------|
| #38 | バックログ: モードに応じた移行処理 | 中 |
| #41 | AGENTS.mdにバックログ管理方針を追加 | 低 |
| (ローカル) | backlog.mode片方のみ確認オプション | 低 |

### 目的4: iOSプロジェクト対応強化
| Issue | タイトル | 優先度 |
|-------|---------|--------|
| (新規) | Operations Phase バージョン確認手順の強化 | 中 |

### 目的5: 将来検討
| Issue | タイトル | 優先度 | 備考 |
|-------|---------|--------|------|
| #39 | 新機能検討: プランモード活用 | 低 | 検討のみ、実装は次回 |

## v1.8.0へ延期した項目

| Issue | タイトル | 延期理由 |
|-------|---------|----------|
| #34 | 複合コマンド廃止・許可リスト整備 | 約26箇所の大規模変更 |
| #37 | フェーズ間連携: セットアップ→インセプションの引き継ぎ | 新機能の設計が必要 |

## 不明点と質問（Inception Phase中に記録）

（現時点で不明点なし）
