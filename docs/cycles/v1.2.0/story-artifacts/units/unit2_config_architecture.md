# Unit 2: 設定アーキテクチャ設計

## 概要
設定の階層構造、ファイル形式、ライフサイクル全体での流れを定義する

## 背景
Unit 2（変数具体例削除）の設計議論を通じて、変数管理の本質的な課題が明らかになった：
- 変数には「プロジェクト固定」と「サイクル固有」の2種類がある
- 変数には「ハードな値（パス等）」と「ソフトな値（ロール等）」がある
- フェーズは設定の「消費者」であり、書き込みは行わない
- 変数置換よりAIが設定ファイルを読む形式のほうが自然

## 含まれるユーザーストーリー
- ストーリー 1.2: 変数の具体例を削除（発展形として）
- ストーリー 4.1: セットアップ処理の分離（設計部分）
- ストーリー 4.2: プロンプト生成方式の改善（設計部分）

## 責務
- 設定の2層構造を定義（プロジェクト設定 / サイクル設定）
- 各設定ファイルの形式とスキーマを定義
- 設定の継承・上書きルールを定義
- タイミング別の設定フロー（書き込み/読み込み）を定義

## 成果物
- `docs/cycles/v1.2.0/design-artifacts/architecture/config_architecture.md`
  - 設定の階層構造
  - 設定ファイルのスキーマ
  - タイミング別フロー図
  - 変数置換廃止の方針

## 境界
- 設計ドキュメントの作成のみ
- 実装（ファイル生成、プロンプト修正）は後続Unitで実施

## 依存関係

### 依存するUnit
- なし（基盤設計）

### 後続Unit
- Unit 3: セットアップ分離
- Unit 4: フェーズプロンプト改修

## 非機能要件（NFR）
- **メンテナンス性**: 設計が明確で、後続Unitの実装指針となる
- **拡張性**: 将来的な設定項目追加に対応可能な構造

## 技術的考慮事項
- 設定ファイル形式の選択肢:
  1. Markdown（AIが読みやすい、人間も読みやすい）
  2. YAML/JSON（機械的に解析可能）
  3. ハイブリッド（Markdown内にYAMLブロック）
- 設定の「ハード/ソフト」分類をどう表現するか
- 既存の変数置換方式からの移行パス

## 実装優先度
High（他のUnitの前提となる基盤設計）

## 見積もり
1時間
