# Unit 4: フェーズプロンプト改修

## 概要
変数置換方式を廃止し、フェーズプロンプトが設定ファイルを参照する方式へ移行する

## 含まれるユーザーストーリー
- ストーリー 1.2: 変数の具体例を削除（本質的解決）
- ストーリー 4.2: プロンプト生成方式の改善

## 責務
- フェーズプロンプトから `{{VAR}}` 形式の変数を削除
- 「設定ファイルを読め」という指示への置き換え
- 設定参照の標準パターンを確立
- テンプレートからの変数置換処理の簡素化

## 成果物
- `prompts/setup/inception.md`（改修版）
- `prompts/setup/construction.md`（改修版）
- `prompts/setup/operations.md`（改修版）
- `prompts/setup/common.md`（変数一覧の削除/簡素化）

## 境界
- フェーズプロンプトの改修
- プロンプトの分割・短縮化は含まない（Unit 5で実施）

## 依存関係

### 依存するUnit
- Unit 2: 設定アーキテクチャ設計（設定参照方式の定義）
- Unit 3: セットアップ分離（設定ファイルが生成される前提）

### 後続Unit
- Unit 5: プロンプト分割・短縮化

## 非機能要件（NFR）
- **メンテナンス性**: 変数置換が不要になり、テンプレート管理が簡素化
- **信頼性**: AIが設定を文脈として理解するため、置換ミスがなくなる

## 技術的考慮事項
- 残すべき変数（本当に必要なもの）:
  - パス生成に必要な最小限の値のみ
  - または完全に廃止し、設定ファイルから取得
- フェーズプロンプトの冒頭に追加する指示:
  ```
  ## 最初に読み込むファイル
  1. プロジェクト設定: docs/aidlc/config.md
  2. サイクル設定: docs/cycles/[現在のサイクル]/config.md
  ```
- 既存プロジェクトとの互換性（設定ファイルがない場合のフォールバック）

## 実装優先度
High

## 見積もり
2時間
