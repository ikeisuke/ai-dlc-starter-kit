# ドメインモデル: バージョン管理

## 概要
プロンプト/テンプレートファイルにバージョン情報を埋め込み、セットアップ時に更新の要否を判断可能にする。

**重要**: このドメインモデル設計では**コードは書かず**、構造と責務の定義のみを行います。

## 値オブジェクト（Value Object）

### ToolkitVersion
- **属性**:
  - major: Integer - メジャーバージョン
  - minor: Integer - マイナーバージョン
  - patch: Integer - パッチバージョン
- **不変性**: バージョン番号は変更不可
- **等価性**: major.minor.patch が一致すれば等価
- **表記形式**: `vX.Y.Z`（例: v1.0.1）

### VersionComment
- **属性**:
  - version: ToolkitVersion - 埋め込むバージョン
- **形式**: `<!-- AI-DLC Toolkit vX.Y.Z -->`
- **配置**: ファイルの1行目

## ドメインサービス

### VersionEmbedder
- **責務**: ファイルにバージョンコメントを埋め込む
- **操作**:
  - embedVersion(file, version) - ファイルの1行目にバージョンコメントを追加/更新

### VersionComparator
- **責務**: 2つのバージョンを比較し、更新の要否を判断
- **操作**:
  - extractVersion(file) - ファイルからバージョンコメントを抽出
  - compare(v1, v2) - バージョンを比較（newer/same/older）
  - needsUpdate(sourceVersion, targetVersion) - 更新が必要か判定

## ユビキタス言語

- **ツールキットバージョン**: AI-DLC Starter Kitのバージョン（version.txtで管理）
- **バージョンコメント**: ファイル先頭に埋め込むHTMLコメント形式のバージョン表記
- **テンプレート側**: prompts/ 配下のソースファイル
- **生成側**: docs/aidlc/ 配下の生成されたファイル
- **バージョン比較**: セットアップ時に既存ファイルと新バージョンを比較する処理

## 設計判断

### バージョンコメントの形式
HTMLコメント形式 `<!-- AI-DLC Toolkit vX.Y.Z -->` を採用。
- **理由**: Markdownレンダリング時に非表示になり、コンテンツに影響しない

### バージョンがない場合の扱い
バージョンコメントがないファイルは v1.2.0 以前（レガシー）と判断。
- **理由**: 後方互換性を保ちつつ、更新対象として認識可能

### バージョン番号の管理
`docs/aidlc/version.txt` の値を正とする。
- **現在の値**: 1.0.1
