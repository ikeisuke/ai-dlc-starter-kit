# 運用引き継ぎ情報

このファイルは、Operations Phaseで決定した運用設定・方針をサイクル横断で引き継ぐために使用します。
各サイクルのOperations Phase完了時に更新してください。

## 目的

- サイクル横断で運用設定・方針を引き継ぐ
- 毎回同じ質問をせずに済むよう、前回の設定を参照可能にする
- 運用で得た知見・注意事項を蓄積する

## 使い方

### Operations Phase開始時
1. このファイルが存在するか確認
2. 存在する場合、読み込んで前回の設定方針を確認
3. 再利用/更新/新規作成を選択

### Operations Phase完了時
1. 今回決定した設定方針をこのファイルに反映
2. 次サイクルで参照できるように更新

---

## プロジェクト概要

- **プロジェクト名**: AI-DLC Starter Kit
- **プロジェクトタイプ**: ドキュメント・テンプレートプロジェクト（general）
- **技術スタック**: Markdown、Claude Code
- **リポジトリ**: GitHub（ユーザーがクローンして利用）

---

## デプロイ方針

### デプロイ方式
- **方式**: GitHubリポジトリとして公開
- **リリース方法**: mainブランチへのマージ + タグ作成
- **バージョニング**: セマンティックバージョニング（v1.2.1形式）

### リリース手順
1. サイクルブランチで開発完了
2. `version.txt` を新バージョンに更新
3. README.mdを更新
4. Operations Phase完了コミット
5. PRを作成（`gh pr create`）
6. PRをマージ
7. GitHub Actionsが自動でタグ作成
8. 必要に応じてGitHub Releasesでリリースノート作成

### ロールバック方法
```bash
# 前のバージョンに戻す場合
git checkout v1.2.0
```

---

## CI/CD設定方針

### 現状（v1.2.1時点）
- **CI/CDツール**: GitHub Actions
- **自動タグ付け**: mainブランチへのpush時に自動でタグ作成

### 設定ファイル
- `.github/workflows/auto-tag.yml` - 自動タグ付けワークフロー

### 自動タグ付けの仕組み
1. mainブランチにpush
2. `version.txt` からバージョンを読み取り
3. 同名タグが存在しなければ `v{VERSION}` タグを作成・push

### リリースフロー
1. サイクルブランチで `version.txt` を更新（例: 1.2.1）
2. mainブランチへマージ
3. GitHub Actionsが自動で `v1.2.1` タグを作成

### PRチェック（v1.5.4で追加）
- `.github/workflows/pr-check.yml` - Markdownlintによる自動チェック
- 対象: `docs/translations/**/*.md`, `prompts/**/*.md`, `*.md`

### 将来検討事項
- テンプレート整合性チェック
- セットアップテストの自動化

---

## 監視設定

### 現状（v1.2.1時点）
- **監視ツール**: なし
- **理由**: ドキュメントプロジェクトのため不要

### 将来検討事項
- GitHub Insightsによるトラフィック分析
- 利用状況のトラッキング

---

## 既知の問題・注意点

### 運用で発覚した問題
| 問題 | ワークアラウンド | 根本対応予定 |
|------|-----------------|-------------|
| なし | - | - |

### 運用時の注意点
- メタ開発の意識: AI-DLCスターターキット自体を開発していることを常に意識
- セットアップ時の動作確認: 変更後は別ディレクトリでセットアップをテスト

---

## メタ開発特有のOperations Phase手順【重要】

このプロジェクトはメタ開発のため、Operations Phaseで以下の追加手順が必要です。

### 完了前のサイズチェック

プロンプトファイルが肥大化していないか確認します。

```bash
bin/check-size.sh
```

**警告が出た場合の対応**:
- 警告メッセージで超過しているファイルとサイズを確認
- 以下の対応を検討:
  1. ファイルを分割する（共通部分を別ファイルに外部化）
  2. 冗長な記述を削減する
  3. 閾値を調整する（`docs/aidlc.toml`の`[rules.size_check]`セクション）
- 対応後、再度チェックを実行して警告が解消されていることを確認

### ステップ5と6の間で実行する処理

**タイミング**: ステップ5（バックログ整理）完了後、ステップ6（リリース準備）開始前

1. **setup-prompt.mdを読み込んでアップグレード処理を実行**
   ```text
   prompts/setup-prompt.md を読み込んで、AI-DLC 環境をアップグレードしてください
   ```

2. **アップグレード処理の内容**
   - rsyncによる `prompts/package/` → `docs/aidlc/` 同期
   - aidlc.tomlのマイグレーション（新設定セクション追加）
   - starter_kit_versionの更新

3. **確認事項**
   - 削除対象ファイルがあれば確認・承認
   - 新設定セクションが追加されたことを確認

**理由**: `prompts/package/` で変更したプロンプト・テンプレートを `docs/aidlc/` に反映し、aidlc.tomlのマイグレーションも確実に実行するため。

---

## アップデート方法

AI-DLC Starter Kit自体のアップデートは、通常のセットアップフローを使用してください:

1. `docs/aidlc/prompts/setup-prompt.md` を読み込み
2. 「既存プロジェクト + アップグレード」を選択
3. セットアップ手順に従う

詳細は setup-prompt.md を参照してください。

---

## 更新履歴

| 日時 | サイクル | 更新内容 |
|------|---------|---------|
| 2025-12-06 | v1.2.1 | 初回作成、メタ開発特有の完了時作業を追加 |
| 2025-12-06 | v1.2.2 | setup-init参照に変更、version.txt同期手順を削除 |
| 2025-12-20 | v1.5.0 | セルフアップデート廃止、通常セットアップフローへの誘導に変更 |
| 2026-01-11 | v1.7.0 | メタ開発特有のOperations Phase手順を詳細化、PRチェック情報追加 |
| 2026-01-11 | v1.7.1 | jjサポートフラグ、Unitブランチ設定統合、AIレビュー改善 |
