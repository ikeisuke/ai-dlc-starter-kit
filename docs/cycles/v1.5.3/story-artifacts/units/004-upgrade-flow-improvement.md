# Unit: アップグレード後の動作改善

## 概要
アップグレード完了後に自動でサイクル開始フローに入る問題を修正する。ユーザーが明示的に指示するまでサイクル開始を待機するようにする。

## 含まれるユーザーストーリー
- ストーリー 1.4: アップグレード後の動作改善

## 責務
- アップグレード完了後は新しいセッションを案内
- ケースB（バージョン同じ）のみ自動進行を許可
- 完了メッセージと実装の一致

## 境界
- アップグレード処理自体の変更は行わない
- 完了後のフローのみを修正

## 依存関係

### 依存する Unit
- 002-backward-compatibility（後方互換性修正が前提）
  - 依存理由: setup.md の参照先が正しく設定されていることが前提

### 外部依存
- なし

## 非機能要件（NFR）
- **パフォーマンス**: 該当なし
- **セキュリティ**: 該当なし
- **スケーラビリティ**: 該当なし
- **可用性**: 該当なし

## 技術的考慮事項

### 現状の問題
- セクション10の完了メッセージ: 「新しいセッションで」実行するよう指示
- 実装（ケースB/C）: 自動で setup.md を読み込む
- 指示と動作が矛盾

### 修正方針
1. ケースC（アップグレード可能）でアップグレードを実行した場合:
   - 自動で setup.md を読み込まない
   - 新しいセッションでの実行を案内
2. ケースB（バージョン同じ）の場合:
   - 現状通り自動進行可

### 完了メッセージの修正
```markdown
アップグレードが完了しました。

新しいセッションで以下のコマンドを実行してサイクルを開始してください：
docs/aidlc/prompts/setup.md
```

## 対象ファイル
- prompts/setup-prompt.md (行83, 106, 804-811付近)

## 実装優先度
Medium

## 見積もり
条件分岐の修正と完了メッセージの改善

---
## 実装状態

- **状態**: 未着手
- **開始日**: -
- **完了日**: -
- **担当**: -
