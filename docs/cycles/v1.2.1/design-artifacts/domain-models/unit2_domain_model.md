# ドメインモデル: バックログ完了項目移動

## 概要
Operations Phase完了時に、該当サイクルで対応したバックログ項目をbacklog.mdからbacklog-completed.mdに移動する仕組みを定義する。

**重要**: このドメインモデル設計では**コードは書かず**、構造と責務の定義のみを行います。実装はImplementation Phase（コード生成ステップ）で行います。

## エンティティ（Entity）

### バックログ項目（BacklogItem）
- **ID**: マークダウン見出し（`### タイトル`）で一意に識別
- **属性**:
  - タイトル: String - 項目の識別名
  - 発見日: Date - 項目が発見された日付
  - 発見サイクル: String - 項目が発見されたサイクル
  - 概要: String - 項目の説明
  - 詳細: String - 具体的な内容
  - 対応案: String - 推奨される対応方法
  - 優先度: Enum(高/中/低) - 対応の優先度
- **振る舞い**:
  - 完了判定: 該当サイクルのIntent/Unitと照合して完了を判定
  - 完了移動: backlog.mdからbacklog-completed.mdに移動

## 値オブジェクト（Value Object）

### 完了情報（CompletionInfo）
- **属性**:
  - 完了サイクル: String - 対応を完了したサイクル
  - 完了日: Date - 完了した日付
  - 対応内容: String - 実際に行った対応の説明
- **不変性**: 一度記録された完了情報は変更されない
- **等価性**: 完了サイクルと完了日の組み合わせで判定

## 集約（Aggregate）

### バックログ（Backlog）
- **集約ルート**: backlog.md ファイル
- **含まれる要素**: 複数のBacklogItem
- **境界**: 未完了のバックログ項目を管理
- **不変条件**: 各項目は一意のタイトルを持つ

### 完了済みバックログ（CompletedBacklog）
- **集約ルート**: backlog-completed.md ファイル
- **含まれる要素**: 完了情報付きのBacklogItem
- **境界**: 完了済みのバックログ項目を管理
- **不変条件**: 各項目には必ずCompletionInfoが付与される

## ドメインサービス

### バックログ完了移動サービス（BacklogCompletionService）
- **責務**: サイクル完了時にバックログ項目の完了判定と移動を行う
- **操作**:
  - identifyCompletedItems(cycle) - 該当サイクルで完了した項目を特定
  - moveToCompleted(item, completionInfo) - 項目を完了済みバックログに移動
  - updateBacklog() - backlog.mdから完了項目を削除

## 完了判定基準

### 項目が完了したとみなす条件
1. 該当サイクルのIntent.mdまたはUnit定義で対応が記載されている
2. 該当サイクルのConstruction Phaseで実装が完了している
3. バックログ項目の「発見サイクル」と異なるサイクルで対応された

### 判定の実施タイミング
- Operations Phase完了時（AI-DLCサイクル完了セクション内）

## 移動時の記録フォーマット

backlog-completed.mdへの移動時に追加する情報:
- **完了サイクル**: 対応を完了したサイクル識別子
- **完了日**: 移動実施日
- **対応内容**: 具体的にどのように対応したかの説明

## ユビキタス言語

このドメインで使用する共通用語：

- **バックログ**: 未対応の技術的負債や改善項目のリスト
- **完了済みバックログ**: 対応が完了した項目の記録
- **完了移動**: バックログ項目を完了済みに移動する操作
- **完了判定**: Intent/Unitとの照合による完了確認

## 不明点と質問（設計中に記録）

（対話を通じて不明点を明確化し、このセクションに記録していく）
