# セットアップ時のworktree/ブランチ切り替えフローの改善

- **発見日**: 2026-01-05
- **発見フェーズ**: セットアップ
- **発見サイクル**: v1.5.4
- **優先度**: 中

## 概要

セットアップフロー（setup.md）において、worktreeを使用する場合とブランチ切り替えのみの場合のフローが混在しており、適切なタイミングでの操作が分かりにくい。

## 詳細

現在の問題点：
1. worktree設定が無効でも、ユーザーがworktreeを使いたい場合がある
2. worktreeを使う場合、ブランチの切り替えはworktree作成時に行われるべき
3. 現在のフローでは「ブランチ作成」を選択すると即座にcheckoutしてしまう
4. worktreeを使う場合は、mainブランチのままworktree作成コマンドを実行し、新しいworktreeに移動してから作業を開始すべき

## 対応案

1. ブランチ確認ステップで、worktree設定に関わらず3つの選択肢を提示する：
   - worktreeを使用して新しい作業ディレクトリを作成
   - ブランチを作成して切り替え
   - 現在のブランチで続行
2. worktreeを選択した場合は、ブランチ切り替えを行わずにworktree作成を実行
3. ブランチ作成を選択した場合のみ、git checkout -b を実行
