# Intent（開発意図）

## プロジェクト名
AI-DLC v1.12.0 - 設定階層化とフェーズ統合

## 開発の目的
AI-DLCの設定管理を柔軟にし、開発ワークフローを簡素化する。具体的には：
1. 設定ファイルの階層化により、チーム共有設定と個人設定を分離
2. Setup/Inception Phaseの統合によりフェーズ遷移を削減（2回→1回）
3. Codex Skillのresume機能活用で効率的なAIレビューを実現
4. Dependabot PR確認機能をオプションとして復活

## ターゲットユーザー
- AI-DLCを利用する開発者
- 複数プロジェクトでAI-DLCを使用するユーザー
- チームでAI-DLCを共有利用するチームメンバー

## ビジネス価値
- **設定の柔軟性向上**: 個人の好みに応じた設定が可能になり、チーム内でのコンフリクトを防止
- **ワークフロー効率化**: フェーズ遷移削減により新規サイクル開始が高速化
- **AIレビュー品質向上**: resume機能によりコンテキストを保持した継続的なレビューが可能

## 成功基準
- 設定ファイルの3階層読み込みで優先順位通りにマージされること
  - 検証: 同一キーが複数階層に存在する場合、上位階層（local）の値が採用されること
- Setup/Inception統合版プロンプトで新規サイクルを開始できること
  - 検証: 統合版プロンプト1回の読み込みでサイクル作成からUnit定義まで完了できること
- 旧版プロンプト（setup.md, inception.md）から統合版へ正しくリダイレクトされること
  - 検証: 旧版プロンプトを読み込むと統合版への誘導メッセージが表示されること
- Codex Skill呼び出し時にresume機能が活用されること
  - 検証: 同一Unit内の複数レビューでセッションIDが継続されること
- Dependabot PR確認がオプション設定で有効/無効を切り替えられること
  - 検証: `[inception.dependabot].enabled = true/false` で挙動が切り替わること

## 期限とマイルストーン
- サイクル期間: 標準（1-2週間を想定）
- 優先順位: #30/#27（設定階層化）→ #99（フェーズ統合）→ #146（resume機能）→ #96（Dependabot）

## 制約事項
- 後方互換性を維持すること（旧版プロンプトはリダイレクトで対応）
- 既存のaidlc.toml設定との互換性を保つこと
- Lite版も同様に統合すること（通常版との一貫性を保つ）
- 設定競合時のマージポリシー: キー単位で上位階層が優先（配列は置換、ネストは再帰的にマージ）
- 破壊的変更の禁止: 既存の設定キー名・パス構造を変更しない

## 不明点と質問（Inception Phase中に記録）

[Question] #30と#27の設定読み込み優先順位は？
[Answer] local > プロジェクト > ホームの順で読み込み（OK）

[Question] #96 Dependabot PR確認機能の対応範囲は？
[Answer] オプション機能として実装（aidlc.tomlで有効/無効を切り替え可能）

[Question] #99 統合後の後方互換性方針は？
[Answer] 旧版はリダイレクト（setup.md/inception.mdは統合版への読み込み指示のみ記載）

[Question] Lite版への影響方針は？
[Answer] Lite版も同様にSetup/Inceptionを統合し、通常版との一貫性を保つ

[Question] Codex Skillのresume機能の期待挙動は？
[Answer] Unit単位でセッションを維持し、同一Unit内の複数レビューでコンテキストを継続
