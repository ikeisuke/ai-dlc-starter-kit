# ドメインモデル: バックログ登録時の不明点確認フロー

## 概要

バックログ登録時にユーザーから必要な情報を確認し、後から見ても意味がわかるバックログ項目を作成するためのフロー定義。

**重要**: このドメインモデル設計では**コードは書かず**、構造と責務の定義のみを行います。実装はImplementation Phase（コード生成ステップ）で行います。

## 値オブジェクト（Value Object）

### BacklogItem（バックログ項目）

- **属性**:
  - 概要: 文字列 - バックログ項目の簡潔な説明（1-2文）
  - 背景: 文字列 - なぜこの項目が必要か、発見した経緯
  - 期待する結果: 文字列 - 完了時にどうなっていれば良いか
  - 優先度: 列挙型（High / Medium / Low） - 対応の優先度（任意）
- **備考**: 登録後の編集は可能（Issue/ファイルの標準機能に従う）

### ConfirmationQuestion（確認質問）

- **属性**:
  - 質問番号: 整数 - 質問の順番
  - 質問内容: 文字列 - ユーザーに問いかける内容
  - 必須/任意: 列挙型 - 必須項目か任意項目か
  - 対応フィールド: 文字列 - BacklogItemのどのフィールドに対応するか
- **不変性**: 確認フローの質問内容は固定
- **等価性**: 質問番号で識別

## ドメインサービス

### BacklogRegistrationService（バックログ登録サービス）

- **責務**: ユーザー起点のバックログ登録時に確認フローを実行し、必要な情報を収集する
- **操作**:
  - startConfirmationFlow - 確認フローを開始し、質問を順次提示
  - clarifyIfNeeded - 曖昧な回答の場合、具体化を促す
  - createBacklogItem - 収集した情報からBacklogItemを生成

## フロー定義

### 確認フロー（ConfirmationFlow）

```
1. トリガー: ユーザーがバックログ登録を要求
2. 確認質問の提示（一問一答形式）:
   Q1: 概要（必須）→ 曖昧なら深掘り
   Q2: 背景（必須）→ 曖昧なら深掘り
   Q3: 期待する結果（必須）→ 曖昧なら深掘り
   Q4: 優先度（任意）→ 不明ならMedium
3. 内容確認
4. バックログ項目の生成・登録
```

### 適用範囲

- **対象**: ユーザー起点のバックログ登録
- **対象外**: AI自動検出によるバックログ登録（気づき記録フロー）

## ユビキタス言語

このドメインで使用する共通用語：

- **バックログ項目**: 将来対応すべき課題・機能・改善点の記録
- **確認フロー**: バックログ登録前にユーザーから必要情報を収集するプロセス
- **概要**: バックログ項目の簡潔な説明（何をしたいか）
- **背景**: なぜその項目が必要か、発見した経緯
- **期待する結果**: 完了時にどうなっていれば良いか（受け入れ基準）
- **優先度**: 対応の緊急度・重要度（High / Medium / Low）

## 不明点と質問（設計中に記録）

なし（Unit定義で必須項目が明確に定義済み）
