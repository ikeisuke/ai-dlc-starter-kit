# Unit 002 計画: AIレビュー指摘先送り抑制ルール

## 概要

AIレビューで指摘が残っている場合に「あとでやる」判断を抑制するルールを追加する。品質向上のため早期に実施し、以降のUnitでこのルールを適用する。

## 変更対象ファイル

- `prompts/package/prompts/common/review-flow.md`
  - 先送り判断基準セクションの追加
  - ユーザー承認を必須とするフローの実装
  - 先送り理由の履歴記録フローの追加

## 実装計画

### Phase 1: 設計

1. **ドメインモデル設計**
   - 先送り判断基準の概念整理
   - 承認フローの構造設計

2. **論理設計**
   - 既存のAIレビューフローへの組み込み位置の特定
   - 承認フローの選択肢設計
   - 履歴記録フォーマットの設計

3. **設計レビュー**
   - ユーザー承認を得る

### Phase 2: 実装

4. **コード生成**
   - `review-flow.md` への先送り判断基準セクション追加
   - 承認フローの選択肢実装:
     1. 「指摘を修正する（推奨）」
     2. 「技術的理由で対応不可（理由を記録）」
     3. 「スコープ外として次サイクルで対応（理由を記録）」
   - 履歴記録フォーマットの追加

5. **テスト生成**
   - プロンプト変更のため、静的検証のみ（Markdownlint等）

6. **統合とレビュー**
   - 変更内容の最終確認
   - AIレビュー実施
   - 実装記録作成

## 完了条件チェックリスト

- [ ] `review-flow.md` に先送り判断基準セクションの追加
- [ ] ユーザー承認を必須とするフローの実装
- [ ] 先送り理由の履歴記録フローの追加

## 技術的考慮事項

- 「パッチだから」「小さい変更だから」は単独では選択肢に含めない
- 選択肢2/3の場合は理由を必須入力とし、履歴に記録
- 先送り理由の記録先: `docs/cycles/*/history/*.md`
