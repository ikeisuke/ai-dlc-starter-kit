# Unit 001 計画: AIレビュー実施タイミング明示化

## 概要

Construction Phaseの各ステップにAIレビュー実施指示を明示的に埋め込み、見落としを防止する。

関連Issue: #144

## 変更対象ファイル

- `prompts/package/prompts/construction.md`

## 現状の問題点

1. 128行目付近に「AIレビュー対象タイミング: 計画ファイル承認前、設計レビュー前...」と記載
2. しかし各ステップの手順内には具体的なAIレビュー実施指示がない
3. AIがフローに従って処理する際、AIレビューを見落としてしまう

## 実装計画

### 修正1: ステップ3（設計レビュー）への追加（448-454行付近）

現状:

```markdown
#### ステップ3: 設計レビュー

**タスク管理機能を活用してください。**

設計内容をユーザーに提示し、承認を得る

**承認なしで実装フェーズに進んではいけない**
```

変更後:

```markdown
#### ステップ3: 設計レビュー

**タスク管理機能を活用してください。**

1. **AIレビュー実施**（`docs/aidlc/prompts/common/review-flow.md` に従う）
2. レビュー結果を反映
3. 設計内容をユーザーに提示し、承認を得る

**承認なしで実装フェーズに進んではいけない**
```

### 修正2: ステップ5（実行前確認と完了条件の提示）への注記追加（309-350行付近）

「5. 実行前確認と完了条件の提示【重要】」セクションの末尾に注記を追加:

```markdown
**AIレビュー**: 計画承認前に `docs/aidlc/prompts/common/review-flow.md` に従ってAIレビューを実施すること。
```

### 修正3: ステップ4（コード生成）への追加（464-468行付近）

現状:

```markdown
#### ステップ4: コード生成

**タスク管理機能を活用してください。**

設計ファイルを読み込み、それに基づいて実装コードを生成
```

変更後:

```markdown
#### ステップ4: コード生成

**タスク管理機能を活用してください。**

1. 設計ファイルを読み込み、それに基づいて実装コードを生成
2. **AIレビュー実施**（`docs/aidlc/prompts/common/review-flow.md` に従う）
3. レビュー結果を反映
```

### 修正4: ステップ6（統合とレビュー）への追加（476-483行付近）

現状:

```markdown
#### ステップ6: 統合とレビュー

**タスク管理機能を活用してください。**

- ビルド実行
- テスト実行
- コードレビュー
- `docs/cycles/{{CYCLE}}/construction/units/[unit_name]_implementation.md` に実装記録を作成
```

変更後:

```markdown
#### ステップ6: 統合とレビュー

**タスク管理機能を活用してください。**

1. ビルド実行
2. テスト実行
3. **AIレビュー実施**（`docs/aidlc/prompts/common/review-flow.md` に従う）
4. レビュー結果を反映
5. コードをユーザーに提示し、承認を得る
6. `docs/cycles/{{CYCLE}}/construction/units/[unit_name]_implementation.md` に実装記録を作成
```

## 技術的考慮事項

- 設計省略: プロンプト修正のみのため、ドメインモデル・論理設計は不要
- 既存のフロー構造を維持しつつ、明示的な指示を追加
- review-flow.md自体の変更は行わない

---

## 完了条件チェックリスト

- [ ] construction.mdのステップ3（設計レビュー）にAIレビュー実施手順を追加
- [ ] ステップ4（コード生成）にAIレビュー実施手順を追加
- [ ] ステップ5（実行前確認）にAIレビュー実施の注記を追加
- [ ] ステップ6（統合とレビュー）にAIレビュー実施手順を追加
- [ ] 各箇所でreview-flow.mdへの参照を含める
- [ ] AIがフローに従えば自然にAIレビューが実行される構造になっている（Issue #144の期待効果）
