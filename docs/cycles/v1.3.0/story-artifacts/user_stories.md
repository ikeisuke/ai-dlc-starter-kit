# ユーザーストーリー

## Epic 1: 複数人開発対応

### US-1: 進捗管理の仕組み再設計
**優先順位**: Must-have

As a チームで開発する開発者
I want to 進捗管理の仕組みがコンフリクトしにくく、シンプルであってほしい
So that マージ作業の手間を減らし、スムーズにチーム開発ができる

**受け入れ基準**:
- [ ] progress.mdの維持・廃止・改善のいずれかの方針が決定されている
- [ ] 決定した方針に基づく実装が完了している
- [ ] 各フェーズ（Inception/Construction/Operations）で一貫した進捗管理ができる

**技術的考慮事項**:
- progress.md廃止の場合：ファイル存在チェックやGit状態からの自動検出を検討
- 維持の場合：Unit単位分割、JSON形式、または構造改善を検討
- Construction Phase用progressテンプレートの要否もこの中で決定

---

## Epic 2: バージョン管理改善

### US-2: Operations Phaseのバージョン更新修正
**優先順位**: Must-have

As a AI-DLCを使う開発者
I want to Operations Phaseでバージョンを更新したら次サイクルで正しく認識されるようにしたい
So that バージョン管理の信頼性が向上する

**受け入れ基準**:
- [ ] version.txt更新時にaidlc.tomlも同時に更新される手順が明確である
- [ ] アップグレード検出ロジックが正しく動作する
- [ ] バージョン更新手順がドキュメント化されている

**技術的考慮事項**:
- version.txtとaidlc.tomlのstarter_kit_versionの整合性

---

### US-3: 初回セットアップ時のバージョン提案改善
**優先順位**: Could-have

As a 既存プロジェクトにAI-DLCを導入する開発者
I want to プロジェクトの既存バージョン情報を考慮したサイクルバージョンを提案してほしい
So that プロジェクトのバージョン体系と整合性のあるサイクル管理ができる

**受け入れ基準**:
- [ ] package.json、pyproject.toml等のバージョン情報を調査する手順が追加されている
- [ ] 既存バージョンがある場合、それを考慮した提案がされる

**技術的考慮事項**:
- 複数のバージョン情報ソース（package.json、pyproject.toml、Cargo.toml等）への対応

---

## Epic 3: ワークフロー改善

### US-4: Unit作業中の気づき記録フロー定義
**優先順位**: Should-have

As a Unit作業中の開発者
I want to 別Unitに関連する気づきを適切に記録して現在の作業を継続したい
So that 作業の集中を維持しつつ、気づきを失わない

**受け入れ基準**:
- [ ] 気づきを記録する場所と方法が定義されている
- [ ] 記録後に現在のUnit作業を継続するフローが明確である
- [ ] プロンプトに手順が組み込まれている

**技術的考慮事項**:
- バックログへの追記または専用ファイルの検討

---

### US-5: コンテキストリセットのタイミング見直し
**優先順位**: Should-have

As a AI-DLCを使う開発者
I want to コンテキストリセットが適切なタイミングで提案されるようにしたい
So that 最適なコンテキスト状態で作業を開始できる

**受け入れ基準**:
- [ ] Unit完了時ではなくUnit開始時にリセットを提案するよう変更されている
- [ ] プロンプトの該当箇所が修正されている

**技術的考慮事項**:
- construction.mdの該当セクション修正

---

### US-6: Unit開始前のバックログ確認ステップ化
**優先順位**: Should-have

As a Construction Phaseを開始する開発者
I want to Unit開始前にバックログを確認するステップを踏みたい
So that 関連する気づきや修正事項を見落とさない

**受け入れ基準**:
- [ ] Construction Phase開始時の「最初に実行すること」にバックログ確認が含まれている
- [ ] 確認手順が明確に記載されている

**技術的考慮事項**:
- construction.mdの初期ステップ修正

---

### US-7: PRマージ後の手順明確化
**優先順位**: Should-have

As a サイクル完了後のPRをマージした開発者
I want to 次サイクル開始前にmainブランチを最新化する手順を明確に知りたい
So that 正しい状態で次サイクルを開始できる

**受け入れ基準**:
- [ ] PRマージ後の手順（main移動、pull）がドキュメント化されている
- [ ] Operations Phaseまたはセットアッププロンプトに手順が追加されている

**技術的考慮事項**:
- operations.mdまたはsetup-prompt.mdへの追記

---

## Epic 4: テンプレート・構造改善

### US-8: Unit定義ファイルのパス管理改善
**優先順位**: Should-have

As a Unit定義ファイルを読み込むAI
I want to Unit定義ファイルのパスを予測せずに正確に特定したい
So that ファイル読み込みエラーを減らし、効率的に作業できる

**受け入れ基準**:
- [ ] progress.mdにUnit定義ファイルのパスが記載される、または命名規則が統一されている
- [ ] ファイル名を予測して試す必要がなくなっている

**技術的考慮事項**:
- progress.mdへのパス列追加、または命名規則の明確化
- US-1の方針決定に依存する可能性あり

---

### US-9: backlog.md/backlog-completed.mdの構造改善
**優先順位**: Should-have

As a バックログに項目を追記する開発者
I want to heredocで追記しても構造が崩れないファイル構成にしたい
So that ファイルの一貫性が保たれる

**受け入れ基準**:
- [ ] 最終更新セクションの位置が見直されている
- [ ] 追記しても構造が崩れない形式になっている
- [ ] 既存バックログの移行が完了している

**技術的考慮事項**:
- ファイル構造の再設計（最終更新を先頭へ、追記セクションを末尾へ）
