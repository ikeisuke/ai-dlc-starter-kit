# 実装記録: サイクルバージョン提案改善

## 実装日時
2025-12-13

## 作成・変更ファイル

### プロンプト（変更）
- `prompts/setup-init.md` - セクション8（サイクル開始処理）を削除し、setup-cycle.md への誘導に変更
- `prompts/setup-cycle.md` - セクション2にバージョン提案ロジックを追加

### 設計ドキュメント
- `docs/cycles/v1.4.0/design-artifacts/domain-models/unit1_domain_model.md`
- `docs/cycles/v1.4.0/design-artifacts/logical-designs/unit1_logical_design.md`

## 変更内容

### setup-init.md
- セクション8〜10を削除（約200行）
- セクション8（Git コミット）、セクション9（完了メッセージ）に繰り上げ
- 「次のステップ」を setup-cycle.md への誘導に変更

### setup-cycle.md
- セクション2を大幅改善
- 2.1: 既存サイクルの検出
- 2.2: バージョン提案（3段階フォールバック）
  - ケースA: 既存サイクルから次バージョン提案（パッチ/マイナー/メジャー）
  - ケースB: package.json等からバージョン検出
  - デフォルト: v1.0.0
- 2.3: 重複チェック

## ビルド結果
該当なし（プロンプト編集のみ）

## テスト結果
該当なし（手動確認）

手動確認項目:
- [ ] 新規サイクル開始時にバージョン提案が表示される
- [ ] 既存サイクルから次バージョンが正しく計算される
- [ ] 重複チェックが機能する

## コードレビュー結果
- [x] セキュリティ: OK（プロンプト編集のみ）
- [x] 構造: OK（責務分離を改善）
- [x] ドキュメント: OK

## 技術的な決定事項
- setup-init.md のサイクル開始処理を setup-cycle.md に集約し、責務分離を明確化
- バージョン提案のデフォルトはパッチインクリメント（安全側）
- package.json 等からの検出は初回サイクルのみ（既存サイクルがある場合は不要）

## 課題・改善点
なし

## 状態
**完了**

## 備考
スコープを当初の「setup-cycle.md のみ」から「setup-init.md のリファクタリング含む」に拡大して対応。
