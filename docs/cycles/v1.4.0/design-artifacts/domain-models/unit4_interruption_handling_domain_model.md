# Unit 4: 割り込み対応ルール - ドメインモデル設計

## 概要

Construction Phase作業中に発生する割り込み要望を適切に分類し、計画を崩さずに管理するためのフローを定義する。

## ドメイン概念

### 割り込み要望（Interruption Request）

作業中にユーザーから発生する追加の要望・タスク・気づき。

**属性**:
- 内容: 要望の具体的な内容
- 発生タイミング: どのUnit作業中に発生したか
- 関係性: 現在のUnitとの関係

### 分類（Classification）

割り込み要望を3つのカテゴリに分類する。

| 分類 | 判定基準 | 対応アクション |
|------|----------|----------------|
| 1. 関係なし | 現在のサイクル・Unitと無関係 | バックログに記録 |
| 2. 別Unit関連 | 現在のサイクルに関係するが、別のUnitに属する | バックログ or 別Unit定義に追加 |
| 3. 現Unit関連 | 現在作業中のUnitに関係する | Unit定義に追記 → 設計から実装 |

## 分類フロー

```
割り込み要望発生
    │
    ▼
┌─────────────────────────┐
│ 現在のサイクルに関係？  │
└─────────────────────────┘
    │
    ├── いいえ ──→ 【分類1】バックログに記録
    │
    ▼ はい
┌─────────────────────────┐
│ 現在のUnitに関係？      │
└─────────────────────────┘
    │
    ├── いいえ ──→ 【分類2】バックログ or 別Unit定義に追加
    │
    ▼ はい
【分類3】Unit定義に追記 → 設計から実装
```

## 分類3の詳細フロー

現在のUnitに関係する場合、以下の手順で対応：

1. **現在の作業を一時停止**
2. **Unit定義ファイルに追記**
   - 「追加要件」セクションに内容を記載
   - 追加日時を記録
3. **設計フェーズに戻る**
   - ドメインモデル設計を更新（必要な場合）
   - 論理設計を更新（必要な場合）
4. **設計レビュー**
   - ユーザーに変更内容を提示
   - 承認を得る
5. **実装を継続**

## 設計原則

1. **計画の整合性維持**: 何をやるかは必ずUnit定義に記録してから実装
2. **トレーサビリティ**: 割り込み要望がどう対応されたか追跡可能
3. **シンプルさ**: 3分類のみで判断可能
