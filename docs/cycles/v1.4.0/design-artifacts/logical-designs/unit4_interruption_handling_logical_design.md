# Unit 4: 割り込み対応ルール - 論理設計

## 概要

割り込み対応フローをConstruction Phaseプロンプトに追加する。

## 配置場所

`prompts/package/prompts/construction.md` の「開発ルール」セクション内、「気づき記録フロー」の直後に配置。

理由:
- 気づき記録フローと関連性が高い（どちらも作業中の追加事項の扱い）
- 気づき記録フローは「AIが気づいた場合」、割り込み対応フローは「ユーザーから要望があった場合」という補完関係

## 追加するセクション

```markdown
- **割り込み対応フロー【重要】**: ユーザーから作業中に追加の要望・タスクがあった場合、以下の3分類で対応する

  | 分類 | 判定基準 | 対応 |
  |------|----------|------|
  | 1 | 現在のサイクル・Unitと無関係 | バックログに記録 |
  | 2 | 関係あるが別Unitに属する | バックログ or 別Unit定義に追加 |
  | 3 | 現在のUnitに関係 | Unit定義に追記 → 設計から実装 |

  **分類3の手順**:
  1. 現在の作業を一時停止
  2. Unit定義ファイルに要件を追記
  3. 必要に応じて設計（ドメインモデル・論理設計）を更新
  4. 設計レビューでユーザー承認を得る
  5. 実装を継続
```

## 既存セクションとの関係

| 既存セクション | 役割 | 今回の追加との関係 |
|---------------|------|-------------------|
| 気づき記録フロー | AIが作業中に発見した課題を記録 | 補完関係（AI発見 vs ユーザー要望）|
| コンテキストリセット対応 | コンテキスト溢れ時の対応 | 独立（別の課題）|
| 人間の承認プロセス | 計画・設計の承認 | 分類3の手順で活用 |

## 変更ファイル

- `prompts/package/prompts/construction.md`: 割り込み対応フローセクションを追加

## 影響範囲

- Construction Phaseのみに影響
- Inception Phase、Operations Phaseへの拡張は将来課題（Unit定義に記載済み）
