# ユーザーストーリー

## Epic 1: セットアップ体験の改善

### ストーリー 1: git worktree提案
**優先順位**: Could-have

As a 開発者
I want to セットアップ時にgit worktreeの使用を提案してほしい
So that 複数サイクルを並行して作業できる

**受け入れ基準**:
- [ ] セットアップ時にworktreeの使用オプションを提案する
- [ ] worktreeのディレクトリ構成を案内する
- [ ] 通常のブランチ切り替えも選択可能

**技術的考慮事項**:
- `setup-cycle.md` を編集

---

### ストーリー 2: サイクルバージョン提案改善
**優先順位**: Should-have

As a 開発者
I want to 既存サイクルから次バージョンを自動推測してほしい
So that バージョン番号の入力ミスを防げる

**受け入れ基準**:
- [ ] `docs/cycles/` 内の既存サイクルを検出する
- [ ] 最新バージョンから次バージョンを推測する（例: v1.3.2 → v1.3.3 または v1.4.0）
- [ ] package.json等を見るのは初回AI-DLC導入時のみ

**技術的考慮事項**:
- `setup-prompt.md`, `setup-cycle.md` を編集

---

### ストーリー 3: GitHub Issue確認
**優先順位**: Should-have

As a 開発者
I want to Inception Phase開始時にオープンなGitHub Issueを確認したい
So that 対応すべき項目を把握できる

**受け入れ基準**:
- [ ] GitHub CLIでオープンなIssueを取得する
- [ ] Dependabot PR確認と同様の形式で表示する
- [ ] 今回のサイクルで対応するか確認する

**技術的考慮事項**:
- `inception.md` のステップ2.5付近に追加

---

### ストーリー 4: セットアップステップ統合
**優先順位**: Should-have

As a 開発者
I want to Inception Phaseを直接開始してもブランチ作成が提案されてほしい
So that mainブランチで誤って作業することを防げる

**受け入れ基準**:
- [ ] Inception Phaseの「最初に必ず実行すること」にブランチ確認を追加
- [ ] 現在のブランチがmain/masterの場合、サイクル用ブランチ作成を提案
- [ ] setup-cycle.md経由でもInception直接開始でも同じ挙動

**技術的考慮事項**:
- `inception.md` を編集
- `setup-cycle.md` との重複を整理

---

## Epic 2: フェーズ実行の改善

### ストーリー 5: 割り込み対応ルール
**優先順位**: Should-have

As a 開発者
I want to 作業中の割り込み要望を適切に分類してほしい
So that 計画が崩れることなく追加要望を管理できる

**受け入れ基準**:
- [ ] 割り込み要望の分類フローを定義する
  - 関係ない案件 → バックログに記録
  - 関係あるけど今じゃない案件 → バックログに記録
  - 関係あるのでUnitに追加するが今すぐ実行しない案件 → Unit定義に追加
  - 関係あるし前提なのですぐにやる案件 → 即時実装
- [ ] Construction Phaseプロンプトに追加

**技術的考慮事項**:
- `construction.md` を編集

---

### ストーリー 6: AI MCPレビュー提案
**優先順位**: Could-have

As a 開発者
I want to AI MCPが利用可能な場合にレビュー活用を提案してほしい
So that 複数AIによるクロスレビューで品質を向上できる

**受け入れ基準**:
- [ ] MCPサーバーの利用可否を検出する
- [ ] 各フェーズの成果物完了時にレビュー活用を提案する
- [ ] 提案は任意（スキップ可能）

**技術的考慮事項**:
- `inception.md`, `construction.md`, `operations.md` を編集

---

## Epic 3: Operations Phase改善

### ストーリー 7: 完了作業の構造改善
**優先順位**: Should-have

As a 開発者
I want to Operations Phaseの完了作業を明確に構造化してほしい
So that 何をすべきかが分かりやすくなる

**受け入れ基準**:
- [ ] 「完了時の必須作業」をステップ6（リリース準備）として独立させる
- [ ] プロジェクト固有の完了作業は運用引き継ぎ（operations.md）で定義
- [ ] バックログ整理はステップ5に統合

**技術的考慮事項**:
- `operations.md`（プロンプト）を編集

---

### ストーリー 8: アプリバージョン確認
**優先順位**: Should-have

As a 開発者
I want to Operations Phaseでアプリのバージョンが更新されているか確認したい
So that リリース時のバージョン不整合を防げる

**受け入れ基準**:
- [ ] デプロイ準備ステップでバージョン確認を追加
- [ ] 確認対象（package.json, pyproject.toml等）は運用引き継ぎで定義
- [ ] 不一致時は警告を表示

**技術的考慮事項**:
- `operations.md`（プロンプト）を編集
- サイクル固有の `operations.md`（運用引き継ぎ）で確認方法を定義

---

## Epic 4: 複数人開発対応

### ストーリー 9: history.mdコンフリクト対策
**優先順位**: Could-have

As a チーム開発者
I want to history.mdのコンフリクトを防ぎたい
So that 複数人で同時に作業してもマージが容易になる

**受け入れ基準**:
- [ ] コンフリクト対策の方針を決定する（Git履歴で代替、ファイル分割、等）
- [ ] 方針に基づいてプロンプト/ルールを更新
- [ ] 既存のhistory.md運用との互換性を維持

**技術的考慮事項**:
- 対応案の検討が必要（Construction Phaseで詳細設計）

---

### ストーリー 10: backlog.mdコンフリクト対策
**優先順位**: Could-have

As a チーム開発者
I want to backlog.mdのコンフリクトを防ぎたい
So that 複数人で同時に作業してもマージが容易になる

**受け入れ基準**:
- [ ] コンフリクト対策の方針を決定する（ストーリー9と同じ方針を適用）
- [ ] 方針に基づいてプロンプト/ルールを更新
- [ ] 既存のbacklog.md運用との互換性を維持

**技術的考慮事項**:
- ストーリー9と同時に対応（同じ方針を適用）
