# Unit 001: バグ修正 - ドメインモデル設計

## 概要

このUnitはプロンプト内の条件分岐ロジックを修正するバグ修正であり、新しいドメインオブジェクトの追加はない。既存の概念の明確化のみを行う。

## ドメイン概念

### バックログモード (Backlog Mode)

バックログの保存先を決定する設定値。

**許可される値**:
| 値 | 説明 |
|-----|------|
| `git` | ローカルファイルに保存（デフォルト） |
| `issue` | GitHub Issueに保存 |
| `git-only` | ローカルファイルのみ（Issue作成禁止） |
| `issue-only` | GitHub Issueのみ（ローカルファイル作成禁止） |

**GitHub CLI依存グループ**:

- `issue` と `issue-only` はGitHub CLIが必要（共通の振る舞い）
- `git` と `git-only` はGitHub CLI不要

### 変更検出 (Change Detection)

Gitリポジトリ内の変更を検出するロジック。

**検出対象**:
| 種類 | 説明 |
|------|------|
| 追跡済み変更（staged） | `git add` 済みの変更 |
| 追跡済み変更（unstaged） | 変更があるが `git add` していないファイル |
| 未追跡ファイル | 新規作成されたファイル（`git add` されていない） |

**現状のバグ**: `git diff` は未追跡ファイルを検出できない

## ビジネスルール

1. **バックログモードのGitHub CLI依存ルール**
   - `mode = "issue"` または `mode = "issue-only"` の場合、GitHub CLIの認証確認とサイクルラベル作成が必要

2. **変更検出の網羅性ルール**
   - コミット前の変更検出では、追跡済み変更と未追跡ファイルの両方を検出すべき
