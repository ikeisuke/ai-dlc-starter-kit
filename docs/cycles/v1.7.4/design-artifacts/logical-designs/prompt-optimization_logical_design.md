# Unit 005: プロンプト最適化 - 論理設計

## 概要

質問深掘りルールの集約と受け入れ基準の具体化ガイダンスを追加する。

## 変更対象

### 1. AGENTS.md への質問深掘りルール追加

**ファイル**: `prompts/package/prompts/AGENTS.md`

**追加位置**: 「AI-DLC共通ルール」セクション内、「禁止事項」セクションの直前

**追加内容**:

```markdown
### 質問と深掘り

ユーザーとの対話で質問する際は、以下のルールに従う：

**質問の目的**:
- 曖昧な要件を明確化する
- 前提条件や制約を確認する
- 複数の解釈がある場合に意図を特定する

**深掘りのテクニック**:
- 「具体的には？」で詳細を引き出す
- 「例えば？」で具体例を求める
- 「なぜ？」で背景・理由を確認する
- ユースケースやシナリオを聞いて理解を深める

**注意事項**:
- 一問一答形式を守る（複数質問を一度にしない）
- 回答を得てから次の質問に進む
- 独自の解釈で進めず、必ず確認する
```

**理由**: CLAUDE.mdにある「質問の深掘り」ルールをAGENTS.mdに移動・集約することで、Claude Code以外のAIツール（Kiro等）でも同じルールが適用される。

### 2. inception.md への受け入れ基準ガイダンス追加

**ファイル**: `prompts/package/prompts/inception.md`

**追加位置**: ステップ3「ユーザーストーリー作成」内、成果物パス記述の直前

**追加内容**:

```markdown
**受け入れ基準の書き方【重要】**:

受け入れ基準は「何が実現されていれば完了とみなせるか」を具体的に記述する。

**良い例**（具体的で検証可能）:
- 「ログインボタンをクリックすると、ダッシュボード画面に遷移する」
- 「エラー時に赤色の警告メッセージが3秒間表示される」
- 「検索結果が100件を超える場合、ページネーションが表示される」

**悪い例**（曖昧で検証困難）:
- 「ユーザーが使いやすいこと」
- 「パフォーマンスが良いこと」
- 「適切に処理されること」

**記述のポイント**:
- 主語・動詞・結果を明確にする
- 数値や状態を具体的に記述する
- テスト可能な形で書く
```

**理由**: 受け入れ基準が曖昧だと、Construction Phaseでの実装判断が困難になり、完了基準が不明確になる。良い例・悪い例を示すことで、具体的な書き方が理解しやすくなる。

## 影響範囲

- `prompts/package/prompts/AGENTS.md`: 質問深掘りルール追加
- `prompts/package/prompts/inception.md`: 受け入れ基準ガイダンス追加
- `prompts/package/prompts/CLAUDE.md`: 「質問の深掘り」セクションはそのまま残す（Claude Code固有の補足として）

## 非機能要件への対応

該当なし（ドキュメント変更のみ）

## 設計判断

### Q: CLAUDE.mdの「質問の深掘り」セクションは削除するか？

**A**: 残す。理由は以下の通り：
- CLAUDE.mdはClaude Code固有の設定ファイルとして機能している
- AskUserQuestion機能の活用など、Claude Code固有の機能との関連がある
- AGENTS.mdとの重複は許容し、AGENTS.mdを基本ルール、CLAUDE.mdを補足として位置づける
