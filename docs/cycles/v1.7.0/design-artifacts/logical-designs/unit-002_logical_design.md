# 論理設計: AIエージェント許可リストガイド

## 成果物

1. `prompts/package/guides/ai-agent-allowlist.md` - 許可リストガイド
2. `prompts/setup-prompt.md` への案内追加

## ドキュメント構成

```
prompts/package/guides/ai-agent-allowlist.md
├── 1. はじめに
│   ├── 目的
│   └── 適用範囲
├── 2. コマンドカテゴリ一覧
│   ├── 2.1 読み取り専用（許可推奨）
│   ├── 2.2 作成系（許可推奨）
│   ├── 2.3 Git操作（条件付き許可）
│   └── 2.4 除外対象（許可非推奨）
├── 3. AIエージェント別設定方法
│   ├── 3.1 Claude Code
│   ├── 3.2 Codex CLI
│   ├── 3.3 Kiro CLI
│   ├── 3.4 Cline
│   └── 3.5 Cursor
├── 4. セキュリティ上の注意事項
│   ├── 4.1 複合コマンドの扱い
│   ├── 4.2 ワイルドカードの限界
│   └── 4.3 推奨対策
└── 5. 参考リンク
```

## セクション詳細

### 1. はじめに

- **目的**: AI-DLCで使用するコマンドの許可リストを整理し、各AIエージェントで効率的に開発できるようにする
- **適用範囲**: Claude Code, Codex CLI, Kiro CLI, Cline, Cursor

### 2. コマンドカテゴリ一覧

ドメインモデル設計の表をそのまま使用。各フェーズで使用されるコマンドを網羅的に記載。

### 3. AIエージェント別設定方法

各エージェントについて以下を記載:
- 設定ファイルパス
- 設定フォーマット（例示）
- ワイルドカード/パターンの仕様
- 複合コマンドの扱い
- 既知の問題（あれば）

### 4. セキュリティ上の注意事項

- 複合コマンド（`&&`, `||`, `;`, `|`）の各ツールでの扱い
- ワイルドカードのバイパス可能性
- 推奨対策（denylistの設定例）

### 5. 参考リンク

- 各ツールの公式ドキュメント
- 関連Issue/CVE

## setup-prompt.md への追加

セクション10「完了メッセージと次のステップ」に以下を追加:

```markdown
### AIエージェント許可リストの設定（オプション）

AI-DLCではファイル操作やGitコマンドを多用します。
毎回の確認を減らすため、許可リストの設定を推奨します。

詳細は `docs/aidlc/guides/ai-agent-allowlist.md` を参照してください。
```

## ディレクトリ構成

```
prompts/
├── package/
│   ├── guides/           ← 新規作成
│   │   └── ai-agent-allowlist.md
│   ├── prompts/
│   └── templates/
└── setup-prompt.md       ← 案内追加
```

## バックログ追加

AI-DLCプロンプト内の複合コマンド削減について、バックログに追加:

```
docs/cycles/backlog/chore-reduce-compound-commands.md
```
