# Unit 2: 軽量サイクル（Lite版）ドメインモデル

## 概要

Lite版サイクルは、Full版プロンプトを参照しつつ、スキップ/簡略化する箇所を差分として定義する方式を採用する。

## コア概念

### 1. サイクルタイプ（Cycle Type）

```
CycleType
├── Full（既存）: 全ステップを実行
└── Lite（新規）: 一部ステップをスキップ/簡略化
```

### 2. Full版とLite版の関係

```
┌─────────────────────────────────────────────────┐
│                  Full版プロンプト                │
│  （inception.md / construction.md / operations.md）│
│            ↑ 参照（Single Source of Truth）       │
├─────────────────────────────────────────────────┤
│                  Lite版プロンプト                │
│  （inception-lite.md / construction-lite.md /    │
│    operations-lite.md）                          │
│                                                 │
│  内容: 「Full版のどこをスキップ/簡略化するか」     │
└─────────────────────────────────────────────────┘
```

## 各フェーズの差分定義

### Inception Phase

| ステップ | Full版 | Lite版 |
|---------|--------|--------|
| ステップ1: Intent明確化 | 対話形式で詳細に作成 | **簡略化**: 1ファイルに簡潔に記述 |
| ステップ2: 既存コード分析 | 詳細分析 | 同じ（必要に応じて実施） |
| ステップ3: ユーザーストーリー作成 | 詳細なストーリー | **簡略化**: 箇条書きレベル |
| ステップ4: Unit定義 | 個別ファイル作成 | **簡略化**: 1ファイルにまとめる |
| ステップ5: PRFAQ作成 | プレスリリース形式 | **スキップ** |
| ステップ6: Construction用progress.md | 詳細な進捗管理 | **簡略化**: 最小限の管理 |

### Construction Phase

| ステップ | Full版 | Lite版 |
|---------|--------|--------|
| ステップ1: ドメインモデル設計 | 詳細な設計ドキュメント | **スキップ** |
| ステップ2: 論理設計 | 詳細な設計ドキュメント | **スキップ** |
| ステップ3: 設計レビュー | 承認プロセス | **スキップ** |
| ステップ4: コード生成 | 設計に基づく実装 | **直接実装** |
| ステップ5: テスト生成 | BDD/TDD | **最小限のテスト** |
| ステップ6: 統合とレビュー | 詳細な実装記録 | **簡略化**: 最小限の記録 |

### Operations Phase

| ステップ | Full版 | Lite版 |
|---------|--------|--------|
| 全ステップ | 必須 | **任意**（必要な場合のみ実施） |

## setup-prompt.md の変更

### 新規変数

```
CYCLE_TYPE = Full | Lite
```

### 条件分岐

```
if CYCLE_TYPE == "Lite":
    参照先 = docs/aidlc/prompts/lite/inception-lite.md
else:
    参照先 = docs/aidlc/prompts/inception.md
```

## Lite版プロンプトの構造

各Lite版プロンプトは以下の構造を持つ：

```markdown
# [Phase名] Lite版プロンプト

## 参照
まずFull版プロンプトを読み込んでください:
`docs/aidlc/prompts/[phase].md`

## Lite版での変更点

### スキップするステップ
- [ステップ名]: スキップ

### 簡略化するステップ
- [ステップ名]: [簡略化の内容]

## Lite版専用のルール
- [Lite版固有のルールがあれば記載]
```

## 維持される原則

Lite版でも以下は維持する：
- 人間の承認プロセス（重要な決定時）
- Gitコミットのタイミング
- 履歴記録（history.md）
- コンテキストリセット対応
- 冪等性の保証

## 境界

- Full版プロンプト自体は変更しない
- Lite版とFull版の相互変換機能は含まない
- Lite版は「軽微な変更・バグ修正」向け、大規模開発はFull版を使用
