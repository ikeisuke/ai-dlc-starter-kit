# ユーザーストーリー

## Epic 1: Operations Phase再利用性

### ストーリー 1-1: CI/CD設定の再利用
**優先順位**: Must-have

As a 開発者
I want to 前サイクルで構築したCI/CD設定を新サイクルで再利用したい
So that 毎回同じCI/CD設定を構築する手間を省ける

**受け入れ基準**:
- [ ] 共通Operations成果物の格納場所（`docs/aidlc/operations/`）が定義されている
- [ ] Operations Phase開始時に既存CI/CD設定の有無を確認できる
- [ ] 既存設定がある場合「再利用/更新/新規作成」の選択肢が提示される

**技術的考慮事項**:
- `docs/aidlc/operations/cicd/` に共通設定を配置
- サイクル固有の設定は引き続き `docs/cycles/vX.X.X/operations/` に配置

---

### ストーリー 1-2: 監視設定の再利用
**優先順位**: Must-have

As a 開発者
I want to 前サイクルで構築した監視設定を新サイクルで再利用したい
So that 毎回同じ監視設定を構築する手間を省ける

**受け入れ基準**:
- [ ] 監視設定の共通格納場所が定義されている
- [ ] Operations Phase開始時に既存監視設定の有無を確認できる
- [ ] 既存設定がある場合「再利用/更新/新規作成」の選択肢が提示される

**技術的考慮事項**:
- `docs/aidlc/operations/monitoring/` に共通設定を配置

---

## Epic 2: 軽量サイクル（Lite版）

### ストーリー 2-1: Lite版サイクルの選択
**優先順位**: Must-have

As a 開発者
I want to セットアップ時にFull版とLite版を選択したい
So that バグ修正などの軽微な変更を素早く進められる

**受け入れ基準**:
- [ ] セットアップ時に `CYCLE_TYPE = full / lite` を選択できる
- [ ] Lite版選択時はLite版プロンプトが使用される
- [ ] セットアップ完了メッセージにLite版の案内が含まれる

**技術的考慮事項**:
- `prompts/setup-prompt.md` に `CYCLE_TYPE` 変数を追加
- Lite版プロンプトは `docs/aidlc/prompts/lite/` に配置

---

### ストーリー 2-2: Lite版の簡略フロー実行
**優先順位**: Must-have

As a 開発者
I want to Lite版では必要最小限のステップのみ実行したい
So that 小さな変更に対するオーバーヘッドを削減できる

**受け入れ基準**:
- [ ] Lite版Inception: Intent + 簡易Unit定義のみ（PRFAQ省略）
- [ ] Lite版Construction: 設計ステップ省略、直接実装可能
- [ ] Lite版Operations: 必要な場合のみ実行（スキップ可能）

**技術的考慮事項**:
- 各フェーズのLite版プロンプトを作成
- 必要最小限の成果物のみ作成

---

## Epic 3: ブランチ確認機能

### ストーリー 3-1: ブランチ名の自動確認
**優先順位**: Should-have

As a 開発者
I want to セットアップ時に現在のブランチ名がサイクル名と一致しているか確認したい
So that 誤ったブランチで作業を開始するミスを防げる

**受け入れ基準**:
- [ ] セットアップ時に `git branch --show-current` で現在のブランチを取得
- [ ] `CYCLE` がブランチ名に含まれているか確認
- [ ] 含まれていない場合は警告を表示

**技術的考慮事項**:
- `prompts/setup-prompt.md` に確認ロジックを追加

---

### ストーリー 3-2: ブランチ切り替えの提案
**優先順位**: Should-have

As a 開発者
I want to ブランチ名が不一致の場合に適切なブランチへの切り替えを提案してほしい
So that 正しいブランチで作業を開始できる

**受け入れ基準**:
- [ ] 不一致時に「ブランチを切り替えますか？」と提案
- [ ] `feature/{CYCLE}` 形式のブランチ名を提案
- [ ] ユーザーが承認した場合のみ切り替えを実行

**技術的考慮事項**:
- 既存ブランチの確認とない場合の新規作成を区別

---

## Epic 4: コンテキストリセット提案機能

### ストーリー 4-1: フェーズ移行時のリセット提案
**優先順位**: Must-have

As a 開発者
I want to フェーズ完了時にコンテキストリセットと次フェーズ開始プロンプトを提示してほしい
So that 適切なタイミングでコンテキストをリセットできる

**受け入れ基準**:
- [ ] Inception Phase完了時にリセット推奨メッセージが表示される
- [ ] Construction Phase完了時にリセット推奨メッセージが表示される
- [ ] コピペ可能な次フェーズ開始プロンプトが提示される

**技術的考慮事項**:
- 各フェーズプロンプトの「完了時の必須作業」セクションに追加

---

### ストーリー 4-2: Unit完了時のリセット提案
**優先順位**: Must-have

As a 開発者
I want to Unit完了時にコンテキストリセットと次Unit開始プロンプトを提示してほしい
So that Unit間でコンテキストが膨らむのを防げる

**受け入れ基準**:
- [ ] Unit完了時にリセット推奨メッセージが表示される
- [ ] コピペ可能な次Unit開始プロンプトが提示される
- [ ] 全Unit完了時はOperations Phase開始プロンプトが提示される

**技術的考慮事項**:
- `construction.md` の「Unit完了時の必須作業」セクションに追加
