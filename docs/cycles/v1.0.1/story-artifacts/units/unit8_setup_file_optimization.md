# Unit: セットアップファイルの最適化

## 概要
セットアップファイル（`prompts/setup-prompt.md`）が1746行に達し、Claude Codeでの読み込みに支障が出ているため、圧縮と分割により最適化する。メンテナンス性を重視し、フェーズごとにファイルを分割する。

## 含まれるユーザーストーリー
- ストーリー 8.1: セットアップファイルの圧縮と分割

## 責務
- セットアップファイルを読み込み可能なサイズに圧縮
- フェーズ別にファイルを分割し、メンテナンス性を向上
- 分割後も既存の機能・動作を維持
- 既存のセットアップ手順に影響を与えない

## 境界
- セットアップの機能追加は含まない（既存機能の維持のみ）
- 他のプロンプトファイル（inception.md、construction.md等）の最適化は含まない

## 依存関係

### 依存する Unit
なし（独立した Unit）

### 外部依存
なし

## 非機能要件（NFR）
- **可読性**: 各ファイルは500行以内を目安に
- **保守性**: フェーズごとに独立したファイル構成
- **互換性**: 既存のセットアップ手順を完全に維持
- **テスト容易性**: 分割後のファイルで正常にセットアップが完了すること

## 技術的考慮事項

### 最終的なファイル構成
```
prompts/setup-prompt.md (メイン、300行)
├── 変数定義
├── MODE判定
└── セットアップフロー

prompts/setup/inception.md (Inceptionセットアップ、500行)
├── inception.mdプロンプト生成
└── Inception用テンプレート（埋め込み）

prompts/setup/construction.md (Constructionセットアップ、500行)
├── construction.mdプロンプト生成
└── Construction用テンプレート（埋め込み）

prompts/setup/operations.md (Operationsセットアップ、500行)
├── operations.mdプロンプト生成
└── Operations用テンプレート（埋め込み）

prompts/setup/common.md (共通処理、200行)
├── ディレクトリ作成
├── 共通ファイル生成
└── 完了処理
```

### 圧縮方針
1. 冗長な説明・コメントの簡潔化
2. 繰り返し表現の統合
3. テンプレート内の空行削減
4. プロンプトファイル内の重複説明削減

### メンテナンス性の利点
- フェーズプロンプト修正: 該当フェーズファイル1つだけ修正
- テンプレート修正: 該当フェーズファイル1つだけ修正
- フェーズ間の独立性: 各フェーズが独立、並行作業可能
- Git履歴: 変更が明確、コンフリクトしにくい

## 実装優先度
Critical（最優先）

## 見積もり
- ドメインモデル設計: 0.5時間（軽量）
- 論理設計: 0.5時間（軽量）
- 圧縮作業: 1時間
- ファイル分割: 1時間
- テスト（セットアップ実行確認）: 0.5時間
- 合計: 3.5時間
