# Unit: 表記揺れ対策

## 概要
テンプレートやプロンプトの動的生成による表記揺れ問題を解決し、バージョン間の差分を明確にする。

## 含まれるユーザーストーリー
- ストーリー 2.3: 表記揺れ問題の解決

## 責務
- 表記揺れの原因分析
- 解決策の選定（静的化、ハッシュ管理、差分ツールカスタマイズ等）
- 選定した解決策の設計と実装
- 実装方針の文書化

## 境界
- バージョンアップ検知の仕組みは含まない（Unit 2で実装済み）
- 実際のバージョンアップ作業は含まない

## 依存関係

### 依存する Unit
- **Unit 2: バージョンアップ基盤**（依存理由: バージョンアップ手順の一部として表記揺れ対策を組み込むため）

### 外部依存
- 選定する解決策によって異なる：
  - 静的化の場合: 特になし
  - ハッシュ管理の場合: `sha256sum` または類似コマンド
  - 差分ツールの場合: `diff`, `git diff` のカスタマイズ

## 非機能要件（NFR）
- **パフォーマンス**: ファイル比較は1秒以内に完了すること
- **セキュリティ**: 特別な要件なし
- **スケーラビリティ**: 数百ファイルの比較に対応
- **可用性**: 誤検知を最小限に抑える

## 技術的考慮事項
- **オプション1: 静的テンプレート化**
  - 動的生成をやめ、静的なテンプレートファイルを配布
  - メリット: シンプル、表記揺れが発生しない
  - デメリット: プロジェクトタイプごとのカスタマイズが難しい

- **オプション2: ハッシュ値管理**
  - ファイルのハッシュ値を記録し、内容の同一性を判定
  - メリット: 動的生成を維持しつつ、実質的な変更のみを検出
  - デメリット: ハッシュ値管理の仕組みが必要

- **オプション3: 差分ツールのカスタマイズ**
  - 空白、改行、コメントの違いを無視する差分表示
  - メリット: 既存のツールを活用できる
  - デメリット: 完全な解決にならない可能性

## 実装優先度
Medium

## 見積もり
- 原因分析: 1時間
- 解決策選定: 1時間
- 設計: 1.5時間
- 実装: 3時間
- テスト: 1時間
- 文書化: 0.5時間
- 合計: 8時間
