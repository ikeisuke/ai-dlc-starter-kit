# 論理設計: jjサポート強化

## 概要

jj-support.md の構成を分析し、「よくあるミスと対処法」セクションの最適な配置位置を決定する。

## 現在のドキュメント構成

```
jj-support.md
├── 概要
├── ⚠️ 重要: bookmarkは自動で進まない
├── 推奨設定
├── 前提条件
├── gitとjjの考え方の違い
├── jjの特徴と利点
├── Git/jjコマンド対照表
│   ├── 状態確認系
│   ├── ブックマーク操作系
│   ├── コミット操作系
│   └── リモート操作系
├── AI-DLCワークフローでの使用方法
│   ├── 作業開始時チェックリスト
│   ├── Setup Phase
│   ├── Inception Phase
│   ├── Construction Phase
│   ├── Operations Phase
│   └── 作業終了時チェックリスト
├── 注意事項と制限
└── 参考リンク
```

## 配置位置の決定

### 新セクション「よくあるミスと対処法」の配置

**配置場所**: 「AI-DLCワークフローでの使用方法」の後、「注意事項と制限」の前

**理由**:
- ワークフローを実践した後に発生する問題をカバー
- 注意事項（予防的情報）の前にトラブルシューティング（事後対応）を配置
- 既存の「bookmarkは自動で進まない」セクションは重要な警告として冒頭に残す

### コマンド対照表の補完

**追加するコマンド**:

| 用途 | Git コマンド | jj コマンド | 備考 |
|------|-------------|------------|------|
| 変更を分離 | `git add -p` + `git commit` | `jj split` | 対話的に分離 |
| コミット統合 | `git rebase -i` (squash) | `jj squash` | 親への統合 |
| ファイル復元 | `git restore <file>` | `jj restore --from <rev> <file>` | 特定リビジョンから |
| リモートbookmark削除 | `git push origin --delete <name>` | `jj git push --delete <name>` | |

**配置場所**: 既存のコマンド対照表に「修正・整理系」として追加

## セクション構成

### 新規セクション: よくあるミスと対処法

```markdown
## よくあるミスと対処法

このセクションでは、AI-DLCでjjを使用する際によく遭遇する問題と解決策を説明します。

### `jj new` を忘れて作業を始めた
[症状・解決策・予防策]

### bookmarkが進まない・リモートに反映されない
[症状・解決策・予防策]
※ 冒頭の警告セクションへの相互参照を含む

### 不要なbookmarkの削除
[手順（ローカル・リモート）]

### 作業開始前に未コミットの変更がある
[症状・解決策・予防策]
```

## 既存セクションとの関係

| 新規コンテンツ | 関連する既存セクション | 関係性 |
|---------------|---------------------|--------|
| `jj new` 忘れ | 作業開始時チェックリスト | 予防策として参照 |
| bookmark進まない | ⚠️ bookmarkは自動で進まない | 詳細な対処法として補完 |
| 不要bookmark削除 | コマンド対照表 | コマンド追加で補完 |
| 未コミット変更 | 作業開始時チェックリスト | 予防策として参照 |

## 変更の影響範囲

- **変更対象**: `prompts/package/guides/jj-support.md`
- **影響なし**: 他のプロンプトファイル、テンプレート

## 技術的考慮事項

- jjバージョン差異への配慮（0.22前後でbookmark/branch）
- 実際のエラーメッセージやコマンド出力を含めて検索性を向上
- 既存の「注意事項と制限」セクションとの重複を避ける
