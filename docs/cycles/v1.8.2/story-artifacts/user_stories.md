# ユーザーストーリー

## Epic 1: AIスキル統合（#86）

### ストーリー 1-1: プロジェクトローカルスキルの自動利用
**優先順位**: Must-have

As a AI-DLCスターターキット利用者
I want to プロジェクトをcloneするだけでAIスキル（codex/claude/gemini）が使える
So that 個別のスキルインストール作業が不要になり、すぐに開発を開始できる

**受け入れ基準**:
- [ ] `prompts/package/skills/` に3つのスキル（codex/claude/gemini）が配置されている
- [ ] セットアップ実行後、`docs/aidlc/skills/` にスキルがコピーされている
- [ ] `.claude/skills/` から `docs/aidlc/skills/` へのシンボリックリンクが存在する
- [ ] Claude Codeで `/codex` コマンドが認識される（`What Skills are available?` で確認可能）

**技術的考慮事項**:
- シンボリックリンクはGitで追跡可能
- 相対パスを使用して環境依存を排除

---

### ストーリー 1-2: KiroCLI対応ドキュメント
**優先順位**: Should-have

As a KiroCLI利用者
I want to KiroCLIでもAIスキルを利用する方法がわかる
So that Claude Code以外の環境でも同じスキルセットを使える

**受け入れ基準**:
- [ ] KiroCLIでのスキル設定方法がドキュメント化されている
- [ ] `resources` 設定へのスキル追加例が記載されている

**技術的考慮事項**:
- KiroCLIは `@ファイルパス` 記法が機能しないため、`resources` フィールドで指定

---

## Epic 2: AIレビュー設定強化（#82）

### ストーリー 2-1: MCPツールの設定指定
**優先順位**: Must-have

As a AI-DLC利用者
I want to 使用するMCPツールを設定ファイルで指定できる
So that 環境に応じて最適なAIレビューツールを選択できる

**受け入れ基準**:
- [ ] `aidlc.toml` の `[rules.mcp_review]` セクションに `mcp_tools` 設定が追加されている
- [ ] `mcp_tools = ["tool1", "tool2"]` 形式で優先順位付きリストとして指定可能
- [ ] 設定されたツールが上から順に試行され、利用可能な最初のツールが使用される

**技術的考慮事項**:
- 空の場合やセクションが存在しない場合のデフォルト動作を維持
- 既存の `mode` 設定との互換性を保持

---

### ストーリー 2-2: フォールバック動作
**優先順位**: Must-have

As a AI-DLC利用者
I want to 指定したMCPツールがすべて利用不可の場合でもAIレビューが実行される
So that 環境の制約に関わらず品質保証プロセスが継続できる

**受け入れ基準**:
- [ ] `mcp_tools` で指定したツールがすべて利用不可の場合、Skillsにフォールバックする
- [ ] フォールバック動作が既存の動作（Skills優先 → MCPフォールバック）と一貫している

**技術的考慮事項**:
- Skillsは常に最終フォールバックとして機能

---

## Epic 3: jjサポート強化（#83）

### ストーリー 3-1: よくあるミスと対処法
**優先順位**: Must-have

As a jj利用者
I want to jj使用時によくあるミスとその対処法がわかる
So that Gitとの違いによるトラブルを素早く解決できる

**受け入れ基準**:
- [ ] `jj-support.md` に「よくあるミスと対処法」セクションが追加されている
- [ ] 最低3つ以上の具体的なエラーケースと解決策が記載されている
- [ ] bookmarkが進まない問題の対処法が強調されている

**技術的考慮事項**:
- 実際のエラーメッセージを含めることで検索性を向上

---

### ストーリー 3-2: コマンド対照表の充実
**優先順位**: Should-have

As a jj初心者
I want to Git操作に対応するjjコマンドを素早く見つけられる
So that Gitの知識を活かしてjjを使いこなせる

**受け入れ基準**:
- [ ] 既存のコマンド対照表に不足しているケースが追加されている
- [ ] AI-DLCワークフローで頻繁に使用するコマンドが網羅されている

**技術的考慮事項**:
- jjのバージョン差異（bookmark vs branch）に配慮

---

## 優先順位サマリー

| ストーリー | 優先順位 | Epic |
|-----------|---------|------|
| 1-1: プロジェクトローカルスキルの自動利用 | Must-have | #86 |
| 1-2: KiroCLI対応ドキュメント | Should-have | #86 |
| 2-1: MCPツールの設定指定 | Must-have | #82 |
| 2-2: フォールバック動作 | Must-have | #82 |
| 3-1: よくあるミスと対処法 | Must-have | #83 |
| 3-2: コマンド対照表の充実 | Should-have | #83 |
