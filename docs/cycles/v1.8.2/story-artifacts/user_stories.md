# ユーザーストーリー

## Epic 1: AIスキル統合（#86）

### ストーリー 1-1: プロジェクトローカルスキルの自動利用
**優先順位**: Must-have

As a AI-DLCスターターキット利用者
I want to プロジェクトをcloneするだけでAIスキル（codex/claude/gemini）が使える
So that 個別のスキルインストール作業が不要になり、すぐに開発を開始できる

**受け入れ基準**:
- [ ] `prompts/package/skills/` に3つのスキル（codex/claude/gemini）が配置されている
- [ ] セットアップ実行後、`docs/aidlc/skills/` にスキルがコピーされている
- [ ] `.claude/skills/` から `docs/aidlc/skills/` へのシンボリックリンクが存在する
- [ ] Claude Codeで `/codex` コマンドが認識される（`What Skills are available?` で確認可能）

**技術的考慮事項**:
- シンボリックリンクはGitで追跡可能
- 相対パスを使用して環境依存を排除

---

### ストーリー 1-2: KiroCLI対応ドキュメント
**優先順位**: Should-have

As a KiroCLI利用者
I want to KiroCLIでもAIスキルを利用する方法がわかる
So that Claude Code以外の環境でも同じスキルセットを使える

**受け入れ基準**:
- [ ] KiroCLIでのスキル設定方法がドキュメント化されている
- [ ] `resources` 設定へのスキル追加例が記載されている

**技術的考慮事項**:
- KiroCLIは `@ファイルパス` 記法が機能しないため、`resources` フィールドで指定

---

## Epic 2: AIレビュー設定強化（#82）

### ストーリー 2-1: AIサービスの設定指定
**優先順位**: Must-have

As a AI-DLC利用者
I want to AIレビューに使用するAIサービス（codex/claude/gemini）を設定ファイルで指定できる
So that 環境や好みに応じて最適なAIサービスを選択できる

**受け入れ基準**:
- [ ] `aidlc.toml` の `[rules.mcp_review]` セクションに `ai_tools` 設定が追加されている
- [ ] `ai_tools = ["codex", "claude", "gemini"]` 形式で優先順位付きリストとして指定可能
- [ ] 設定されたAIサービスが上から順に試行され、利用可能な最初のものが使用される

**技術的考慮事項**:
- 未設定時のデフォルトは `["codex"]`（現状維持）
- 既存の `mode` 設定との互換性を保持

---

### ストーリー 2-2: フォールバック動作
**優先順位**: Must-have

As a AI-DLC利用者
I want to 指定したAIサービスがすべて利用不可の場合でも適切にエラーハンドリングされる
So that 環境の問題を把握し、対処できる

**受け入れ基準**:
- [ ] `ai_tools` で指定したサービスを上から順に試行する
- [ ] 利用可能なサービスが見つかった時点でそれを使用する
- [ ] すべて利用不可の場合、ユーザーにエラーメッセージを表示する

**技術的考慮事項**:
- 各AIサービスはSkillまたはMCPツールとして呼び出される（実装詳細）
- エラーメッセージには利用不可だったサービス名を含める

---

## Epic 3: jjサポート強化（#83）

### ストーリー 3-1: よくあるミスと対処法
**優先順位**: Must-have

As a jj利用者
I want to jj使用時によくあるミスとその対処法がわかる
So that Gitとの違いによるトラブルを素早く解決できる

**受け入れ基準**:
- [ ] `jj-support.md` に「よくあるミスと対処法」セクションが追加されている
- [ ] 以下の3つのエラーケースと解決策が記載されている：
  - bookmarkが進まない問題
  - `jj git push` 時のエラー（bookmark未設定）
  - コンフリクト発生時の対処法
- [ ] 各エラーケースに具体的なエラーメッセージまたは状況説明が含まれている

**技術的考慮事項**:
- 実際のエラーメッセージを含めることで検索性を向上

---

### ストーリー 3-2: コマンド対照表の充実
**優先順位**: Should-have

As a jj初心者
I want to Git操作に対応するjjコマンドを素早く見つけられる
So that Gitの知識を活かしてjjを使いこなせる

**受け入れ基準**:
- [ ] 以下のコマンドがコマンド対照表に含まれている：
  - `jj squash`（コミットの統合）
  - `jj abandon`（コミットの破棄）
  - `jj restore`（ファイルの復元）
- [ ] 各コマンドにAI-DLCワークフローでの使用例が記載されている
- [ ] 注: 対話前提のコマンド（`jj split`等）はAIエージェントでの利用が困難なため除外

**技術的考慮事項**:
- jjのバージョン差異（bookmark vs branch）に配慮

---

## 優先順位サマリー

| ストーリー | 優先順位 | Epic |
|-----------|---------|------|
| 1-1: プロジェクトローカルスキルの自動利用 | Must-have | #86 |
| 1-2: KiroCLI対応ドキュメント | Should-have | #86 |
| 2-1: MCPツールの設定指定 | Must-have | #82 |
| 2-2: フォールバック動作 | Must-have | #82 |
| 3-1: よくあるミスと対処法 | Must-have | #83 |
| 3-2: コマンド対照表の充実 | Should-have | #83 |
