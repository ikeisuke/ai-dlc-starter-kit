# Unit 003: レビュー・コミットワークフロー改善 - 実行計画

## 概要

レビュー前後に自動的にコミットを作成する手順を各プロンプトに追加し、変更履歴の追跡性を向上させる。

## 現状分析

3つのプロンプトファイル（inception.md, construction.md, operations.md）を確認した結果：

### 既存実装
- **AIレビュー優先ルール**セクション内に、MCP利用可能時のレビュー前後コミット手順が**既に記載済み**
- コミットメッセージ形式:
  - レビュー前: `chore: [{{CYCLE}}] レビュー前 - {成果物名}`
  - レビュー後: `chore: [{{CYCLE}}] レビュー反映 - {成果物名}`

### 改善が必要な点
現在の実装では、コミット手順が「MCP利用可能時」の条件下のみに存在している。
以下のケースでもコミット手順を明確化する必要がある：

1. **MCP利用不可時の人間レビュー** - コミット手順が不明確
2. **AIレビューモードがdisabledの場合** - 直接人間承認に進むため、コミットタイミングが不明確

## 実行計画

### Phase 1: 設計（ドキュメント作成のみ）

#### ステップ1: ドメインモデル設計
- **成果物**: `docs/cycles/v1.6.0/design-artifacts/domain-models/review_commit_workflow_domain_model.md`
- **内容**: レビュー・コミットワークフローの概念モデルを定義

#### ステップ2: 論理設計
- **成果物**: `docs/cycles/v1.6.0/design-artifacts/logical-designs/review_commit_workflow_logical_design.md`
- **内容**: 各プロンプトファイルへの変更箇所と変更内容を詳細化

#### ステップ3: 設計レビュー
- ユーザー承認を得る

### Phase 2: 実装

#### ステップ4: コード生成
- **対象ファイル**:
  - `prompts/package/prompts/inception.md`
  - `prompts/package/prompts/construction.md`
  - `prompts/package/prompts/operations.md`
- **変更内容**: レビュー前後のコミット手順を全ケース（MCP利用可/不可、人間レビュー）で明確化

#### ステップ5: テスト生成
- このUnitはドキュメント修正のため、自動テストは対象外
- 手動検証: プロンプトの整合性確認

#### ステップ6: 統合とレビュー
- 実装記録作成
- Gitコミット

## 想定作業量

- Phase 1（設計）: 30分
- Phase 2（実装）: 30分-1時間

## 依存関係

- なし（独立して実装可能）

## リスク

- なし

---
作成日: 2026-01-09
