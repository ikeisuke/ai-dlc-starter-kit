# ユーザーストーリー

## Epic 1: バグ修正（高優先度）

### ストーリー 1: AIレビュー必須設定の確実な動作
**優先順位**: Must-have

As a AI-DLCを使用する開発者
I want to AIレビュー必須設定が確実に機能する
So that 品質管理が確実に行われる

**受け入れ基準**:
- [ ] `mode = "required"` 設定時にAIレビューが必ず実行される
- [ ] MCP利用可否の判定が明確に行われる
- [ ] 設定読み込みのためのコマンドが各プロンプトに明示されている

**技術的考慮事項**:
- prompts/package/prompts/*.md のAIレビュー優先ルールセクションを修正
- 設定確認のための具体的なコマンドを追加

---

### ストーリー 2: macOS環境での正常動作
**優先順位**: Must-have

As a macOSを使用する開発者
I want to setup.mdのスクリプトがmacOSで正常に動作する
So that 環境に依存せずAI-DLCを利用できる

**受け入れ基準**:
- [ ] GNU grep固有のオプション（`-oP`）が使用されていない
- [ ] すべてのスクリプトがPOSIX互換である
- [ ] macOS標準環境でエラーなく実行できる

**技術的考慮事項**:
- `grep -oP` を `grep -E | sed` または `awk` に置き換え
- 全プロンプトファイルを確認

---

### ストーリー 3: UnitブランチでのドラフトPR自動作成
**優先順位**: Must-have

As a Construction Phaseを実行する開発者
I want to Unitブランチ作成時にドラフトPRが自動作成される
So that PR単位でのレビューが容易になる

**受け入れ基準**:
- [ ] Unitブランチ作成時にドラフトPR作成が案内される
- [ ] PRタイトルとボディが自動生成される
- [ ] GitHub CLI利用不可時は手動作成の案内が表示される

**技術的考慮事項**:
- construction.md のステップ6を修正
- PR作成コマンドを追加

---

## Epic 2: 機能改善（中優先度）

### ストーリー 4: markdownlintルールの有効化
**優先順位**: Should-have

As a AI-DLCスターターキットのメンテナー
I want to markdownlintの高優先度ルールが有効になっている
So that Markdownドキュメントの品質が向上する

**受け入れ基準**:
- [ ] MD009（末尾スペース）が有効化されている
- [ ] MD034（裸URL）が有効化されている
- [ ] MD040（コードブロック言語指定）が有効化されている
- [ ] 既存ファイルがルールに準拠している

**技術的考慮事項**:
- .markdownlint.json を修正
- 既存Markdownファイルの修正が必要

---

### ストーリー 5: スターターキット開発リポジトリでのアップグレード案内スキップ
**優先順位**: Should-have

As a AI-DLCスターターキット自体の開発者
I want to 開発リポジトリでアップグレード案内が表示されない
So that 混乱なく開発を進められる

**受け入れ基準**:
- [ ] プロジェクト名が `ai-dlc-starter-kit` の場合、アップグレード案内をスキップ
- [ ] スキップ時に適切なメッセージが表示される

**技術的考慮事項**:
- setup.md のステップ1に条件分岐を追加

---

### ストーリー 6: AIエージェントからのAI-DLC認識
**優先順位**: Should-have

As a AIコーディングエージェント（Claude Code等）のユーザー
I want to エージェントがAI-DLCの存在を自動認識する
So that プロンプトファイルのパスを覚えなくて済む

**受け入れ基準**:
- [ ] AGENTS.md にAI-DLC情報が記載されている
- [ ] CLAUDE.md が@AGENTS.mdを参照している
- [ ] 各フェーズの開始方法が記載されている

**技術的考慮事項**:
- AGENTS.md を新規作成
- CLAUDE.md を新規作成

---

### ストーリー 7: 質問時のAskUserQuestion活用
**優先順位**: Should-have

As a Claude Codeを使用する開発者
I want to 質問時に選択肢が提示される
So that 入力負担が軽減され、回答のブレが減る

**受け入れ基準**:
- [ ] CLAUDE.md にAskUserQuestion使用の指示が記載されている
- [ ] 選択肢が明確な場合にAskUserQuestionが使用される

**技術的考慮事項**:
- CLAUDE.md に記載（プロンプトは汎用的に保つ）

---

### ストーリー 8: レビュー前後のGit履歴記録
**優先順位**: Should-have

As a AI-DLCを使用する開発者
I want to レビュー前後の状態がGitに記録される
So that レビュー履歴が追跡可能になる

**受け入れ基準**:
- [ ] レビュー前にコミットが作成される
- [ ] レビュー後（修正反映後）にコミットが作成される
- [ ] コミットメッセージが統一されている

**技術的考慮事項**:
- prompts/package/prompts/*.md のAIレビュー優先ルールにコミット処理を追加

---

## Epic 3: Chore（低優先度）

### ストーリー 9: バックログ移行時の重複警告
**優先順位**: Could-have

As a AI-DLCを使用する開発者
I want to バックログ移行時に同名タイトルの重複が警告される
So that 意図しないスキップに気づける

**受け入れ基準**:
- [ ] 同名ファイルが存在する場合に警告メッセージが表示される
- [ ] 警告には重複ファイル名が含まれる

**技術的考慮事項**:
- setup.md のステップ6に警告表示を追加
