# ドメインモデル: バックログ移行重複警告 (Unit 006)

## 概要

旧形式バックログ（backlog.md）から新形式（backlog/ディレクトリ）への移行時に、重複を検出して警告を表示する機能のドメインモデル。

## ドメイン概念

### 1. BacklogItem（バックログ項目）

旧形式backlog.mdから抽出される各項目。

| 属性 | 説明 |
|------|------|
| title | 項目のタイトル（### 見出し） |
| section | 所属セクション（延期タスク、技術的負債等） |
| content | 項目の本文 |
| generatedFilename | 生成されるファイル名（prefix + slug） |

### 2. DuplicateDetection（重複検出）

移行前に既存ファイルとの重複を検出するプロセス。

**検出ロジック**:
```
重複 = 既存ファイル名 == 生成予定ファイル名
```

**検出タイミング**:
- 各BacklogItemの移行処理前
- ファイル生成直前

### 3. DuplicateWarning（重複警告）

重複検出時にユーザーに表示する警告メッセージ。

**警告の要素**:
| 要素 | 説明 |
|------|------|
| 対象ファイル名 | 重複が検出されたファイル名 |
| 元タイトル | backlog.mdでの項目タイトル |
| アクション | スキップされる旨の説明 |

## 振る舞い

### 重複検出フロー

```
1. BacklogItemからファイル名を生成
2. docs/cycles/backlog/ に同名ファイルが存在するか確認
3. 存在する場合:
   - 警告メッセージを記録
   - 移行をスキップ
4. 存在しない場合:
   - 移行を実行
```

### 警告集約

移行処理完了時に、すべての重複警告を集約して表示。

```
移行が完了しました。

- 移行成功: X件
- スキップ（完了済み）: Y件
- スキップ（重複）: Z件
  - [ファイル名1] (元: [タイトル1])
  - [ファイル名2] (元: [タイトル2])
  ...
```

## 境界

### スコープ内

- 重複検出ロジックの定義
- 警告メッセージフォーマットの定義
- 移行結果サマリへの警告情報追加

### スコープ外

- 自動リネーム機能
- 重複時のマージ機能
- 移行処理自体のロジック変更

## 質問と回答

（なし - 要件が明確なため）

---

**作成日**: 2026-01-08
