# サイクル v1.3.1 バックログ

このファイルはサイクル固有のバックログを管理します。

> 参照: [共通バックログ](../backlog.md) | [完了済み](../backlog-completed.md)

---

## このサイクルで発見した項目

### コミットハッシュ記録に関する注意事項の追加
- **発見日**: 2025-12-11
- **発見フェーズ**: Inception
- **概要**: Unit完了時のコミットハッシュ記録後に --amend や rebase すると記録が無効になる
- **詳細**:
  - Unit完了時に「関連コミット」としてコミットハッシュをUnit定義ファイルに記録する運用がある
  - しかし、記録後に `git commit --amend` や `git rebase` でコミットをまとめると、ハッシュが変わってしまい、記録した値が無効になる
- **対応案**:
  1. テンプレートまたはルールに注意書きを追加: 「コミットハッシュの記録後に --amend や rebase でコミットを変更すると、ハッシュが変わり記録が無効になります。ハッシュ記録後のコミット変更は避けてください。」
  2. または、運用ルールの明確化: 「コミットハッシュの記録は任意です。記録する場合は別コミットで追記し、そのコミットは変更しないでください。」
- **優先度**: 低

### サイクル終了タイミングの定義明確化
- **発見日**: 2025-12-12
- **発見フェーズ**: Operations
- **概要**: Operations Phaseの「サイクル完了」メッセージがPR作成後に表示されるが、実際にはマージ後がサイクル完了
- **詳細**:
  - 現状: PR作成後に「サイクル完了」メッセージを表示
  - 問題: マージ前なのでサイクルは完了していない
  - サイクルの区切り: PR作成 → PRマージ → mainブランチ移動 → 次サイクル開始
- **対応案**:
  - operations.mdの「サイクル完了」セクションを「PR作成完了」と「サイクル完了（マージ後）」に分離
  - マージ後の手順を明確化
- **優先度**: 中

### Operations Phase「完了時の必須作業」の構造改善
- **発見日**: 2025-12-12
- **発見フェーズ**: Operations
- **概要**: 「完了時の必須作業」に多くの作業が詰め込まれており、構造が不明確
- **詳細**:
  - 現状: README更新、履歴記録、バックログ整理、メタ開発作業、コミット、PR作成が「完了時の必須作業」に含まれる
  - 問題: 作業量が多く、「必須作業」という曖昧な括りで分かりにくい
  - メタ開発特有の作業（version.txt、setup-init）は一般プロジェクトには不要で混乱を招く
- **対応案**:
  1. ステップ6（リリース準備）として独立させる
  2. operations.md（運用引き継ぎ）側にプロジェクト固有の完了作業を定義
  3. バックログ整理はステップ5に統合
- **優先度**: 中

### PRマージ後のブランチ削除をオペレーションルールに追加
- **発見日**: 2025-12-12
- **発見フェーズ**: Operations
- **概要**: PRマージ後にマージ済みブランチを削除するルールを明確化する
- **詳細**:
  - 現状: operations.md の「PRマージ後の手順」でブランチ削除は「任意」となっている
  - 改善: ブランチ削除を標準手順として明記し、リポジトリの整理を促進
- **対応案**:
  - operations.md または prompts/package/prompts/operations.md の「PRマージ後の手順」を更新
  - ブランチ削除を標準手順に変更（ローカル・リモート両方）
- **優先度**: 低

### 作業中の割り込み対応ルールの明確化
- **発見日**: 2025-12-11
- **発見フェーズ**: Inception
- **概要**: 作業中にユーザーから追加要望があった場合、適切に分類して対応すべき
- **詳細**:
  - 現状: AIが割り込み要望に対して即時実装に寄りがち
  - 問題: 全ての要望を即時実装すると計画が崩れる
  - 要望の分類（特にConstruction Phase中）:
    1. **関係ない案件** → バックログに記録して後回し
    2. **関係あるけど、今じゃない案件** → バックログに記録、次サイクル等で検討
    3. **関係あるので、Unitには追加するけど、今すぐ実行しない案件** → 現在のUnit定義に追加、実装は後で
    4. **関係あるし、それが前提なのですぐにやる案件** → 即時実装
- **対応案**:
  - Construction Phaseのプロンプトに割り込み対応フローを追加
  - 要望を受けたら、まず上記4分類のどれに該当するか確認する手順を明記
  - 分類1〜3の場合は即時実装せず、適切な場所に記録
- **優先度**: 中

---

## 共通バックログから対応する項目

### バックログ項目の対応済みチェックをInception Phaseで実施
- **元の場所**: docs/cycles/backlog.md
- **転記日**: 2025-12-11
- **対応予定**: Unit 1

### ツールキットアップグレード以外はセットアップをスキップ可能にする
- **元の場所**: docs/cycles/backlog.md
- **転記日**: 2025-12-11
- **対応予定**: Unit 2

### Inception PhaseでDependabot PRの対応を確認する
- **元の場所**: docs/cycles/backlog.md
- **転記日**: 2025-12-11
- **対応予定**: Unit 3

---

## Operations Phase完了時の処理

このファイルの項目は、Operations Phase完了時に以下のルールで処理されます：

| 出自 | 状態 | 移動先 |
|------|------|--------|
| このサイクルで発見 | 対応済み | backlog-completed.md |
| このサイクルで発見 | 未対応 | backlog.md（共通） |
| 共通から転記 | 対応済み | backlog-completed.md（共通から削除） |
| 共通から転記 | 未対応 | 共通に残す（転記を取り消し） |
