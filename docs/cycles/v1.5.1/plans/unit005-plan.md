# Unit 005: セットアッププロンプトの統合・整理 - 実行計画

## 概要

セットアップ関連ファイルの責務を2軸で整理し、重複を排除する。

## 用語の定義

| 用語 | 意味 | 例 |
|------|------|-----|
| **サイクルバージョン** | 開発サイクルの識別子 | v1.5.1 |
| **スターターキットバージョン** | AI-DLCスターターキット自体のバージョン | 1.4.0 |

## 責務の2軸

| 軸 | 責務 | ファイル |
|---|---|---|
| **スターターキットのセットアップ** | 初回導入、アップグレード、移行、aidlc.toml管理、prompts/templates同期、プロジェクトタイプ設定 | `prompts/setup-prompt.md`（統合） |
| **サイクルのセットアップ** | スターターキットバージョン確認、サイクルバージョン決定、ブランチ管理、ディレクトリ作成、履歴初期化 | `prompts/package/prompts/setup.md` |

## 設計方針

### プロジェクト内完結の原則

通常のサイクル開始は `docs/aidlc/prompts/setup.md` だけで完結できるようにする。
スターターキットの `setup-prompt.md` は初回セットアップ/アップグレード時のみ使用。

## 変更内容

### 1. setup-prompt.md と setup-init.md の統合

- `prompts/setup-prompt.md` に `prompts/setup-init.md` の内容を統合
- `prompts/setup-init.md` を削除
- 共通ルールの重複を解消

### 2. プロジェクトタイプ確認の移動

- `setup.md` から「プロジェクトタイプ確認」セクションを削除
- 統合後の `setup-prompt.md` の初回セットアップフローに追加

### 3. setup.md の整理

- 「プロジェクトタイプ確認」セクションを削除
- 「スターターキットバージョン確認」を最初に移動（アップグレード必要時はスターターキットの setup-prompt.md を案内）

## 統合後の構造

```
[スターターキットのセットアップ]
prompts/setup-prompt.md（統合後）
  ├── 実行環境確認
  ├── セットアップ種類判定
  ├── 初回セットアップ（プロジェクトタイプ設定含む）
  ├── アップグレード
  ├── 移行
  └── 完了後 → setup.md へ誘導

[サイクルのセットアップ]
prompts/package/prompts/setup.md
  ├── スターターキットバージョン確認（最初に）
  │     └── アップグレード必要時 → スターターキットの setup-prompt.md を案内
  ├── サイクルバージョン決定
  ├── ブランチ確認
  ├── ディレクトリ作成
  └── 履歴初期化
```

## ファイル変更一覧

| ファイル | 変更内容 |
|----------|----------|
| `prompts/setup-prompt.md` | setup-init.md と統合、プロジェクトタイプ確認を追加 |
| `prompts/setup-init.md` | **削除** |
| `prompts/package/prompts/setup.md` | プロジェクトタイプ確認を削除、スターターキットバージョン確認を最初に移動 |

## Phase 1: 設計

1. ドメインモデル設計: 統合後のファイル構造を定義
2. 論理設計: 具体的な変更内容を定義
3. 設計レビュー: ユーザー承認

## Phase 2: 実装

1. setup-prompt.md の統合版を作成
2. setup-init.md を削除
3. setup.md を整理（プロジェクトタイプ確認削除、バージョン確認移動）
4. 動作確認
