# 追加ルール

プロジェクト固有の追加ルールや制約を記載します。

各フェーズの開始時に必ず読み込んでください。

---

## 実行前の検証ルール

### Codex MCP レビュー（該当する場合）

重要な変更の前にレビューを実施してください：
- 新規ファイル作成
- 大規模なリファクタリング
- アーキテクチャ変更
- セキュリティに関わる変更

### 指示の妥当性検証

実行前に以下を確認：
1. 目的は明確か？
2. 影響範囲は考慮されているか？
3. リスクは特定されているか？
4. より良い方法はないか？

---

## フェーズ固有のルール

### Inception Phase

- 最小限の情報で開始（詳細は後で明らかになる）
- Unit サイズは 1〜2週間で実装できる程度
- Unit 間の依存関係を最小化

### Construction Phase

- ユビキタス言語の使用（DDD）
- セキュリティ第一（実装前にリスク評価）
- 小さなコミット（意味のある単位で頻繁にコミット）
- テストカバレッジ目標: 80% 以上

### Operations Phase

- 段階的デプロイ（ステージング → 本番）
- ロールバック準備を必ず用意
- アラート疲れの防止（重要なアラートのみ）

---

## 禁止事項

### 絶対に禁止

- 機密情報のコミット（`.env`, `credentials.json`等）
- 本番データの使用（開発環境で）
- 承認なしの本番環境への変更
- force push（main/masterブランチへ）

### 推奨しない

- 大きすぎる変更（1つのPRで複数機能）
- テストなしのコード
- ドキュメントなしの変更

---

## カスタムワークフロー

### 緊急バグ修正フロー

1. インシデント宣言
2. `hotfix/` ブランチ作成
3. 最小限の修正
4. テスト
5. 緊急デプロイ（承認後）
6. 事後対応（根本原因分析、ドキュメント化）

---

## プロジェクト固有のルール

必要に応じて追加・更新してください。

### コーディング規約

Inception Phase で決定後、ここに記載。

### ブランチ戦略

- **main**: 本番環境
- **feature/***: 機能開発
- **hotfix/***: 緊急修正

---

## ルールの更新

プロジェクトの進行に伴って継続的に更新してください。

**更新履歴**:
- 2025-11-08: 初版作成
