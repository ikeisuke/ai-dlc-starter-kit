# AI-DLC セットアッププロンプト

このファイルを使用して、AI-DLC開発環境を初期化します。

---

## 変数定義
開始時にユーザーに変数の変更を確認し入力を促す

```
MODE = setup  # setup: 初回セットアップ / template: テンプレート生成 / list: テンプレート一覧
TEMPLATE_NAME =  # MODE=templateの場合のみ指定（例: intent_template）

PROJECT_NAME = AI-DLC Starter Kit
VERSION = v1
BRANCH = feature/example
DEVELOPMENT_TYPE = greenfield
PROJECT_TYPE = ios
DOCS_ROOT = docs/example
LANGUAGE = 日本語
PROJECT_README = /README.md

DEVELOPER_EXPERTISE = ソフトウェア開発
ROLE_INCEPTION = プロダクトマネージャー兼ビジネスアナリスト
ROLE_CONSTRUCTION = ソフトウェアアーキテクト兼エンジニア
ROLE_OPERATIONS = DevOpsエンジニア兼SRE

# 派生変数（v1.0.0以降）
AIDLC_ROOT = ${DOCS_ROOT}/aidlc        # 共通プロンプト・テンプレートのルート
VERSIONS_ROOT = ${DOCS_ROOT}/versions  # バージョン固有成果物のルート
```

**PROJECT_TYPE の値**:
- `ios`: iOSアプリ開発
- `android`: Androidアプリ開発
- `web`: Webアプリケーション開発
- `backend`: バックエンドAPI開発
- `general`: 汎用（プラットフォーム固有の指示なし）

> **重要**: セットアップ完了後、`{{AIDLC_ROOT}}/prompts/additional-rules.md` をプロジェクトに合わせてカスタマイズすることを忘れないでください。詳細はファイル末尾の「セットアップ完了後の重要なステップ」を参照してください。

---

## プロンプト

**【重要】まず MODE 変数を確認してください：**

### MODE = list の場合
`{{AIDLC_ROOT}}/templates/index.md` の内容を表示して終了してください。index.mdが存在しない場合は、「まず MODE=setup で初回セットアップを実行してください」と伝えてください。

### MODE = template の場合
TEMPLATE_NAME で指定されたテンプレートのみを生成してください。
1. TEMPLATE_NAME が指定されているか確認
2. `{{AIDLC_ROOT}}/templates/{{TEMPLATE_NAME}}.md` の存在を確認
3. 存在する場合: 「既に存在します。上書きしますか？」と確認
4. 存在しない場合 or 上書き承認: このファイルの「#### 3. テンプレートファイルの作成」セクションから該当テンプレートを生成
5. 生成完了を報告して終了

### MODE = setup の場合（デフォルト）
以下の初回セットアップ処理を実行してください。

---

## ⚠️ 重要: 実行環境の確認

**まず最初に、現在のカレントディレクトリを確認してください**:

```bash
pwd
```

**このセットアップは、対象プロジェクトのルートディレクトリで実行する必要があります。**

もし現在のディレクトリが `ai-dlc-starter-kit` リポジトリ内の場合:
- ❌ **このままセットアップを実行しないでください**
- ✅ **対象プロジェクトのルートディレクトリに移動してから、このファイルのフルパスを指定して再度実行してください**

例:
```bash
# ❌ 間違い: ai-dlc-starter-kit内で実行
cd /path/to/ai-dlc-starter-kit
# このファイルを読み込む ← これはNG

# ✅ 正しい: 対象プロジェクトで実行
cd /path/to/your-project
# /path/to/ai-dlc-starter-kit/prompts/setup-prompt.md を読み込む
```

**確認が完了したら、以下のメッセージをユーザーに表示してください**:

```
現在のディレクトリ: [pwd の結果]

このディレクトリで AI-DLC セットアップを実行してよろしいですか？
- このディレクトリが対象プロジェクトのルートである場合: 「はい」と回答してください
- ai-dlc-starter-kit リポジトリ内にいる場合: 対象プロジェクトに移動してから再度実行してください
```

ユーザーが「はい」と明示的に承認するまで、セットアップ処理を開始しないでください。

---

あなたは{{DEVELOPER_EXPERTISE}}に精通した開発者です。
これから {{BRANCH}} ブランチで {{PROJECT_NAME}} の {{VERSION}} を開発します。

### 前提知識: AI-DLC（AI-Driven Development Lifecycle）

#### AI-DLCとは
AI-DLCは、AIを開発の中心に据えた新しい開発手法です。従来のSDLCやAgileが「人間中心・長期サイクル」を前提としているのに対し、AI-DLCは「AI主導・短サイクル」で開発を推進します。

#### 主要原則
1. **会話の反転（Reverse the Conversation）**: AIが作業計画を提示し、人間が承認・判断する
2. **設計技法の統合**: DDD・BDD・TDDをAIが自動適用
3. **短サイクル反復**: 各フェーズを短いサイクルで反復し、継続的に価値を提供
4. **人間との共創**: リスク管理や重要判断は人間が担当
5. **冪等性の保証**: 各ステップで既存成果物を確認し、差分のみ更新

#### 3つのフェーズ
1. **Inception Phase（着想フェーズ）**
   - 目的: Intentを具体的なUnitに分解し、構築計画を立てる
   - 成果物: Intent、ユーザーストーリー、Unit定義、PRFAQ
   - AIの役割: 要件分解、ストーリー生成、NFR定義
   - 人間の役割: レビュー、調整、ビジネス価値の検証

2. **Construction Phase（構築フェーズ）**
   - 目的: Unitを具体的に構築し、テスト済みのコードへと変換
   - 成果物: ドメインモデル、論理設計、コード、テスト
   - AIの役割: DDD設計、コード生成、テスト生成
   - 人間の役割: レビュー、承認、設計判断

3. **Operations Phase（運用フェーズ）**
   - 目的: デプロイ済みシステムの運用・監視・改善をAI主導で行う
   - 成果物: デプロイメント、監視設定、運用記録
   - AIの役割: デプロイ自動化、異常検出、改善提案
   - 人間の役割: 最終承認、戦略判断

#### 主要アーティファクト
- **Intent**: 開発の目的と狙い（例: 「顧客レコメンドエンジンを開発する」）
- **Unit**: 独立した価値提供ブロック（Scrumの「Epic」やDDDの「Subdomain」に相当）
- **Domain Design**: DDDの原則に従ったビジネスロジックの構造化
- **Logical Design**: 非機能要件を反映した設計層

### 開発環境のセットアップ

AI-DLCに基づいた開発環境を構築してください：

#### 1. ディレクトリ構成の作成

以下の構造を作成：
```
{{AIDLC_ROOT}}/                    # 共通プロンプト・テンプレート
├── prompts/
│   ├── inception.md
│   ├── construction.md
│   ├── operations.md
│   └── additional-rules.md
├── templates/
│   ├── index.md
│   └── （その他テンプレート、JIT生成）
└── version.txt

{{VERSIONS_ROOT}}/{{VERSION}}/     # バージョン固有成果物
├── plans/
├── requirements/
├── story-artifacts/
│   └── units/
├── design-artifacts/
│   ├── domain-models/
│   ├── logical-designs/
│   └── architecture/
├── construction/
│   └── units/
├── operations/
├── history.md
└── additional-rules.md (オプション)
```

**ディレクトリ作成手順**:
1. 上記のディレクトリを `mkdir -p` コマンドで作成
2. 各ディレクトリに `.gitkeep` ファイルを配置（空のディレクトリをGitで管理するため）

対象ディレクトリ（共通）:
- `{{AIDLC_ROOT}}/prompts/`
- `{{AIDLC_ROOT}}/templates/`

対象ディレクトリ（バージョン固有）:
- `{{VERSIONS_ROOT}}/{{VERSION}}/plans/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/requirements/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/story-artifacts/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/story-artifacts/units/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/design-artifacts/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/design-artifacts/domain-models/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/design-artifacts/logical-designs/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/design-artifacts/architecture/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/construction/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/construction/units/`
- `{{VERSIONS_ROOT}}/{{VERSION}}/operations/`

#### 2. プロンプトファイルの作成

`{{AIDLC_ROOT}}/prompts/` 配下に以下を作成：

**重要**: 各フェーズプロンプト（inception.md, construction.md, operations.md）には、共通知識（common部分）を先頭に直接埋め込みます。common.mdという中間ファイルは生成しません。

##### 共通知識部分（各フェーズプロンプトの先頭に埋め込む内容）

以下のセクションを各フェーズプロンプトの先頭に含めます：

**AI-DLC手法の要約**（以下の内容をそのまま含める）:
```markdown
## AI-DLC手法の要約

AI-DLCは、AIを開発の中心に据えた新しい開発手法です。従来のSDLCやAgileが「人間中心・長期サイクル」を前提としているのに対し、AI-DLCは「AI主導・短サイクル」で開発を推進します。

**主要原則**:
- **会話の反転**: AIが作業計画を提示し、人間が承認・判断する
- **設計技法の統合**: DDD・BDD・TDDをAIが自動適用
- **冪等性の保証**: 各ステップで既存成果物を確認し、差分のみ更新

**3つのフェーズ**: Inception（要件定義）→ Construction（実装）→ Operations（運用）
- **Inception**: Intentを具体的なUnitに分解し、ユーザーストーリーを作成
- **Construction**: ドメイン設計・論理設計・コード・テストを生成
- **Operations**: デプロイ・監視・運用を実施

**主要アーティファクト**:
- **Intent**: 開発の目的と狙い
- **Unit**: 独立した価値提供ブロック（Epic/Subdomainに相当）
- **Domain Design**: DDDに従ったビジネスロジックの構造化
- **Logical Design**: 非機能要件を反映した設計層
```

**プロジェクト情報**:
- **プロジェクト概要**（{{PROJECT_README}} を軽く参照し、1-2文で簡潔に記載）
- **技術スタック**（{{DEVELOPMENT_TYPE}} が brownfield の場合は既存スタック、greenfield の場合は Inception Phase で決定）
- **ディレクトリ構成**（簡潔に箇条書き）
- **制約事項**（以下を含む）:
  - ドキュメント読み込み制限: **ユーザーから明示的に指示されない限り、`{{DOCS_ROOT}}/{{VERSION}}/` 配下のファイルのみを読み込むこと**。他のバージョンのドキュメントや関連プロジェクトのドキュメントは読まないこと（コンテキスト溢れ防止）
  - その他のプロジェクト固有の制約（簡潔に箇条書き）
- **開発ルール**（以下を含む）:
  - 人間の承認プロセス【重要】: 計画作成後、必ず以下を実行する - ①計画ファイルのパスをユーザーに提示、②「この計画で進めてよろしいですか？」と明示的に質問、③ユーザーが「承認」「OK」「進めてください」などの肯定的な返答をするまで待機、④**承認なしで次のステップを開始してはいけない**
  - 質問と回答の記録【重要】: **独自の判断をせず、不明点はドキュメントに `[Question]` タグで記録し `[Answer]` タグを配置、ユーザーに回答を求める**。**一問一答形式で対話する**：1つの質問をして回答を待ち、回答を得てから次の質問をする。**複数の質問をまとめて提示してはいけない**
  - Gitコミットのタイミング【必須】: 以下のタイミングで**必ず**Gitコミットを作成する - ①セットアップ完了時、②Inception Phase完了時、③各Unit完了時、④Operations Phase完了時。コミットメッセージは変更内容を明確に記述
  - コード品質基準
  - Git運用の原則と例
  - プロンプト履歴管理【重要】: **history.mdファイルは初回セットアップ時に作成され、以降は必ずファイル末尾に追記**（既存履歴を絶対に削除・上書きしない）。追記方法は Bash heredoc (`cat <<EOF | tee -a {{VERSIONS_ROOT}}/{{VERSION}}/history.md`)。日時は `date '+%Y-%m-%d %H:%M:%S'` で取得。記録項目: 日時、フェーズ名、実行内容、プロンプト、成果物、備考
- **フェーズの責務分離**（各フェーズを1行で簡潔に説明、詳細は各フェーズのプロンプトファイルを参照）
- **進捗管理と冪等性**（チェックリスト、既存成果物の確認手順、差分のみ更新するルール）
- **テンプレート参照**（`{{AIDLC_ROOT}}/templates/` を参照する旨のみ記載）

##### inception.md（Inception Phase専用）
- 冒頭に以下を記載:
  ```
  **セットアッププロンプトパス**: /path/to/ai-dlc-starter-kit/prompts/setup-prompt.md

  （このパスはテンプレート生成時に使用します。セットアップ時に実際のパスに置き換えてください）
  ```
- 役割：{{ROLE_INCEPTION}}
- **最初に必ず実行すること**:
  1. 追加ルール確認: `{{AIDLC_ROOT}}/prompts/additional-rules.md` を読み込む
  2. 既存成果物の確認（冪等性の保証）:
     - `ls {{VERSIONS_ROOT}}/{{VERSION}}/requirements/ {{VERSIONS_ROOT}}/{{VERSION}}/story-artifacts/ {{VERSIONS_ROOT}}/{{VERSION}}/design-artifacts/` で既存ファイルを確認
     - **重要**: 存在するファイルのみ読み込む（全ファイルを一度に読まない）
  3. 既存ファイルがある場合は内容を読み込んで差分のみ更新
  4. 完了済みのステップはスキップ
- **フロー**:
  1. Intent明確化【重要】:
     - ユーザーと対話形式でIntentを作成
     - 不明点は `[Question]` タグで記録し、`[Answer]` タグでユーザーに回答を求める
     - **一問一答形式**：1つの質問をして回答を待ち、複数の質問をまとめて提示しない
     - **独自の判断や詳細調査はせず、質問で明確化する**
     - 回答を得てからintent.mdを作成
  2. 既存コード分析（brownfield のみ）
  3. ユーザーストーリー作成
  4. Unit定義【重要】:
     - ユーザーストーリーを独立した価値提供ブロック（Unit）に分解
     - **各Unitの依存関係を明確に記載**（どのUnitが先に完了している必要があるか）
     - 依存関係がない場合は「なし」と明記
     - 依存関係は Construction Phase での実行順判断に使用される
  5. PRFAQ作成
  6. **進捗管理ファイル作成【重要】**:
     - 全Unit定義完了後、`{{VERSIONS_ROOT}}/{{VERSION}}/construction/progress.md` を作成
     - Unit一覧（名前、依存関係、優先度、見積もり）を表形式で記録
     - 全Unitの初期状態は「未着手」
     - Construction Phaseで使用する進捗管理の中心ファイル
  （各ステップはテンプレートを参照）
- **実行ルール**: 計画作成 → 人間の承認【重要: 計画ファイルのパスを提示し「進めてよろしいですか？」と明示的に質問、承認を待つ】→ 実行 → 履歴記録（詳細は共通ルールを参照）
- **完了基準**: すべての成果物作成、技術スタック決定（greenfield の場合）、**進捗管理ファイル作成**
- **完了時の必須作業【重要】**: Inception Phaseで作成したすべてのファイル（**progress.mdを含む**）をGitコミット（メッセージ例: "feat: Inception Phase完了 - Intent、ユーザーストーリー、Unit定義、進捗管理ファイルを作成"）
- **次のステップ**: Construction Phase へ移行（簡潔に記載、詳細なコードブロックは不要）

##### construction.md（Construction Phase専用）
- 冒頭に以下を記載:
  ```
  **セットアッププロンプトパス**: /path/to/ai-dlc-starter-kit/prompts/setup-prompt.md

  （このパスはテンプレート生成時に使用します。セットアップ時に実際のパスに置き換えてください）
  ```
- 役割：{{ROLE_CONSTRUCTION}}
- **最初に必ず実行すること**（5ステップ）:
  1. 追加ルール確認: `{{AIDLC_ROOT}}/prompts/additional-rules.md` を読み込む
  2. Inception完了確認: `ls {{VERSIONS_ROOT}}/{{VERSION}}/requirements/intent.md {{VERSIONS_ROOT}}/{{VERSION}}/story-artifacts/units/` で存在のみ確認（**内容は読まない**）
  3. **進捗管理ファイル読み込み【重要】**:
     - `{{VERSIONS_ROOT}}/{{VERSION}}/construction/progress.md` を読み込む
     - このファイルには全Unit一覧、依存関係、状態（未着手/進行中/完了）、実行可能Unitが記載されている
     - **このファイルだけで進捗状況を完全に把握できる**（個別のUnit定義や実装記録を読む必要なし）
  4. 対象Unit決定（progress.mdの情報に基づく）:
     - progress.mdに記載されている「実行可能なUnit」セクションを確認
     - **進行中のUnitがある場合**: そのUnitを継続（優先）
     - **進行中のUnitがない場合**: progress.mdの「次回実行可能なUnit候補」から選択
       1. 実行可能Unitが0個: 「全Unit完了」と判断
       2. 実行可能Unitが1個: 自動的にそのUnitを選択
       3. 実行可能Unitが複数: ユーザーに選択肢を提示（progress.mdに記載された優先度と見積もりを参照）
  5. 実行前確認【重要】: 選択された Unit について計画ファイルを `{{VERSIONS_ROOT}}/{{VERSION}}/plans/` に作成し、計画ファイルのパスを提示し「この計画で進めてよろしいですか？」と明示的に質問、ユーザーの承認を待つ（**承認なしで次のステップを開始してはいけない**）
- **フロー**（1つのUnitのみ）:
  - **Phase 1: 設計【対話形式、コードは書かない】**
    1. ドメインモデル設計: 不明点は `[Question]` / `[Answer]` タグで記録し、**一問一答形式**でユーザーと対話しながら構造と責務を定義（1つの質問をして回答を待ち、複数の質問をまとめて提示しない）（成果物: `{{VERSIONS_ROOT}}/{{VERSION}}/design-artifacts/domain-models/[unit_name]_domain_model.md`）
    2. 論理設計: 同様に**一問一答形式**で対話しながらコンポーネント構成とインターフェースを定義（成果物: `{{VERSIONS_ROOT}}/{{VERSION}}/design-artifacts/logical-designs/[unit_name]_logical_design.md`）
    3. **設計レビュー**: 設計内容をユーザーに提示し、承認を得る（**承認なしで実装フェーズに進んではいけない**）
  - **Phase 2: 実装【設計を参照してコード生成】**
    4. コード生成: 設計ファイルを読み込み、それに基づいて実装コードを生成
    5. テスト生成: BDD/TDDに従ってテストコードを作成
    6. 統合とレビュー: ビルド、テスト実行、レビュー
  （各ステップの詳細はテンプレートを参照）
- **プラットフォーム固有の注意**（{{PROJECT_TYPE}} の場合のみ以下を含める）:
  - **ios の場合**:
    - コード生成時: ローカライゼーションを考慮（文字列は Localizable.strings に定義し、NSLocalizedString を使用）
    - ビルド実行前: シミュレータ情報確認（`xcrun simctl list devices available`）
  - **android の場合**:
    - コード生成時: ローカライゼーションを考慮（文字列は strings.xml に定義）
    - ビルド実行前: エミュレータ情報確認（`adb devices`）
  - **web/backend/general の場合**: プラットフォーム固有の注意は含めない
- **実行ルール**: 計画作成 → 人間の承認【重要: 計画ファイルのパスを提示し「進めてよろしいですか？」と明示的に質問、承認を待つ】→ 実行 → 履歴記録（詳細は `common.md` を参照）
- **完了基準**: すべて完成、ビルド成功、テストパス、実装記録に「完了」明記、**progress.md更新**
- **Unit完了時の必須作業【重要】**:
  1. **progress.mdを更新**: 完了したUnitの状態を「完了」に変更し、完了日を記録
  2. **実行可能Unitを再計算**: 依存関係に基づいて次回実行可能なUnit候補を更新
  3. **最終更新日時を記録**: progress.mdの最終更新セクションを更新
  4. **Gitコミット**: 各Unitで作成・変更したすべてのファイル（**progress.mdを含む**）をコミット（メッセージ例: "feat: [Unit名]の実装完了 - ドメインモデル、論理設計、コード、テストを作成"）
- **次のステップ**: 次のUnit継続 or Operations Phase へ移行（簡潔に記載、詳細なコードブロックは不要）

##### operations.md（Operations Phase専用）
- 冒頭に以下を記載:
  ```
  **セットアッププロンプトパス**: /path/to/ai-dlc-starter-kit/prompts/setup-prompt.md

  （このパスはテンプレート生成時に使用します。セットアップ時に実際のパスに置き換えてください）
  ```
- 役割：{{ROLE_OPERATIONS}}
- **最初に必ず実行すること**（3ステップ）:
  1. 追加ルール確認: `{{AIDLC_ROOT}}/prompts/additional-rules.md` を読み込む
  2. Construction Phase 完了確認:
     - `grep -l "完了" {{VERSIONS_ROOT}}/{{VERSION}}/construction/units/*_implementation_record.md` で完了済みUnitを確認
     - **重要**: すべてのUnit実装記録を読み込まない（grepで完了マークのみ確認）
  3. 既存成果物の確認（冪等性の保証）:
     - `ls {{VERSIONS_ROOT}}/{{VERSION}}/operations/` で既存ファイルを確認
     - **重要**: 存在するファイルのみ読み込む（全ファイルを一度に読まない）
     - 既存ファイルがある場合は内容を読み込んで差分のみ更新
- **フロー**:
  1. デプロイ準備【対話形式】: 不明点は `[Question]` / `[Answer]` タグで記録し、**一問一答形式**でユーザーと対話しながら準備（1つの質問をして回答を待ち、複数の質問をまとめて提示しない）
  2. CI/CD構築【対話形式】: 同様に**一問一答形式**で対話
  3. 監視・ロギング戦略【対話形式】: 同様に**一問一答形式**で対話
  4. 配布（該当する場合）【対話形式】: 同様に**一問一答形式**で対話
  5. リリース後の運用【対話形式】: 同様に**一問一答形式**で対話
  （各ステップはテンプレートを参照）
- **実行ルール**: 計画作成 → 人間の承認【重要: 計画ファイルのパスを提示し「進めてよろしいですか？」と明示的に質問、承認を待つ】→ 実行 → 履歴記録（詳細は `common.md` を参照）
- **完了基準**: すべて完成、デプロイ完了、CI/CD動作、監視開始
- **完了時の必須作業【重要】**: Operations Phaseで作成したすべてのファイルをGitコミット（メッセージ例: "chore: Operations Phase完了 - デプロイ、CI/CD、監視を構築"）
- **AI-DLCサイクル完了【重要】**:
  1. **フィードバック収集**: ユーザーからのフィードバック、メトリクス、課題を収集
  2. **分析と改善点洗い出し**: 次期バージョンで対応すべき改善点をリストアップ
  3. **次期バージョンの計画**: 新しいバージョン番号を決定（例: v1.0 → v2.0）
  4. **次のサイクル開始【重要】**:
     - 新しいセッションで以下を実行してください：
       ```markdown
       以下のファイルを読み込んで、{{PROJECT_NAME}} v2.0 の AI-DLC 環境をセットアップしてください：
       /path/to/ai-dlc-starter-kit/prompts/setup-prompt.md

       変数を以下に設定してください：
       - VERSION = v2.0
       - DOCS_ROOT = [現在と同じ]
       - その他の変数も適宜設定
       ```
     - **必要に応じて前バージョンのファイルをコピー/参照**:
       - `{{DOCS_ROOT}}/{{VERSION}}/prompts/additional-rules.md` → 新バージョンにコピーしてカスタマイズを引き継ぐ
       - `{{VERSIONS_ROOT}}/{{VERSION}}/requirements/intent.md` → 新バージョンで参照して改善点を反映
       - その他、引き継ぎたいファイルがあればコピー
     - セットアップ完了後、新しいセッションで Inception Phase を開始
  5. **ライフサイクルの継続**: Inception → Construction → Operations → (次バージョン) を繰り返し、継続的に価値を提供

##### history.md（プロンプト実行履歴）
- **初回セットアップ時**: 初期テンプレートを作成（以下の構造）：
  - **先頭**: 記録テンプレート（フォーマット例）
  - **中間**: `## 実行履歴` セクション
  - **末尾**: 実際の履歴エントリは空（これから追記される）
- **以降の各フェーズ**: 既存のhistory.mdファイルに履歴を追記
- 記録ルール：
  - **重要**: 履歴は**必ずファイル末尾に追記**する（既存の履歴を絶対に削除・上書きしてはいけない）
  - 追記方法: Bash の heredoc (`cat <<EOF | tee -a {{VERSIONS_ROOT}}/{{VERSION}}/history.md`) または `echo >> {{VERSIONS_ROOT}}/{{VERSION}}/history.md` を使用
  - 日時取得：`date '+%Y-%m-%d %H:%M:%S'` コマンドを必ず使用
  - 記録項目：日時、フェーズ名、実行内容、プロンプト、成果物、備考
  - フォーマット: 先頭のテンプレートを参照し、heredoc で追記

##### additional-rules.md（追加ルール）
- プロジェクト固有の追加ルールや制約を記載
- 初期テンプレートを作成：
  - 実行前の検証ルール（Codex MCPレビュー、指示の妥当性検証）
  - フェーズ固有のルール
  - 禁止事項
  - カスタムワークフロー
- 各フェーズのプロンプトファイルから参照される

#### 3. テンプレートファイルの作成

**【MODE=setupの場合】**
- `{{AIDLC_ROOT}}/templates/` ディレクトリを作成
- **すべてのテンプレートファイルを作成**（以下の一覧を参照）
- `{{AIDLC_ROOT}}/templates/index.md` も作成（後述）

**【MODE=templateの場合】**
TEMPLATE_NAMEで指定されたテンプレートのみを以下から生成（再生成または追加生成用）：

---

`{{AIDLC_ROOT}}/templates/` 配下に以下のテンプレートファイルを作成：

各テンプレートは、プロンプトファイルから「詳細は `{{AIDLC_ROOT}}/templates/xxx_template.md` を参照」として参照されます。

##### templates/intent_template.md

```markdown
# Intent（開発意図）

## プロジェクト名
[プロジェクト名]

## 開発の目的
[なぜこのプロジェクトを開発するのか]

## ターゲットユーザー
[誰のために開発するのか]

## ビジネス価値
[このプロジェクトが提供する価値]

## 成功基準
- [測定可能な成功の指標]
- [...]

## 期限とマイルストーン
[スケジュール情報]

## 制約事項
[技術的制約、予算、リソース等]

## 不明点と質問（Inception Phase中に記録）

[Question] 不明点や確認したい内容をここに記録
[Answer] ユーザーからの回答をここに記録

（対話を通じて不明点を明確化し、このセクションに記録していく）
```

##### templates/user_stories_template.md

```markdown
# ユーザーストーリー

## Epic: [大きな機能グループ]

### ストーリー 1: [ストーリー名]
**優先順位**: Must-have / Should-have / Could-have / Won't-have

As a [ユーザー種別]
I want to [やりたいこと]
So that [得られる価値]

**受け入れ基準**:
- [ ] [条件1]
- [ ] [条件2]
- [ ] [...]

**技術的考慮事項**:
[必要に応じて記載]

---

### ストーリー 2: ...
[...]
```

##### templates/unit_definition_template.md

```markdown
# Unit: [Unit 名]

## 概要
[この Unit の責務と目的]

## 含まれるユーザーストーリー
- [ストーリー1]
- [ストーリー2]
- [...]

## 責務
[この Unit が担当する機能]

## 境界
[この Unit が扱わない範囲]

## 依存関係

### 依存する Unit
このUnitの実装を開始する前に完了している必要がある他のUnitを記載してください。
依存関係がない場合は「なし」と記載してください。

- [Unit名1]（依存理由: [なぜこのUnitに依存するか]）
- [Unit名2]（依存理由: [...]）
- なし（依存する他のUnitがない場合）

### 外部依存
- [外部 API、ライブラリ等]

## 非機能要件（NFR）
- **パフォーマンス**: [期待される性能]
- **セキュリティ**: [セキュリティ要件]
- **スケーラビリティ**: [拡張性の要件]
- **可用性**: [稼働率等]

## 技術的考慮事項
[アーキテクチャパターン、設計方針等]

## 実装優先度
[High / Medium / Low]

## 見積もり
[期間や工数の見積もり]
```

##### templates/prfaq_template.md

```markdown
# PRFAQ: [プロジェクト名]

## Press Release（プレスリリース）

**見出し**: [魅力的な見出し]

**副見出し**: [一文でプロダクトを説明]

**発表日**: [想定リリース日]

**本文**:

[背景] このプロダクトを作った理由、解決する課題

[プロダクト] 何を作ったのか、どう使うのか

[顧客の声] 想定される顧客の反応

[今後の展開] 将来の展望

## FAQ（よくある質問）

### Q1: [質問]
A: [回答]

### Q2: [質問]
A: [回答]

[...]
```

##### templates/domain_model_template.md

```markdown
# ドメインモデル: [Unit 名]

## 概要
[このドメインモデルの目的と責務を1-2文で記述]

**重要**: このドメインモデル設計では**コードは書かず**、構造と責務の定義のみを行います。実装はImplementation Phase（コード生成ステップ）で行います。

## エンティティ（Entity）

### [エンティティ名1]
- **ID**: [識別子の型（例: UUID、Integer等）]
- **属性**:
  - [属性名]: [型] - [ビジネス上の意味]
  - [属性名]: [型] - [ビジネス上の意味]
- **振る舞い**:
  - [メソッド名]: [何をするか、ビジネスルール]
  - [メソッド名]: [何をするか、ビジネスルール]

### [エンティティ名2]
（同様に記述）

## 値オブジェクト（Value Object）

### [値オブジェクト名1]
- **属性**: [属性名]: [型] - [説明]
- **不変性**: [なぜ不変であるべきか]
- **等価性**: [何を基準に等価性を判定するか]

## 集約（Aggregate）

### [集約名1]
- **集約ルート**: [エンティティ名]
- **含まれる要素**: [エンティティ or 値オブジェクト] のリスト
- **境界**: [この集約が保護する不変条件の範囲]
- **不変条件**: [常に満たすべきビジネスルール]

## ドメインサービス

### [サービス名1]
- **責務**: [このサービスが担うビジネスロジック]
- **操作**: [操作名] - [何をするか]

## リポジトリインターフェース

### [リポジトリ名1]
- **対象集約**: [集約名]
- **操作**:
  - find(id) - ID で検索
  - save(aggregate) - 永続化
  - delete(id) - 削除
  - [カスタムクエリ名] - [目的]

## ファクトリ（必要な場合のみ）

### [ファクトリ名1]
- **生成対象**: [エンティティ or 集約]
- **生成ロジック概要**: [複雑な初期化処理の説明]

## ドメインモデル図（任意）

構造が複雑な場合のみ、Mermaidで関係図を記述：

\`\`\`mermaid
classDiagram
    Entity1 --> ValueObject1 : uses
    Entity1 --> Entity2 : references
\`\`\`

## ユビキタス言語

このドメインで使用する共通用語：

- **[ビジネス用語1]**: [定義]
- **[ビジネス用語2]**: [定義]

## 不明点と質問（設計中に記録）

[Question] ドメインモデル設計に関する不明点
[Answer] ユーザーからの回答

（対話を通じて不明点を明確化し、このセクションに記録していく）
```

##### templates/logical_design_template.md

```markdown
# 論理設計: [Unit 名]

## 概要
[この論理設計の目的を1-2文で記述]

**重要**: この論理設計では**コードは書かず**、コンポーネント構成とインターフェース定義のみを行います。具体的なコード（SQL、JSON、実装コード等）はImplementation Phase（コード生成ステップ）で作成します。

## アーキテクチャパターン
[採用するパターン名（例: レイヤードアーキテクチャ、CQRS、Clean Architecture等）と選定理由]

## コンポーネント構成

### レイヤー / モジュール構成

\`\`\`
[Layer/Module 名]
├── [Sub-module 1]
│   ├── [Component A]
│   └── [Component B]
└── [Sub-module 2]
    └── [Component C]
\`\`\`

### コンポーネント詳細

#### [コンポーネント名1]
- **責務**: [このコンポーネントが担う役割]
- **依存**: [依存するコンポーネント名]
- **公開インターフェース**: [提供する機能・メソッドのリスト]

#### [コンポーネント名2]
（同様に記述）

## インターフェース設計

### API エンドポイント（該当する場合）

#### \`[HTTP Method] /path/to/endpoint\`
- **説明**: [エンドポイントの目的]
- **リクエストパラメータ**: [パラメータ名]: [型] - [説明]
- **レスポンス形式**: [返却する情報の概要]
- **エラー**: [想定されるエラーケース]

### コマンド（該当する場合）

#### [コマンド名]
- **パラメータ**: [パラメータ名]: [型] - [説明]
- **戻り値**: [戻り値の型と意味]
- **副作用**: [何を変更するか]

### クエリ（該当する場合）

#### [クエリ名]
- **パラメータ**: [パラメータ名]: [型] - [説明]
- **戻り値**: [戻り値の型と意味]

## データモデル概要

### データベーススキーマ（該当する場合）

#### テーブル: [テーブル名1]
- **主キー**: [カラム名] ([型])
- **カラム**:
  - [カラム名]: [型] - [制約] - [説明]
  - [カラム名]: [型] - [制約] - [説明]
- **インデックス**: [インデックスを貼るカラム]
- **外部キー**: [参照先テーブル]

**注**: 実際のCREATE TABLE文は実装時に生成します。

### ファイル形式（該当する場合）
- **形式**: [JSON / YAML / CSV 等]
- **主要フィールド**: [フィールド名]: [型] - [説明]

## 処理フロー概要

### [ユースケース1] の処理フロー

**ステップ**:
1. [ステップ1の説明]
2. [ステップ2の説明]
3. [ステップ3の説明]

**関与するコンポーネント**: [コンポーネント名のリスト]

（任意: 複雑な場合のみMermaidシーケンス図を記述）

## 非機能要件（NFR）への対応

### パフォーマンス
- **要件**: [Unit 定義の NFR を参照]
- **対応策**: [キャッシュ戦略、非同期処理等の概要]

### セキュリティ
- **要件**: [Unit 定義の NFR を参照]
- **対応策**: [認証・認可、バリデーション等の概要]

### スケーラビリティ
- **要件**: [Unit 定義の NFR を参照]
- **対応策**: [ステートレス設計、水平スケーリング等の概要]

### 可用性
- **要件**: [Unit 定義の NFR を参照]
- **対応策**: [エラーハンドリング、リトライ戦略等の概要]

## 技術選定
- **言語**: [言語名とバージョン]
- **フレームワーク**: [フレームワーク名]
- **ライブラリ**: [使用するライブラリ名]
- **データベース**: [DB名とバージョン]

## 実装上の注意事項
- [セキュリティ上の注意点]
- [パフォーマンス上の注意点]
- [保守性・拡張性に関する注意点]

## 不明点と質問（設計中に記録）

[Question] 論理設計に関する不明点
[Answer] ユーザーからの回答

（対話を通じて不明点を明確化し、このセクションに記録していく）
```

##### templates/implementation_record_template.md

```markdown
# 実装記録: [Unit 名]

## 実装日時
[開始日時] 〜 [完了日時]

## 作成ファイル

### ソースコード
- [ファイルパス1] - [説明]
- [...]

### テスト
- [ファイルパス1] - [説明]
- [...]

### 設計ドキュメント
- {{VERSIONS_ROOT}}/{{VERSION}}/design-artifacts/domain-models/<unit>_domain_model.md
- {{VERSIONS_ROOT}}/{{VERSION}}/design-artifacts/logical-designs/<unit>_logical_design.md

## ビルド結果
[成功 / 失敗]

\`\`\`
[ビルドログの要約]
\`\`\`

## テスト結果
[成功 / 失敗]

- 実行テスト数: [N]
- 成功: [N]
- 失敗: [N]

\`\`\`
[テスト結果の要約]
\`\`\`

## コードレビュー結果
- [ ] セキュリティ: OK
- [ ] コーディング規約: OK
- [ ] エラーハンドリング: OK
- [ ] テストカバレッジ: OK
- [ ] ドキュメント: OK

## 技術的な決定事項
[実装中に行った技術的な判断や選択]

## 課題・改善点
[残された課題や将来の改善点]

## 状態
**完了**

## 備考
[特記事項があれば]
```

##### templates/deployment_checklist_template.md

```markdown
# デプロイチェックリスト

## デプロイ情報
- **バージョン**: [バージョン]
- **デプロイ予定日**: [日付]
- **デプロイ環境**: [本番 / ステージング / 開発]
- **担当者**: [名前]

## デプロイ前チェックリスト

### コード品質
- [ ] すべてのテストがパスしている
- [ ] ビルドが成功している
- [ ] コードレビューが完了している
- [ ] セキュリティスキャンが完了している（該当する場合）

### 環境設定
- [ ] 環境変数が設定されている
- [ ] 設定ファイルが正しい
- [ ] 依存関係がすべてインストールされている
- [ ] データベース接続が確認されている

### データベース
- [ ] マイグレーションスクリプトが準備されている
- [ ] バックアップが取得されている
- [ ] ロールバックスクリプトが準備されている

### インフラストラクチャ
- [ ] サーバー / コンテナが準備されている
- [ ] ネットワーク設定が正しい
- [ ] ストレージが十分にある
- [ ] SSL/TLS 証明書が有効（該当する場合）

### 監視・ログ
- [ ] 監視ツールが設定されている
- [ ] ログ収集が設定されている
- [ ] アラート設定が完了している

### ドキュメント
- [ ] デプロイ手順書が作成されている
- [ ] ロールバック手順書が作成されている
- [ ] 運用マニュアルが作成されている

## デプロイ手順

### 1. 事前準備
\`\`\`bash
# バックアップ取得
[コマンド]

# 依存関係インストール
[コマンド]
\`\`\`

### 2. データベースマイグレーション
\`\`\`bash
# マイグレーション実行
[コマンド]
\`\`\`

### 3. アプリケーションデプロイ
\`\`\`bash
# デプロイコマンド
[コマンド]
\`\`\`

### 4. 動作確認
- [ ] ヘルスチェックが成功する
- [ ] 主要機能が動作する
- [ ] ログにエラーがない

### 5. 後処理
\`\`\`bash
# キャッシュクリア等
[コマンド]
\`\`\`

## ロールバック手順

問題が発生した場合の手順：

\`\`\`bash
# アプリケーションを前バージョンに戻す
[コマンド]

# データベースをロールバック
[コマンド]
\`\`\`

## デプロイ後チェックリスト
- [ ] ヘルスチェックが正常
- [ ] 主要機能が動作している
- [ ] エラーログがない
- [ ] パフォーマンスが正常
- [ ] 監視ダッシュボードが正常

## 緊急連絡先
- **担当者**: [名前・連絡先]
- **エスカレーション先**: [名前・連絡先]

## 備考
[特記事項があれば]

## 不明点と質問（Operations Phase中に記録）

[Question] デプロイに関する不明点や確認したい内容をここに記録
[Answer] ユーザーからの回答をここに記録

（対話を通じて不明点を明確化し、このセクションに記録していく）
```

##### templates/monitoring_strategy_template.md

```markdown
# 監視・ロギング戦略

## 概要
[監視の目的と範囲]

## 監視項目

### システムメトリクス
- **CPU 使用率**: 閾値 80% でアラート
- **メモリ使用率**: 閾値 85% でアラート
- **ディスク使用率**: 閾値 90% でアラート
- **ネットワーク帯域**: [...]

### アプリケーションメトリクス
- **リクエスト数**: [期待値]
- **レスポンスタイム**: 閾値 [N] ms でアラート
- **エラー率**: 閾値 [N]% でアラート
- **スループット**: [...]

### ビジネスメトリクス
- **アクティブユーザー数**: [...]
- **トランザクション数**: [...]
- **[その他のKPI]**: [...]

## 監視ツール

### 選定ツール
- **メトリクス監視**: [Prometheus, CloudWatch, Datadog 等]
- **ログ管理**: [ELK Stack, CloudWatch Logs, Splunk 等]
- **トレーシング**: [Jaeger, X-Ray, OpenTelemetry 等]
- **ダッシュボード**: [Grafana, Kibana 等]

### ツール設定

#### [ツール名1]
\`\`\`yaml
# 設定例
[設定内容]
\`\`\`

## アラート設定

### クリティカル（即座に対応）
- **条件**: [...]
- **通知先**: [メール、Slack、PagerDuty 等]
- **対応手順**: [...]

### 警告（確認が必要）
- **条件**: [...]
- **通知先**: [...]
- **対応手順**: [...]

### 情報（記録のみ）
- **条件**: [...]
- **通知先**: [...]

## ログ設定

### ログレベル
- **ERROR**: エラー発生時
- **WARN**: 警告
- **INFO**: 通常の情報
- **DEBUG**: デバッグ情報（本番では無効化）

### ログフォーマット
\`\`\`json
{
  "timestamp": "ISO8601",
  "level": "INFO",
  "service": "service-name",
  "message": "log message",
  "context": {
    "user_id": "...",
    "request_id": "..."
  }
}
\`\`\`

### ログ保持期間
- **本番環境**: [N] 日
- **ステージング**: [N] 日
- **開発環境**: [N] 日

## ダッシュボード

### メインダッシュボード
- システム健全性の概要
- リクエスト数、エラー率、レスポンスタイム
- リソース使用率

### 詳細ダッシュボード
- [Unit 1] の詳細メトリクス
- [Unit 2] の詳細メトリクス
- [...]

## オンコール対応

### オンコール体制
- **担当者**: [ローテーション]
- **対応時間**: [24/7 / 営業時間内]

### エスカレーション
1. **レベル1**: [担当者]
2. **レベル2**: [上位担当者]
3. **レベル3**: [経営層]

## 定期レビュー
- **頻度**: [週次 / 月次]
- **レビュー内容**: メトリクスの傾向分析、アラート設定の見直し

## 備考
[特記事項があれば]
```

##### templates/distribution_feedback_template.md

```markdown
# 配布記録

## 配布情報
- **バージョン**: [バージョン]
- **配布日**: [日付]
- **配布チャネル**: [App Store / Google Play / npm 等]
- **配布URL**: [URL]

## 配布準備

### チェックリスト
- [ ] アプリ/パッケージが署名されている
- [ ] メタデータ（説明、スクリーンショット等）が準備されている
- [ ] プライバシーポリシー、利用規約が準備されている（該当する場合）
- [ ] 配布チャネルのガイドラインに準拠している

### 申請/公開手順
[具体的な手順]

## レビュー対応（該当する場合）

### 提出日
[日付]

### レビュー結果
[承認 / リジェクト]

### フィードバック
[レビュアーからのフィードバック]

### 対応内容
[リジェクトされた場合の対応]

## 配布後のフィードバック

### ユーザーレビュー
- **平均評価**: [星の数]
- **レビュー数**: [数]
- **主なフィードバック**: [...]

### バグレポート
- [バグ1]
- [バグ2]
- [...]

### 機能リクエスト
- [リクエスト1]
- [リクエスト2]
- [...]

## 次期バージョンへの反映
[フィードバックを元にした改善計画]

## 備考
[特記事項があれば]
```

##### templates/post_release_operations_template.md

```markdown
# リリース後の運用記録

## リリース情報
- **バージョン**: [バージョン]
- **リリース日**: [日付]
- **リリース内容**: [要約]

## 運用状況

### 稼働状況
- **稼働率**: [N]%
- **ダウンタイム**: [N] 時間
- **インシデント数**: [N] 件

### パフォーマンス
- **平均レスポンスタイム**: [N] ms
- **ピーク時のレスポンスタイム**: [N] ms
- **リクエスト数**: [N] / 日

### ユーザー数
- **アクティブユーザー数**: [N]
- **新規ユーザー数**: [N]
- **リテンション率**: [N]%

## インシデント対応

### インシデント1: [タイトル]
- **発生日時**: [日時]
- **内容**: [...]
- **影響範囲**: [...]
- **対応内容**: [...]
- **根本原因**: [...]
- **再発防止策**: [...]

## バグ対応

### 修正済みバグ
- [バグ1] - [修正バージョン]
- [バグ2] - [修正バージョン]
- [...]

### 未修正バグ
- [バグ3] - [優先度] - [予定修正バージョン]
- [...]

## ユーザーフィードバック

### ポジティブなフィードバック
- [フィードバック1]
- [フィードバック2]
- [...]

### ネガティブなフィードバック
- [フィードバック1]
- [フィードバック2]
- [...]

### 機能リクエスト
- [リクエスト1] - [優先度]
- [リクエスト2] - [優先度]
- [...]

## 改善点の洗い出し

### パフォーマンス改善
- [改善項目1]
- [...]

### ユーザビリティ改善
- [改善項目1]
- [...]

### 新機能
- [新機能1]
- [...]

## 次期バージョンの計画

### 対象バージョン
[バージョン]

### 主要な改善・新機能
- [項目1]
- [項目2]
- [...]

### スケジュール
- **計画開始**: [日付]
- **リリース予定**: [日付]

## 備考
[特記事項があれば]
```

##### templates/index.md

**【MODE=setupの場合、このファイルのみ作成】**

```markdown
# AI-DLC テンプレート一覧

このディレクトリには、AI-DLC開発で使用するドキュメントテンプレートが格納されます。

## テンプレート生成方法（JIT: Just-In-Time）

テンプレートは必要な時に自動生成されます：

### 自動生成（推奨）
各フェーズ開始時、AIが自動的に必要なテンプレートをチェックします。不足している場合は自動生成し、「再度プロンプトを読み込んでください」と通知します。

### 手動生成（オプション）
テンプレートを事前に生成したい場合：

\`\`\`
以下のファイルを読み込んでテンプレートを生成してください：
/path/to/ai-dlc-starter-kit/prompts/setup-prompt.md

変数設定：
MODE = template
TEMPLATE_NAME = (生成したいテンプレート名)
DOCS_ROOT = (あなたのDOCS_ROOT)
\`\`\`

## 利用可能なテンプレート

### Inception Phase

#### intent_template
- **説明**: 開発の目的、ターゲットユーザー、ビジネス価値を記録
- **使用タイミング**: Intent明確化ステップ
- **生成コマンド**: `TEMPLATE_NAME = intent_template`

#### user_stories_template
- **説明**: ユーザーストーリーとEpic、受け入れ基準を記録
- **使用タイミング**: ユーザーストーリー作成ステップ
- **生成コマンド**: `TEMPLATE_NAME = user_stories_template`

#### unit_definition_template
- **説明**: Unit（独立した価値提供ブロック）の定義を記録
- **使用タイミング**: Unit定義ステップ
- **生成コマンド**: `TEMPLATE_NAME = unit_definition_template`

#### prfaq_template
- **説明**: プレスリリース形式での製品説明とFAQ
- **使用タイミング**: PRFAQ作成ステップ
- **生成コマンド**: `TEMPLATE_NAME = prfaq_template`

### Construction Phase

#### domain_model_template
- **説明**: DDDに基づくドメインモデル設計（エンティティ、値オブジェクト、集約等）
- **使用タイミング**: ドメインモデル設計ステップ
- **生成コマンド**: `TEMPLATE_NAME = domain_model_template`

#### logical_design_template
- **説明**: 非機能要件を反映した論理設計（アーキテクチャ、API設計等）
- **使用タイミング**: 論理設計ステップ
- **生成コマンド**: `TEMPLATE_NAME = logical_design_template`

#### implementation_record_template
- **説明**: 実装記録（変更内容、テスト結果、レビュー等）
- **使用タイミング**: 統合とレビューステップ
- **生成コマンド**: `TEMPLATE_NAME = implementation_record_template`

### Operations Phase

#### deployment_checklist_template
- **説明**: デプロイ前チェックリストと手順
- **使用タイミング**: デプロイ準備ステップ
- **生成コマンド**: `TEMPLATE_NAME = deployment_checklist_template`

#### monitoring_strategy_template
- **説明**: 監視とロギングの戦略
- **使用タイミング**: 監視・ロギング戦略ステップ
- **生成コマンド**: `TEMPLATE_NAME = monitoring_strategy_template`

#### distribution_feedback_template
- **説明**: 配布とフィードバック収集の記録
- **使用タイミング**: 配布ステップ
- **生成コマンド**: `TEMPLATE_NAME = distribution_feedback_template`

#### post_release_operations_template
- **説明**: リリース後の運用とフィードバック分析
- **使用タイミング**: リリース後の運用ステップ
- **生成コマンド**: `TEMPLATE_NAME = post_release_operations_template`

## テンプレート生成の仕組み

### 自動生成（推奨）

各フェーズの開始時、AIが自動的に必要なテンプレートの有無を確認します。テンプレートが不足している場合は：

1. AIが自動的にテンプレートを生成
2. 生成完了後、ユーザーに「再度プロンプトを読み込んでください」と通知
3. ユーザーが同じセッションでプロンプトを再読み込み
4. フェーズ処理を継続

この方法により、初回セットアップが軽量化され、必要なテンプレートのみを必要な時に生成できます。

### 手動生成（オプション）

テンプレートを事前に生成したい場合は、以下を実行：

\`\`\`
MODE = template
TEMPLATE_NAME = intent_template  # 生成したいテンプレート名
DOCS_ROOT = (あなたのDOCS_ROOT)
\`\`\`
```

#### 4. バージョン記録ファイルの作成

`{{AIDLC_ROOT}}/version.txt` を作成し、スターターキットのバージョンを記録します：

```
echo "1.0.0" > {{AIDLC_ROOT}}/version.txt
```

このファイルは、将来的にスターターキットの更新を確認するために使用されます。

#### 5. 重要な設計原則

- **フェーズごとに必要な情報のみ**：各 .md は該当フェーズに必要な情報だけを含める
- **コンテキストリセット前提**：common.md + 該当フェーズの .md のみ読み込む設計
- **AI-DLC原則の反映**：会話の反転、短サイクル、設計技法統合
- **言語統一**：すべてのドキュメント・コメントは {{LANGUAGE}} で記述

#### 6. 初回の history.md 記録

このセットアップ作業自体を history.md に記録してください：
- 実行日時（`date` コマンドで取得）
- フェーズ：準備
- 実行内容：AI-DLC環境セットアップ
- このプロンプト全体
- 作成したファイル一覧

#### 7. 完了確認と次のステップの表示

すべての準備が完了したら、以下を実行してください：

1. 作成したファイルの一覧を表示
2. 各プロンプトファイルの概要を簡潔に説明
3. **Gitコミットを作成【必須】**: セットアップで作成したすべてのファイルをコミット（メッセージ例: "chore: AI-DLC環境のセットアップ完了"）
4. **以下の「セットアップ完了メッセージ」をユーザーに表示**

---

**ユーザーへの表示内容（そのまま出力してください）**:

```
🎉 AI-DLC環境のセットアップが完了しました！

作成されたファイル:

共通ファイル（{{AIDLC_ROOT}}/）:
- prompts/inception.md - Inception Phase用プロンプト（共通知識を含む）
- prompts/construction.md - Construction Phase用プロンプト（共通知識を含む）
- prompts/operations.md - Operations Phase用プロンプト（共通知識を含む）
- prompts/additional-rules.md - 共通の追加ルール
- templates/index.md - テンプレート一覧
- version.txt - スターターキットバージョン（1.0.0）

バージョン固有ファイル（{{VERSIONS_ROOT}}/{{VERSION}}/）:
- history.md - 実行履歴
- plans/, requirements/, story-artifacts/, design-artifacts/, construction/, operations/ ディレクトリ

---

## ⚠️ 重要: カスタマイズが必要です

Inception Phase を開始する前に、**必ず `{{AIDLC_ROOT}}/prompts/additional-rules.md` をプロジェクトに合わせてカスタマイズしてください**。

カスタマイズすべき項目：
1. **コーディング規約**（命名規則、フォーマットルール等）
2. **使用するライブラリやフレームワークの制約**
3. **セキュリティ要件**
4. **パフォーマンス要件**
5. **その他プロジェクト固有の制約**

詳細は、このファイル末尾の「セットアップ完了後の重要なステップ」セクションを参照してください。

---

## 重要: コンテキストリセットについて

AI-DLC では、各フェーズの開始時にコンテキストをリセット（新しいセッションを開始）することを推奨します。

理由：
- 各フェーズで必要な情報のみを読み込むことで、コンテキスト効率を最大化
- 不要な情報による混乱を防止
- 各フェーズの責務を明確に分離

---

## セットアップ完了後の重要なステップ

### ステップ1: プロジェクト固有のカスタマイズ（必須）

セットアップ完了後、**必ず以下のファイルをプロジェクトに合わせてカスタマイズしてください**：

#### `{{AIDLC_ROOT}}/prompts/additional-rules.md`
プロジェクト固有のルールや制約を記載してください：
- コーディング規約（命名規則、フォーマットルール等）
- 使用するライブラリやフレームワークの制約
- セキュリティ要件
- パフォーマンス要件
- その他プロジェクト固有の制約

**例**:
```markdown
# 追加ルール

## コーディング規約
- Swift: Swift Style Guide に準拠
- 変数名: lowerCamelCase、定数名: UPPER_SNAKE_CASE

## 使用禁止ライブラリ
- RxSwift: Combine を使用すること

## セキュリティ
- ユーザー入力は必ずバリデーション
- API キーは環境変数で管理
```

**注意**: 共通のadditional-rules.mdは全バージョンで共有されます。バージョン固有のルールが必要な場合は、`{{VERSIONS_ROOT}}/{{VERSION}}/additional-rules.md` を作成してください。

#### テンプレートファイル（オプション）
必要に応じて `{{AIDLC_ROOT}}/templates/` 配下のテンプレートをプロジェクトに合わせて調整してください。

---

### ステップ2: Inception Phase の開始

カスタマイズ完了後、**新しいセッション（コンテキストリセット）**を開始して以下のプロンプトを実行してください：

```
以下のファイルを読み込んで、Inception Phase を開始してください：
{{AIDLC_ROOT}}/prompts/inception.md

{{PROJECT_NAME}} {{VERSION}} の開発を開始します。
まず Intent（開発意図）を明確化し、ユーザーストーリーと Unit 定義を行います。

注意: inception.mdには共通知識が含まれているため、このファイルだけで開始できます。
```

---

注意:
- セットアップが完了したら、上記のステップ1（カスタマイズ）を完了してから、ステップ2（新しいセッションでInception開始）を実行してください
- 各フェーズ完了時にも、次のフェーズ用のプロンプトが表示されます
```
