# AI-DLC セットアップ - エントリーポイント

このファイルは AI-DLC セットアップのエントリーポイントです。
プロジェクトの状態を判定し、適切なセットアッププロンプトへ誘導します。

---

## 1. 実行環境の確認

**まず最初に、現在のカレントディレクトリを確認してください**:

```bash
pwd
```

**このセットアップは、対象プロジェクトのルートディレクトリで実行する必要があります。**

もし現在のディレクトリが `ai-dlc-starter-kit` リポジトリ内の場合:
- **このままセットアップを実行しないでください**
- **対象プロジェクトのルートディレクトリに移動してから、このファイルのフルパスを指定して再度実行してください**

**確認が完了したら、以下をユーザーに表示してください**:

```
現在のディレクトリ: [pwd の結果]

このディレクトリで AI-DLC セットアップを実行してよろしいですか？
```

ユーザーが「はい」と明示的に承認するまで、次のステップに進まないでください。

---

## 2. セットアップ種類の判定

以下のファイルの存在とバージョンを確認してください:

```bash
# project.toml の存在確認
ls docs/aidlc/project.toml 2>/dev/null && echo "PROJECT_TOML_EXISTS" || echo "PROJECT_TOML_NOT_EXISTS"

# プロジェクトのバージョン確認
cat docs/aidlc/version.txt 2>/dev/null || echo "VERSION_NOT_FOUND"
```

また、このファイル（setup-prompt.md）のディレクトリから `../version.txt` を読み込み、**スターターキットのバージョン**を確認してください。

### 判定結果に基づく対応

#### ケース A: `project.toml` が存在しない（初回セットアップ）

以下のメッセージを表示してください:

```
AI-DLC の初回セットアップを行います。

次のステップ:
このファイルと同じディレクトリにある setup-init.md を読み込んでください。

[このファイルのパス]/setup-init.md
```

**ここで処理を停止し、ユーザーが setup-init.md を読み込むのを待ってください。**

---

#### ケース B: `project.toml` が存在 & バージョン同じ（サイクル開始）

以下のメッセージを表示してください:

```
AI-DLC は最新です。新しいサイクルを開始します。

次のステップ:
このファイルと同じディレクトリにある setup-cycle.md を読み込んでください。

[このファイルのパス]/setup-cycle.md
```

**ここで処理を停止し、ユーザーが setup-cycle.md を読み込むのを待ってください。**

---

#### ケース C: `project.toml` が存在 & プロジェクトが古い（アップグレード可能）

以下のメッセージを表示してください:

```
AI-DLC のアップグレードが利用可能です。

現在のバージョン: [プロジェクトの version.txt]
最新バージョン: [スターターキットの version.txt]

選択してください:
1. アップグレードする（プロンプト・テンプレートを更新）
2. 現在のバージョンのまま新しいサイクルを開始する

どちらを選択しますか？
```

**ユーザーの選択に基づく対応**:
- **1 を選択**: 「setup-init.md を読み込んでください」と案内（アップグレードモード）
- **2 を選択**: 「setup-cycle.md を読み込んでください」と案内

---

#### ケース D: プロジェクトが新しい（警告）

プロジェクトの version.txt > スターターキットの version.txt の場合:

```
警告: プロジェクトのバージョンがスターターキットより新しいです。

プロジェクト: [プロジェクトの version.txt]
スターターキット: [スターターキットの version.txt]

スターターキットのアップデートを推奨します。
現在のバージョンで続行する場合は setup-cycle.md を読み込んでください。
```

---

## 補足: 後方互換性

`docs/aidlc/project.toml` は存在しないが `docs/aidlc/version.txt` が存在する場合:
- これは旧バージョンの AI-DLC でセットアップされたプロジェクトです
- ケース A（初回セットアップ）として扱い、移行を案内してください

---

## AI-DLC 概要

AI-DLC（AI-Driven Development Lifecycle）は、AIを開発の中心に据えた新しい開発手法です。

**主要原則**:
- **会話の反転**: AIが作業計画を提示し、人間が承認・判断する
- **設計技法の統合**: DDD・BDD・TDDをAIが自動適用
- **短サイクル反復**: 各フェーズを短いサイクルで反復

**3つのフェーズ**:
1. **Inception**: 要件定義、ユーザーストーリー作成、Unit分解
2. **Construction**: 設計、実装、テスト
3. **Operations**: デプロイ、監視、運用
